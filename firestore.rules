rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // For development mode, allow all reads and writes
    match /{document=**} {
      allow read, write: if true;
    }
    
    // Uncomment for production (these rules will be stricter)
    // UNCOMMENT FOR PRODUCTION
    // // Allow read/write access to users collection for authenticated users
    // match /players/{userId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null && request.auth.uid == userId;
    // }
    // 
    // // Allow read for game data
    // match /games/{gameId} {
    //   allow read: if request.auth != null;
    //   allow write: if request.auth != null && (
    //     // Allow creation
    //     !exists(/databases/$(database)/documents/games/$(gameId)) ||
    //     // Allow updates by the creator
    //     request.auth.uid == resource.data.createdBy ||
    //     // Allow updates for player data
    //     request.resource.data.diff(resource.data).affectedKeys().hasOnly([request.auth.uid, '__trendguesser.state']) ||
    //     // Allow specific state updates
    //     request.resource.data.diff(resource.data).affectedKeys().hasOnly(['status', '__trendguesser.state'])
    //   );
    // }
    // 
    // // Allow read for search terms
    // match /searchTerms/{termId} {
    //   allow read: if request.auth != null;
    //   allow write: if false; // Only allow writes via Firebase Functions
    // }
    // 
    // // Allow read for leaderboard
    // match /leaderboard/{entryId} {
    //   allow read: if true; // Anyone can read leaderboard
    //   allow write: if false; // Only allow writes via Firebase Functions
    // }
  }
}