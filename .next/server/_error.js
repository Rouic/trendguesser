/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "/_error";
exports.ids = ["/_error"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./src/pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./src/pages/_app.tsx\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./node_modules/next/dist/pages/_error.js */ \"./node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__]);\nprivate_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGX2Vycm9yJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZwYWdlcyUyRl9lcnJvci5qcyZhYnNvbHV0ZUFwcFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2FwcCZhYnNvbHV0ZURvY3VtZW50UGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZG9jdW1lbnQmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdGO0FBQ2hDO0FBQ0U7QUFDMUQ7QUFDeUQ7QUFDVjtBQUMvQztBQUNxRTtBQUNyRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbUVBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsbUVBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsbUVBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsbUVBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLG1FQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLG1FQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsbUVBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsbUVBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsbUVBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsbUVBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsbUVBQVE7QUFDekQ7QUFDTyx3QkFBd0Isa0dBQWdCO0FBQy9DO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLDhEQUFXO0FBQ3hCLGtCQUFrQixtRUFBZ0I7QUFDbEMsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELGlDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0ICogYXMgZG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCAqIGFzIGFwcCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19hcHBcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvcGFnZXMvX2Vycm9yLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGNvbXBvbmVudCAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsICdnZXRTdGF0aWNQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsICdnZXRTdGF0aWNQYXRocycpO1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U2VydmVyU2lkZVByb3BzJyk7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbmV4cG9ydCBjb25zdCByZXBvcnRXZWJWaXRhbHMgPSBob2lzdCh1c2VybGFuZCwgJ3JlcG9ydFdlYlZpdGFscycpO1xuLy8gUmUtZXhwb3J0IGxlZ2FjeSBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTdGF0aWNQYXRocycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhcmFtcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zJyk7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFNlcnZlclByb3BzJyk7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHMnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICBwYWdlOiBcIi9fZXJyb3JcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL19lcnJvclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgLy8gZGVmYXVsdCBleHBvcnQgbWlnaHQgbm90IGV4aXN0IHdoZW4gb3B0aW1pemVkIGZvciBkYXRhIG9ubHlcbiAgICAgICAgQXBwOiBhcHAuZGVmYXVsdCxcbiAgICAgICAgRG9jdW1lbnQ6IGRvY3VtZW50LmRlZmF1bHRcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./src/contexts/AuthContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/AuthContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/firebase/firebase */ \"./src/lib/firebase/firebase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/contexts/AuthContext.tsx\n\n\n\n\n// Create the Auth Context\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// Auth Provider Component\nconst AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [userUid, setUserUid] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // We don't need to initialize Firebase in AuthContext\n    // as it's already initialized in _app.tsx\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            console.log(\"AuthContext mounted\");\n        }\n    }[\"AuthProvider.useEffect\"], []);\n    // Generate a stable mock user ID that persists across app sessions\n    const generateMockUserId = ()=>{\n        // First, try to get an existing mock user ID from localStorage for persistence\n        if (false) {}\n        // Fallback for SSR\n        return \"mock-\" + Math.random().toString(36).substring(2, 11);\n    };\n    // Listen for auth state changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            // If mock mode is enabled, skip Firebase auth\n            if (true) {\n                console.log(\"Using mock authentication mode\");\n                // Get or generate a mock user ID that persists\n                const mockUid = generateMockUserId();\n                // Store the mock user ID in sessionStorage for use across components\n                if (false) {}\n                setUser({\n                    uid: mockUid\n                });\n                setUserUid(mockUid);\n                setLoading(false);\n                return ({\n                    \"AuthProvider.useEffect\": ()=>{}\n                })[\"AuthProvider.useEffect\"];\n            }\n            try {\n                // Make sure Firebase is initialized\n                const firebaseApp = (0,_lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__.initializeFirebase)(true, false);\n                // Use the auth instance from the initialized Firebase\n                const auth = firebaseApp.auth;\n                if (!auth) {\n                    console.error(\"Firebase auth is not initialized\");\n                    // Fallback to mock user if Firebase auth isn't available\n                    const mockUid = generateMockUserId();\n                    setUser({\n                        uid: mockUid\n                    });\n                    setUserUid(mockUid);\n                    // Store the mock user ID in sessionStorage\n                    if (false) {}\n                    setLoading(false);\n                    return ({\n                        \"AuthProvider.useEffect\": ()=>{}\n                    })[\"AuthProvider.useEffect\"];\n                }\n                console.log(\"Setting up auth state listener\");\n                const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.onAuthStateChanged)(auth, {\n                    \"AuthProvider.useEffect.unsubscribe\": async (authUser)=>{\n                        console.log(\"Auth state changed:\", authUser ? `User: ${authUser.uid}` : \"No user\");\n                        if (authUser) {\n                            setUser(authUser);\n                            setUserUid(authUser.uid);\n                            try {\n                                // Initialize Firebase\n                                const { db } = (0,_lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__.initializeFirebase)(true, false);\n                                // Check if user exists in Firestore, create if not\n                                if (db) {\n                                    const { doc, getDoc, setDoc } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! firebase/firestore */ \"firebase/firestore\"));\n                                    const userRef = doc(db, \"players\", authUser.uid);\n                                    const userDoc = await getDoc(userRef);\n                                    if (!userDoc.exists()) {\n                                        // Create new user document\n                                        await setDoc(userRef, {\n                                            uid: authUser.uid,\n                                            name: `Player_${authUser.uid.substring(0, 5)}`,\n                                            createdAt: new Date(),\n                                            highScores: {}\n                                        });\n                                        console.log(\"Created new user document in Firestore\");\n                                    }\n                                }\n                            } catch (error) {\n                                console.error(\"Error checking/creating user document:\", error);\n                            }\n                        } else {\n                            setUser(null);\n                            setUserUid(null);\n                        }\n                        setLoading(false);\n                    }\n                }[\"AuthProvider.useEffect.unsubscribe\"]);\n                // Cleanup subscription\n                return ({\n                    \"AuthProvider.useEffect\": ()=>unsubscribe()\n                })[\"AuthProvider.useEffect\"];\n            } catch (error) {\n                console.error(\"Error setting up auth state listener:\", error);\n                // Fallback to mock user if Firebase auth fails\n                const mockUid = generateMockUserId();\n                setUser({\n                    uid: mockUid\n                });\n                setUserUid(mockUid);\n                // Store the mock user ID in sessionStorage\n                if (false) {}\n                setLoading(false);\n                return ({\n                    \"AuthProvider.useEffect\": ()=>{}\n                })[\"AuthProvider.useEffect\"];\n            }\n        }\n    }[\"AuthProvider.useEffect\"], []);\n    // Sign in anonymously\n    const signInAnonymously = async ()=>{\n        try {\n            // Skip anonymous auth if it's not setup correctly to avoid errors\n            if (true) {\n                console.log(\"Skipping anonymous auth (NEXT_PUBLIC_SKIP_AUTH=true)\");\n                // Mock a user instead\n                const mockUid = generateMockUserId();\n                setUser({\n                    uid: mockUid\n                });\n                setUserUid(mockUid);\n                // Store the mock user ID in sessionStorage\n                if (false) {}\n                setLoading(false);\n                return;\n            }\n            // Make sure Firebase is initialized\n            const firebaseApp = (0,_lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__.initializeFirebase)(true, false);\n            const auth = firebaseApp.auth;\n            if (!auth) {\n                throw new Error(\"Firebase auth is not initialized\");\n            }\n            console.log(\"Attempting anonymous sign in\");\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signInAnonymously)(auth);\n        } catch (error) {\n            console.error(\"Error signing in anonymously:\", error);\n            // If anonymous auth fails, mock a user to allow the app to function\n            const mockUid = generateMockUserId();\n            setUser({\n                uid: mockUid\n            });\n            setUserUid(mockUid);\n            // Store the mock user ID in sessionStorage\n            if (false) {}\n            setLoading(false);\n        }\n    };\n    // Sign out\n    const signOut = async ()=>{\n        try {\n            // If in mock mode, just clear the user state\n            if (true) {\n                setUser(null);\n                setUserUid(null);\n                // Clear the mock user ID from sessionStorage\n                if (false) {}\n                return;\n            }\n            // Make sure Firebase is initialized\n            const firebaseApp = (0,_lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_3__.initializeFirebase)(true, false);\n            const auth = firebaseApp.auth;\n            if (!auth) {\n                throw new Error(\"Firebase auth is not initialized\");\n            }\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signOut)(auth);\n        } catch (error) {\n            console.error(\"Error signing out:\", error);\n            // Reset user state regardless of error\n            setUser(null);\n            setUserUid(null);\n            // Clear the mock user ID from sessionStorage\n            if (false) {}\n        }\n    };\n    // Auto sign in anonymously if not signed in\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            // Check if Firebase emulator is running\n            const isEmulator =  false && 0;\n            if (!loading && !user) {\n                console.log(\"Auto sign-in: No user detected, attempting anonymous sign in\");\n                if (isEmulator) {\n                    console.log(\"Using Firebase emulator for authentication\");\n                }\n                signInAnonymously();\n            }\n        }\n    }[\"AuthProvider.useEffect\"], [\n        loading,\n        user\n    ]);\n    // Context value\n    const value = {\n        user,\n        userUid,\n        loading,\n        signInAnonymously,\n        signOut\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: !loading && children\n    }, void 0, false, {\n        fileName: \"/Users/alex/Developer/trendguesser/src/contexts/AuthContext.tsx\",\n        lineNumber: 291,\n        columnNumber: 5\n    }, undefined);\n};\n// Custom hook to use the auth context\nconst useAuth = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (context === undefined) {\n        throw new Error(\"useAuth must be used within an AuthProvider\");\n    }\n    return context;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthContext);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0FFO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ0ksWUFBWW9ELFFBQVE7UUFBQ0QsT0FBT0E7a0JBQzFCLENBQUMzQyxXQUFXTDs7Ozs7O0FBR25CLEVBQUU7QUFFRixzQ0FBc0M7QUFDL0IsTUFBTWtELFVBQVU7SUFDckIsTUFBTUMsVUFBVS9ELGlEQUFVQSxDQUFDUztJQUMzQixJQUFJc0QsWUFBWXJELFdBQVc7UUFDekIsTUFBTSxJQUFJMkMsTUFBTTtJQUNsQjtJQUNBLE9BQU9VO0FBQ1QsRUFBRTtBQUVGLGlFQUFldEQsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2FsZXgvRGV2ZWxvcGVyL3RyZW5kZ3Vlc3Nlci9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb250ZXh0cy9BdXRoQ29udGV4dC50c3hcbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICBzaWduSW5Bbm9ueW1vdXNseSBhcyBmaXJlYmFzZVNpZ25JbkFub255bW91c2x5LFxuICBzaWduT3V0IGFzIGZpcmViYXNlU2lnbk91dCxcbiAgb25BdXRoU3RhdGVDaGFuZ2VkLFxuICBVc2VyLFxuICBnZXRBdXRoLFxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbGl6ZUZpcmViYXNlLFxuICBhdXRoIGFzIGZpcmViYXNlQXV0aCxcbn0gZnJvbSBcIi4uL2xpYi9maXJlYmFzZS9maXJlYmFzZVwiO1xuaW1wb3J0IHsgQXV0aENvbnRleHRUeXBlIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8vIENyZWF0ZSB0aGUgQXV0aCBDb250ZXh0XG5jb25zdCBBdXRoQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8QXV0aENvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4vLyBBdXRoIFByb3ZpZGVyIENvbXBvbmVudFxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHtcbiAgY2hpbGRyZW4sXG59KSA9PiB7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3VzZXJVaWQsIHNldFVzZXJVaWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIC8vIFdlIGRvbid0IG5lZWQgdG8gaW5pdGlhbGl6ZSBGaXJlYmFzZSBpbiBBdXRoQ29udGV4dFxuICAvLyBhcyBpdCdzIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW4gX2FwcC50c3hcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkF1dGhDb250ZXh0IG1vdW50ZWRcIik7XG4gIH0sIFtdKTtcblxuICAvLyBHZW5lcmF0ZSBhIHN0YWJsZSBtb2NrIHVzZXIgSUQgdGhhdCBwZXJzaXN0cyBhY3Jvc3MgYXBwIHNlc3Npb25zXG4gIGNvbnN0IGdlbmVyYXRlTW9ja1VzZXJJZCA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIC8vIEZpcnN0LCB0cnkgdG8gZ2V0IGFuIGV4aXN0aW5nIG1vY2sgdXNlciBJRCBmcm9tIGxvY2FsU3RvcmFnZSBmb3IgcGVyc2lzdGVuY2VcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc3QgZXhpc3RpbmdJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibW9ja191c2VyX3VpZFwiKTtcbiAgICAgIGlmIChleGlzdGluZ0lkKSB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0lkO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBleGlzdGluZyBJRCwgZ2VuZXJhdGUgYSBuZXcgb25lXG4gICAgICBjb25zdCBuZXdJZCA9IFwibW9jay1cIiArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMSk7XG5cbiAgICAgIC8vIFN0b3JlIGl0IGluIGxvY2FsU3RvcmFnZSBmb3IgZnV0dXJlIHVzZVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtb2NrX3VzZXJfdWlkXCIsIG5ld0lkKTtcblxuICAgICAgcmV0dXJuIG5ld0lkO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIGZvciBTU1JcbiAgICByZXR1cm4gXCJtb2NrLVwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDExKTtcbiAgfTtcblxuICAvLyBMaXN0ZW4gZm9yIGF1dGggc3RhdGUgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIElmIG1vY2sgbW9kZSBpcyBlbmFibGVkLCBza2lwIEZpcmViYXNlIGF1dGhcbiAgICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0tJUF9BVVRIID09PSBcInRydWVcIikge1xuICAgICAgY29uc29sZS5sb2coXCJVc2luZyBtb2NrIGF1dGhlbnRpY2F0aW9uIG1vZGVcIik7XG5cbiAgICAgIC8vIEdldCBvciBnZW5lcmF0ZSBhIG1vY2sgdXNlciBJRCB0aGF0IHBlcnNpc3RzXG4gICAgICBjb25zdCBtb2NrVWlkID0gZ2VuZXJhdGVNb2NrVXNlcklkKCk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSBtb2NrIHVzZXIgSUQgaW4gc2Vzc2lvblN0b3JhZ2UgZm9yIHVzZSBhY3Jvc3MgY29tcG9uZW50c1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcIm1vY2tfdXNlcl91aWRcIiwgbW9ja1VpZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RvcmVkIG1vY2sgdXNlciBJRCBpbiBzZXNzaW9uIHN0b3JhZ2U6XCIsIG1vY2tVaWQpO1xuICAgICAgfVxuXG4gICAgICBzZXRVc2VyKHsgdWlkOiBtb2NrVWlkIH0gYXMgVXNlcik7XG4gICAgICBzZXRVc2VyVWlkKG1vY2tVaWQpO1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIE1ha2Ugc3VyZSBGaXJlYmFzZSBpcyBpbml0aWFsaXplZFxuICAgICAgY29uc3QgZmlyZWJhc2VBcHAgPSBpbml0aWFsaXplRmlyZWJhc2UodHJ1ZSwgZmFsc2UpO1xuICAgICAgLy8gVXNlIHRoZSBhdXRoIGluc3RhbmNlIGZyb20gdGhlIGluaXRpYWxpemVkIEZpcmViYXNlXG4gICAgICBjb25zdCBhdXRoID0gZmlyZWJhc2VBcHAuYXV0aDtcblxuICAgICAgaWYgKCFhdXRoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGaXJlYmFzZSBhdXRoIGlzIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgICAgICAvLyBGYWxsYmFjayB0byBtb2NrIHVzZXIgaWYgRmlyZWJhc2UgYXV0aCBpc24ndCBhdmFpbGFibGVcbiAgICAgICAgY29uc3QgbW9ja1VpZCA9IGdlbmVyYXRlTW9ja1VzZXJJZCgpO1xuICAgICAgICBzZXRVc2VyKHsgdWlkOiBtb2NrVWlkIH0gYXMgVXNlcik7XG4gICAgICAgIHNldFVzZXJVaWQobW9ja1VpZCk7XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlIG1vY2sgdXNlciBJRCBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJtb2NrX3VzZXJfdWlkXCIsIG1vY2tVaWQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgXCJTdG9yZWQgZmFsbGJhY2sgbW9jayB1c2VyIElEIGluIHNlc3Npb24gc3RvcmFnZTpcIixcbiAgICAgICAgICAgIG1vY2tVaWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJTZXR0aW5nIHVwIGF1dGggc3RhdGUgbGlzdGVuZXJcIik7XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAoYXV0aFVzZXIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJBdXRoIHN0YXRlIGNoYW5nZWQ6XCIsXG4gICAgICAgICAgYXV0aFVzZXIgPyBgVXNlcjogJHthdXRoVXNlci51aWR9YCA6IFwiTm8gdXNlclwiXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGF1dGhVc2VyKSB7XG4gICAgICAgICAgc2V0VXNlcihhdXRoVXNlcik7XG4gICAgICAgICAgc2V0VXNlclVpZChhdXRoVXNlci51aWQpO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgRmlyZWJhc2VcbiAgICAgICAgICAgIGNvbnN0IHsgZGIgfSA9IGluaXRpYWxpemVGaXJlYmFzZSh0cnVlLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzIGluIEZpcmVzdG9yZSwgY3JlYXRlIGlmIG5vdFxuICAgICAgICAgICAgaWYgKGRiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZG9jLCBnZXREb2MsIHNldERvYyB9ID0gYXdhaXQgaW1wb3J0KFxuICAgICAgICAgICAgICAgIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgXCJwbGF5ZXJzXCIsIGF1dGhVc2VyLnVpZCk7XG4gICAgICAgICAgICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XG5cbiAgICAgICAgICAgICAgaWYgKCF1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyB1c2VyIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0RG9jKHVzZXJSZWYsIHtcbiAgICAgICAgICAgICAgICAgIHVpZDogYXV0aFVzZXIudWlkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogYFBsYXllcl8ke2F1dGhVc2VyLnVpZC5zdWJzdHJpbmcoMCwgNSl9YCxcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgIGhpZ2hTY29yZXM6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRlZCBuZXcgdXNlciBkb2N1bWVudCBpbiBGaXJlc3RvcmVcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nL2NyZWF0aW5nIHVzZXIgZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgICAgICBzZXRVc2VyVWlkKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xlYW51cCBzdWJzY3JpcHRpb25cbiAgICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2V0dGluZyB1cCBhdXRoIHN0YXRlIGxpc3RlbmVyOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgdXNlciBpZiBGaXJlYmFzZSBhdXRoIGZhaWxzXG4gICAgICBjb25zdCBtb2NrVWlkID0gZ2VuZXJhdGVNb2NrVXNlcklkKCk7XG4gICAgICBzZXRVc2VyKHsgdWlkOiBtb2NrVWlkIH0gYXMgVXNlcik7XG4gICAgICBzZXRVc2VyVWlkKG1vY2tVaWQpO1xuXG4gICAgICAvLyBTdG9yZSB0aGUgbW9jayB1c2VyIElEIGluIHNlc3Npb25TdG9yYWdlXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibW9ja191c2VyX3VpZFwiLCBtb2NrVWlkKTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJTdG9yZWQgZXJyb3ItZmFsbGJhY2sgbW9jayB1c2VyIElEIGluIHNlc3Npb24gc3RvcmFnZTpcIixcbiAgICAgICAgICBtb2NrVWlkXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIFNpZ24gaW4gYW5vbnltb3VzbHlcbiAgY29uc3Qgc2lnbkluQW5vbnltb3VzbHkgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNraXAgYW5vbnltb3VzIGF1dGggaWYgaXQncyBub3Qgc2V0dXAgY29ycmVjdGx5IHRvIGF2b2lkIGVycm9yc1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NLSVBfQVVUSCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTa2lwcGluZyBhbm9ueW1vdXMgYXV0aCAoTkVYVF9QVUJMSUNfU0tJUF9BVVRIPXRydWUpXCIpO1xuICAgICAgICAvLyBNb2NrIGEgdXNlciBpbnN0ZWFkXG4gICAgICAgIGNvbnN0IG1vY2tVaWQgPSBnZW5lcmF0ZU1vY2tVc2VySWQoKTtcbiAgICAgICAgc2V0VXNlcih7IHVpZDogbW9ja1VpZCB9IGFzIFVzZXIpO1xuICAgICAgICBzZXRVc2VyVWlkKG1vY2tVaWQpO1xuXG4gICAgICAgIC8vIFN0b3JlIHRoZSBtb2NrIHVzZXIgSUQgaW4gc2Vzc2lvblN0b3JhZ2VcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibW9ja191c2VyX3VpZFwiLCBtb2NrVWlkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0b3JlZCB0ZW1wIG1vY2sgdXNlciBJRCBpbiBzZXNzaW9uIHN0b3JhZ2U6XCIsIG1vY2tVaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIEZpcmViYXNlIGlzIGluaXRpYWxpemVkXG4gICAgICBjb25zdCBmaXJlYmFzZUFwcCA9IGluaXRpYWxpemVGaXJlYmFzZSh0cnVlLCBmYWxzZSk7XG4gICAgICBjb25zdCBhdXRoID0gZmlyZWJhc2VBcHAuYXV0aDtcblxuICAgICAgaWYgKCFhdXRoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpcmViYXNlIGF1dGggaXMgbm90IGluaXRpYWxpemVkXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgYW5vbnltb3VzIHNpZ24gaW5cIik7XG4gICAgICBhd2FpdCBmaXJlYmFzZVNpZ25JbkFub255bW91c2x5KGF1dGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2lnbmluZyBpbiBhbm9ueW1vdXNseTpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBJZiBhbm9ueW1vdXMgYXV0aCBmYWlscywgbW9jayBhIHVzZXIgdG8gYWxsb3cgdGhlIGFwcCB0byBmdW5jdGlvblxuICAgICAgY29uc3QgbW9ja1VpZCA9IGdlbmVyYXRlTW9ja1VzZXJJZCgpO1xuICAgICAgc2V0VXNlcih7IHVpZDogbW9ja1VpZCB9IGFzIFVzZXIpO1xuICAgICAgc2V0VXNlclVpZChtb2NrVWlkKTtcblxuICAgICAgLy8gU3RvcmUgdGhlIG1vY2sgdXNlciBJRCBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcIm1vY2tfdXNlcl91aWRcIiwgbW9ja1VpZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIFwiU3RvcmVkIHNpZ25pbi1lcnJvciBtb2NrIHVzZXIgSUQgaW4gc2Vzc2lvbiBzdG9yYWdlOlwiLFxuICAgICAgICAgIG1vY2tVaWRcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNpZ24gb3V0XG4gIGNvbnN0IHNpZ25PdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIGluIG1vY2sgbW9kZSwganVzdCBjbGVhciB0aGUgdXNlciBzdGF0ZVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NLSVBfQVVUSCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgICAgc2V0VXNlclVpZChudWxsKTtcblxuICAgICAgICAvLyBDbGVhciB0aGUgbW9jayB1c2VyIElEIGZyb20gc2Vzc2lvblN0b3JhZ2VcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwibW9ja191c2VyX3VpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIEZpcmViYXNlIGlzIGluaXRpYWxpemVkXG4gICAgICBjb25zdCBmaXJlYmFzZUFwcCA9IGluaXRpYWxpemVGaXJlYmFzZSh0cnVlLCBmYWxzZSk7XG4gICAgICBjb25zdCBhdXRoID0gZmlyZWJhc2VBcHAuYXV0aDtcblxuICAgICAgaWYgKCFhdXRoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpcmViYXNlIGF1dGggaXMgbm90IGluaXRpYWxpemVkXCIpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBmaXJlYmFzZVNpZ25PdXQoYXV0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzaWduaW5nIG91dDpcIiwgZXJyb3IpO1xuICAgICAgLy8gUmVzZXQgdXNlciBzdGF0ZSByZWdhcmRsZXNzIG9mIGVycm9yXG4gICAgICBzZXRVc2VyKG51bGwpO1xuICAgICAgc2V0VXNlclVpZChudWxsKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIG1vY2sgdXNlciBJRCBmcm9tIHNlc3Npb25TdG9yYWdlXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwibW9ja191c2VyX3VpZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQXV0byBzaWduIGluIGFub255bW91c2x5IGlmIG5vdCBzaWduZWQgaW5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiBGaXJlYmFzZSBlbXVsYXRvciBpcyBydW5uaW5nXG4gICAgY29uc3QgaXNFbXVsYXRvciA9XG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgJiZcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRV9GSVJFQkFTRV9FTVVMQVRPUiA9PT0gXCJ0cnVlXCI7XG5cbiAgICBpZiAoIWxvYWRpbmcgJiYgIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcIkF1dG8gc2lnbi1pbjogTm8gdXNlciBkZXRlY3RlZCwgYXR0ZW1wdGluZyBhbm9ueW1vdXMgc2lnbiBpblwiXG4gICAgICApO1xuICAgICAgaWYgKGlzRW11bGF0b3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyBGaXJlYmFzZSBlbXVsYXRvciBmb3IgYXV0aGVudGljYXRpb25cIik7XG4gICAgICB9XG4gICAgICBzaWduSW5Bbm9ueW1vdXNseSgpO1xuICAgIH1cbiAgfSwgW2xvYWRpbmcsIHVzZXJdKTtcblxuICAvLyBDb250ZXh0IHZhbHVlXG4gIGNvbnN0IHZhbHVlOiBBdXRoQ29udGV4dFR5cGUgPSB7XG4gICAgdXNlcixcbiAgICB1c2VyVWlkLFxuICAgIGxvYWRpbmcsXG4gICAgc2lnbkluQW5vbnltb3VzbHksXG4gICAgc2lnbk91dCxcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBdXRoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PlxuICAgICAgeyFsb2FkaW5nICYmIGNoaWxkcmVufVxuICAgIDwvQXV0aENvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyBDdXN0b20gaG9vayB0byB1c2UgdGhlIGF1dGggY29udGV4dFxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInVzZUF1dGggbXVzdCBiZSB1c2VkIHdpdGhpbiBhbiBBdXRoUHJvdmlkZXJcIik7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBdXRoQ29udGV4dDtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJzaWduSW5Bbm9ueW1vdXNseSIsImZpcmViYXNlU2lnbkluQW5vbnltb3VzbHkiLCJzaWduT3V0IiwiZmlyZWJhc2VTaWduT3V0Iiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiaW5pdGlhbGl6ZUZpcmViYXNlIiwiQXV0aENvbnRleHQiLCJ1bmRlZmluZWQiLCJBdXRoUHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJzZXRVc2VyIiwidXNlclVpZCIsInNldFVzZXJVaWQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImNvbnNvbGUiLCJsb2ciLCJnZW5lcmF0ZU1vY2tVc2VySWQiLCJleGlzdGluZ0lkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm5ld0lkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwic2V0SXRlbSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TS0lQX0FVVEgiLCJtb2NrVWlkIiwic2Vzc2lvblN0b3JhZ2UiLCJ1aWQiLCJmaXJlYmFzZUFwcCIsImF1dGgiLCJlcnJvciIsInVuc3Vic2NyaWJlIiwiYXV0aFVzZXIiLCJkYiIsImRvYyIsImdldERvYyIsInNldERvYyIsInVzZXJSZWYiLCJ1c2VyRG9jIiwiZXhpc3RzIiwibmFtZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJoaWdoU2NvcmVzIiwiRXJyb3IiLCJyZW1vdmVJdGVtIiwiaXNFbXVsYXRvciIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJORVhUX1BVQkxJQ19VU0VfRklSRUJBU0VfRU1VTEFUT1IiLCJ2YWx1ZSIsIlByb3ZpZGVyIiwidXNlQXV0aCIsImNvbnRleHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.tsx\n");

/***/ }),

/***/ "./src/contexts/ConsentContext.tsx":
/*!*****************************************!*\
  !*** ./src/contexts/ConsentContext.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsentProvider: () => (/* binding */ ConsentProvider),\n/* harmony export */   useConsent: () => (/* binding */ useConsent)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst defaultConsentState = {\n    analytics: false,\n    necessary: true,\n    localStorage: true,\n    firebase: true\n};\nconst defaultContext = {\n    consent: defaultConsentState,\n    setConsent: ()=>{},\n    hasSetConsent: false,\n    setHasSetConsent: ()=>{}\n};\nconst ConsentContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(defaultContext);\nconst useConsent = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConsentContext);\nconst ConsentProvider = ({ children })=>{\n    const [consent, setConsentState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultConsentState);\n    const [hasSetConsent, setHasSetConsent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Load consent state from localStorage on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ConsentProvider.useEffect\": ()=>{\n            // Only attempt to read if localStorage is available\n            if (false) {}\n        }\n    }[\"ConsentProvider.useEffect\"], []);\n    // Update localStorage when consent changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ConsentProvider.useEffect\": ()=>{\n            // Only save if the user has explicitly set consent\n            if (hasSetConsent && \"undefined\" !== 'undefined') {}\n        }\n    }[\"ConsentProvider.useEffect\"], [\n        consent,\n        hasSetConsent\n    ]);\n    const setConsent = (newConsent)=>{\n        setConsentState((prev)=>({\n                ...prev,\n                ...newConsent\n            }));\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ConsentContext.Provider, {\n        value: {\n            consent,\n            setConsent,\n            hasSetConsent,\n            setHasSetConsent\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/alex/Developer/trendguesser/src/contexts/ConsentContext.tsx\",\n        lineNumber: 78,\n        columnNumber: 5\n    }, undefined);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvQ29uc2VudENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEU7QUFnQjlFLE1BQU1LLHNCQUFvQztJQUN4Q0MsV0FBVztJQUNYQyxXQUFXO0lBQ1hDLGNBQWM7SUFDZEMsVUFBVTtBQUNaO0FBRUEsTUFBTUMsaUJBQXFDO0lBQ3pDQyxTQUFTTjtJQUNUTyxZQUFZLEtBQU87SUFDbkJDLGVBQWU7SUFDZkMsa0JBQWtCLEtBQU87QUFDM0I7QUFFQSxNQUFNQywrQkFBaUJkLG9EQUFhQSxDQUFxQlM7QUFFbEQsTUFBTU0sYUFBYSxJQUFNZCxpREFBVUEsQ0FBQ2EsZ0JBQWdCO0FBRXBELE1BQU1FLGtCQUEyRCxDQUFDLEVBQUVDLFFBQVEsRUFBRTtJQUNuRixNQUFNLENBQUNQLFNBQVNRLGdCQUFnQixHQUFHaEIsK0NBQVFBLENBQWVFO0lBQzFELE1BQU0sQ0FBQ1EsZUFBZUMsaUJBQWlCLEdBQUdYLCtDQUFRQSxDQUFVO0lBRTVELGdEQUFnRDtJQUNoREMsZ0RBQVNBO3FDQUFDO1lBQ1Isb0RBQW9EO1lBQ3BELElBQUksS0FBNkIsRUFBRSxFQWdCbEM7UUFDSDtvQ0FBRyxFQUFFO0lBRUwsMkNBQTJDO0lBQzNDQSxnREFBU0E7cUNBQUM7WUFDUixtREFBbUQ7WUFDbkQsSUFBSVMsaUJBQWlCLGdCQUFrQixhQUFhLEVBR25EO1FBQ0g7b0NBQUc7UUFBQ0Y7UUFBU0U7S0FBYztJQUUzQixNQUFNRCxhQUFhLENBQUNtQjtRQUNsQlosZ0JBQWdCLENBQUNhLE9BQVU7Z0JBQ3pCLEdBQUdBLElBQUk7Z0JBQ1AsR0FBR0QsVUFBVTtZQUNmO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ2hCLGVBQWVrQixRQUFRO1FBQ3RCQyxPQUFPO1lBQ0x2QjtZQUNBQztZQUNBQztZQUNBQztRQUNGO2tCQUVDSTs7Ozs7O0FBR1AsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2FsZXgvRGV2ZWxvcGVyL3RyZW5kZ3Vlc3Nlci9zcmMvY29udGV4dHMvQ29uc2VudENvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnNlbnRTdGF0ZSB7XG4gIGFuYWx5dGljczogYm9vbGVhbjtcbiAgbmVjZXNzYXJ5OiBib29sZWFuOyAvLyBBbHdheXMgdHJ1ZSwgcmVxdWlyZWQgZm9yIGFwcCBmdW5jdGlvbmFsaXR5XG4gIGxvY2FsU3RvcmFnZTogYm9vbGVhbjtcbiAgZmlyZWJhc2U6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBDb25zZW50Q29udGV4dFR5cGUge1xuICBjb25zZW50OiBDb25zZW50U3RhdGU7XG4gIHNldENvbnNlbnQ6IChjb25zZW50OiBQYXJ0aWFsPENvbnNlbnRTdGF0ZT4pID0+IHZvaWQ7XG4gIGhhc1NldENvbnNlbnQ6IGJvb2xlYW47XG4gIHNldEhhc1NldENvbnNlbnQ6IChoYXNTZXQ6IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbmNvbnN0IGRlZmF1bHRDb25zZW50U3RhdGU6IENvbnNlbnRTdGF0ZSA9IHtcbiAgYW5hbHl0aWNzOiBmYWxzZSxcbiAgbmVjZXNzYXJ5OiB0cnVlLCAvLyBBbHdheXMgdHJ1ZSwgcmVxdWlyZWQgZm9yIGFwcCBmdW5jdGlvbmFsaXR5XG4gIGxvY2FsU3RvcmFnZTogdHJ1ZSwgLy8gRGVmYXVsdCB0byB0cnVlIGZvciBUcmVuZEd1ZXNzZXIgYXMgaXQncyBuZWVkZWQgZm9yIHNjb3JlIHRyYWNraW5nXG4gIGZpcmViYXNlOiB0cnVlLCAvLyBEZWZhdWx0IHRvIHRydWUgZm9yIFRyZW5kR3Vlc3NlciBhcyBpdCdzIG5lZWRlZCBmb3IgZ2FtZSBmdW5jdGlvbmFsaXR5XG59O1xuXG5jb25zdCBkZWZhdWx0Q29udGV4dDogQ29uc2VudENvbnRleHRUeXBlID0ge1xuICBjb25zZW50OiBkZWZhdWx0Q29uc2VudFN0YXRlLFxuICBzZXRDb25zZW50OiAoKSA9PiB7fSxcbiAgaGFzU2V0Q29uc2VudDogZmFsc2UsXG4gIHNldEhhc1NldENvbnNlbnQ6ICgpID0+IHt9LFxufTtcblxuY29uc3QgQ29uc2VudENvbnRleHQgPSBjcmVhdGVDb250ZXh0PENvbnNlbnRDb250ZXh0VHlwZT4oZGVmYXVsdENvbnRleHQpO1xuXG5leHBvcnQgY29uc3QgdXNlQ29uc2VudCA9ICgpID0+IHVzZUNvbnRleHQoQ29uc2VudENvbnRleHQpO1xuXG5leHBvcnQgY29uc3QgQ29uc2VudFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IFtjb25zZW50LCBzZXRDb25zZW50U3RhdGVdID0gdXNlU3RhdGU8Q29uc2VudFN0YXRlPihkZWZhdWx0Q29uc2VudFN0YXRlKTtcbiAgY29uc3QgW2hhc1NldENvbnNlbnQsIHNldEhhc1NldENvbnNlbnRdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIC8vIExvYWQgY29uc2VudCBzdGF0ZSBmcm9tIGxvY2FsU3RvcmFnZSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgYXR0ZW1wdCB0byByZWFkIGlmIGxvY2FsU3RvcmFnZSBpcyBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHN0b3JlZENvbnNlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY29uc2VudCcpO1xuICAgICAgY29uc3Qgc3RvcmVkSGFzU2V0Q29uc2VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoYXNTZXRDb25zZW50Jyk7XG4gICAgICBcbiAgICAgIGlmIChzdG9yZWRDb25zZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkQ29uc2VudCA9IEpTT04ucGFyc2Uoc3RvcmVkQ29uc2VudCk7XG4gICAgICAgICAgc2V0Q29uc2VudFN0YXRlKHBhcnNlZENvbnNlbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBzdG9yZWQgY29uc2VudCcsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc3RvcmVkSGFzU2V0Q29uc2VudCkge1xuICAgICAgICBzZXRIYXNTZXRDb25zZW50KHN0b3JlZEhhc1NldENvbnNlbnQgPT09ICd0cnVlJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gVXBkYXRlIGxvY2FsU3RvcmFnZSB3aGVuIGNvbnNlbnQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgc2F2ZSBpZiB0aGUgdXNlciBoYXMgZXhwbGljaXRseSBzZXQgY29uc2VudFxuICAgIGlmIChoYXNTZXRDb25zZW50ICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29uc2VudCcsIEpTT04uc3RyaW5naWZ5KGNvbnNlbnQpKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoYXNTZXRDb25zZW50JywgaGFzU2V0Q29uc2VudC50b1N0cmluZygpKTtcbiAgICB9XG4gIH0sIFtjb25zZW50LCBoYXNTZXRDb25zZW50XSk7XG5cbiAgY29uc3Qgc2V0Q29uc2VudCA9IChuZXdDb25zZW50OiBQYXJ0aWFsPENvbnNlbnRTdGF0ZT4pID0+IHtcbiAgICBzZXRDb25zZW50U3RhdGUoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgLi4ubmV3Q29uc2VudCxcbiAgICB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8Q29uc2VudENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIGNvbnNlbnQsXG4gICAgICAgIHNldENvbnNlbnQsXG4gICAgICAgIGhhc1NldENvbnNlbnQsXG4gICAgICAgIHNldEhhc1NldENvbnNlbnQsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0NvbnNlbnRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJkZWZhdWx0Q29uc2VudFN0YXRlIiwiYW5hbHl0aWNzIiwibmVjZXNzYXJ5IiwibG9jYWxTdG9yYWdlIiwiZmlyZWJhc2UiLCJkZWZhdWx0Q29udGV4dCIsImNvbnNlbnQiLCJzZXRDb25zZW50IiwiaGFzU2V0Q29uc2VudCIsInNldEhhc1NldENvbnNlbnQiLCJDb25zZW50Q29udGV4dCIsInVzZUNvbnNlbnQiLCJDb25zZW50UHJvdmlkZXIiLCJjaGlsZHJlbiIsInNldENvbnNlbnRTdGF0ZSIsInN0b3JlZENvbnNlbnQiLCJnZXRJdGVtIiwic3RvcmVkSGFzU2V0Q29uc2VudCIsInBhcnNlZENvbnNlbnQiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidG9TdHJpbmciLCJuZXdDb25zZW50IiwicHJldiIsIlByb3ZpZGVyIiwidmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/contexts/ConsentContext.tsx\n");

/***/ }),

/***/ "./src/contexts/GameContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/GameContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameProvider: () => (/* binding */ GameProvider),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useGame: () => (/* binding */ useGame)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/firebase/firebase */ \"./src/lib/firebase/firebase.ts\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/firebase/trendGuesserService */ \"./src/lib/firebase/trendGuesserService.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_3__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_4__, _AuthContext__WEBPACK_IMPORTED_MODULE_5__, _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_3__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_4__, _AuthContext__WEBPACK_IMPORTED_MODULE_5__, _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst GameContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst GameProvider = ({ children })=>{\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { userUid } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_5__.useAuth)();\n    // Use localStorage to persist gameId across page refreshes in development\n    const getInitialGameId = ()=>{\n        if (false) {}\n        return null;\n    };\n    const [gameId, _setGameId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialGameId());\n    const [gameData, setGameData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentPlayer, setCurrentPlayer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Custom setter for gameId that also updates sessionStorage\n    const setGameId = (id)=>{\n        console.log(\"Setting game ID to:\", id);\n        _setGameId(id);\n        // Also update sessionStorage\n        if (false) {}\n    };\n    // Check for a stored game ID on initial load (for mock mode)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GameProvider.useEffect\": ()=>{\n            if ( true && !gameId) {\n                if (false) {}\n            }\n        }\n    }[\"GameProvider.useEffect\"], []);\n    // Watch for changes to the game data\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GameProvider.useEffect\": ()=>{\n            if (!userUid) {\n                setLoading(false);\n                return;\n            }\n            // If game ID is not set, but we're in mock mode, try to get it from session storage\n            if (!gameId && \"true\" === \"true\") {\n                if (false) {}\n                setLoading(false);\n                return;\n            }\n            if (!gameId) {\n                setLoading(false);\n                return;\n            }\n            setLoading(true);\n            setError(null);\n            console.log(`Setting up game data watcher for game ID: ${gameId}, user: ${userUid}`);\n            // Check if using mock data\n            if (true) {\n                console.log(\"Using mock data in GameContext for game:\", gameId);\n                // Create function to check for game data in sessionStorage\n                const checkMockGameData = {\n                    \"GameProvider.useEffect.checkMockGameData\": ()=>{\n                        if (false) {}\n                    }\n                }[\"GameProvider.useEffect.checkMockGameData\"];\n                // Check immediately\n                checkMockGameData();\n                // Set up interval to check for changes (simulating Firestore's onSnapshot)\n                const intervalId = setInterval(checkMockGameData, 500);\n                return ({\n                    \"GameProvider.useEffect\": ()=>{\n                        console.log(`Cleaning up game data watcher for game ID: ${gameId}`);\n                        clearInterval(intervalId);\n                    }\n                })[\"GameProvider.useEffect\"];\n            } else {}\n        }\n    }[\"GameProvider.useEffect\"], [\n        gameId,\n        userUid\n    ]);\n    // Start a new game\n    const startGame = async (category, customTerm)=>{\n        if (!gameId || !userUid) {\n            setError(\"No game ID or user ID\");\n            return;\n        }\n        try {\n            setLoading(true);\n            console.log(`Starting game with ID: ${gameId}, category: ${category}, customTerm: ${customTerm || \"none\"}`);\n            // When using mock data, make sure the current_game_id is set correctly before starting the game\n            if (false) {}\n            // Start the game - this should return the initial game state\n            const initialGameState = await _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__.TrendGuesserService.startGame(gameId, category, customTerm);\n            if (initialGameState) {\n                // Set the game state directly from the return value for immediate use\n                setGameState(initialGameState);\n                // Update player data if needed\n                if (false) {}\n            } else {\n                console.error(\"No game state returned from TrendGuesserService.startGame\");\n                setError(\"Failed to initialize game state\");\n            }\n            setLoading(false);\n        } catch (error) {\n            console.error(\"Error starting game:\", error);\n            setError(\"Failed to start game: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            setLoading(false);\n        }\n    };\n    // Make a guess (higher or lower)\n    const makeGuess = async (isHigher)=>{\n        if (!userUid) {\n            setError(\"No user ID\");\n            return false;\n        }\n        // Get the current game ID from state or session storage\n        let currentGameId = gameId;\n        if (!currentGameId && \"true\" === \"true\" && \"undefined\" !== \"undefined\") {}\n        if (!currentGameId) {\n            setError(\"No game ID available\");\n            return false;\n        }\n        try {\n            // In mock mode, ensure the current game state is loaded properly\n            if (false) {}\n            console.log(`Making guess (${isHigher ? \"HIGHER\" : \"LOWER\"}) for game:`, currentGameId);\n            const result = await _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__.TrendGuesserService.makeGuess(currentGameId, userUid, isHigher);\n            // If in mock mode, immediately update the game state to reflect the guess result\n            if (false) {}\n            return result;\n        } catch (error) {\n            console.error(\"Error making guess:\", error);\n            setError(\"Failed to process guess: \" + (error instanceof Error ? error.message : \"Unknown error\"));\n            return false;\n        }\n    };\n    // End the game\n    const endGame = async ()=>{\n        if (!userUid || !currentPlayer) {\n            setError(\"No user ID or player data\");\n            return;\n        }\n        // Get the current game ID from state or session storage\n        let currentGameId = gameId;\n        if (!currentGameId && \"true\" === \"true\" && \"undefined\" !== \"undefined\") {}\n        if (!currentGameId) {\n            console.warn(\"No game ID available for ending game, will still proceed with reset\");\n            return;\n        }\n        try {\n            console.log(\"Ending game:\", currentGameId, \"with score:\", currentPlayer.score || 0);\n            await _lib_firebase_trendGuesserService__WEBPACK_IMPORTED_MODULE_6__.TrendGuesserService.endGame(currentGameId, userUid, currentPlayer.score || 0);\n            // In mock mode, update the game state to reflect the game ending\n            if (false) {}\n        } catch (error) {\n            console.error(\"Error ending game:\", error);\n            setError(\"Failed to end game\");\n        // Still proceed with resetting local state even if there was an error\n        }\n    };\n    // Reset game state for a new game\n    const resetGame = ()=>{\n        console.log(\"Resetting game state\");\n        // Store game ID before clearing it\n        const currentGameId = gameId;\n        // Clear state\n        setGameId(null);\n        setGameData(null);\n        setGameState(null);\n        setCurrentPlayer(null);\n        setError(null);\n        // Clear any stored game data for this game if in mock mode\n        if (false) {}\n    };\n    const value = {\n        gameId,\n        gameData,\n        loading,\n        error,\n        currentPlayer,\n        gameState,\n        setGameId,\n        startGame,\n        makeGuess,\n        endGame,\n        resetGame\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(GameContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/alex/Developer/trendguesser/src/contexts/GameContext.tsx\",\n        lineNumber: 553,\n        columnNumber: 10\n    }, undefined);\n};\nconst useGame = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(GameContext);\n    if (!context) {\n        throw new Error(\"useGame must be used within a GameProvider\");\n    }\n    return context;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GameContext);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxNQUFNbUUsVUFBVTtJQUNyQixNQUFNQyxVQUFVaEYsaURBQVVBLENBQUNTO0lBQzNCLElBQUksQ0FBQ3VFLFNBQVM7UUFDWixNQUFNLElBQUloQixNQUFNO0lBQ2xCO0lBQ0EsT0FBT2dCO0FBQ1QsRUFBRTtBQUVGLGlFQUFldkUsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2FsZXgvRGV2ZWxvcGVyL3RyZW5kZ3Vlc3Nlci9zcmMvY29udGV4dHMvR2FtZUNvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCB7XG4gIGRvYyxcbiAgZ2V0RG9jLFxuICBvblNuYXBzaG90LFxuICBjb2xsZWN0aW9uLFxuICBxdWVyeSxcbiAgd2hlcmUsXG4gIGdldERvY3MsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvbGliL2ZpcmViYXNlL2ZpcmViYXNlXCI7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSBcIi4vQXV0aENvbnRleHRcIjtcbmltcG9ydCB7XG4gIEdhbWVEYXRhLFxuICBTZWFyY2hDYXRlZ29yeSxcbiAgVHJlbmRHdWVzc2VyR2FtZVN0YXRlLFxuICBUcmVuZEd1ZXNzZXJQbGF5ZXIsXG4gIFNlYXJjaFRlcm0sXG59IGZyb20gXCJAL3R5cGVzXCI7XG5pbXBvcnQgeyBUcmVuZEd1ZXNzZXJTZXJ2aWNlIH0gZnJvbSBcIkAvbGliL2ZpcmViYXNlL3RyZW5kR3Vlc3NlclNlcnZpY2VcIjtcblxuaW50ZXJmYWNlIEdhbWVDb250ZXh0VHlwZSB7XG4gIGdhbWVJZDogc3RyaW5nIHwgbnVsbDtcbiAgZ2FtZURhdGE6IEdhbWVEYXRhIHwgbnVsbDtcbiAgbG9hZGluZzogYm9vbGVhbjtcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XG4gIGN1cnJlbnRQbGF5ZXI6IFRyZW5kR3Vlc3NlclBsYXllciB8IG51bGw7XG4gIGdhbWVTdGF0ZTogVHJlbmRHdWVzc2VyR2FtZVN0YXRlIHwgbnVsbDtcbiAgc2V0R2FtZUlkOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgc3RhcnRHYW1lOiAoY2F0ZWdvcnk6IFNlYXJjaENhdGVnb3J5LCBjdXN0b21UZXJtPzogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBtYWtlR3Vlc3M6IChpc0hpZ2hlcjogYm9vbGVhbikgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgZW5kR2FtZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcmVzZXRHYW1lOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBHYW1lQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8R2FtZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG5leHBvcnQgY29uc3QgR2FtZVByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoe1xuICBjaGlsZHJlbixcbn0pID0+IHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgdXNlclVpZCB9ID0gdXNlQXV0aCgpO1xuXG4gIC8vIFVzZSBsb2NhbFN0b3JhZ2UgdG8gcGVyc2lzdCBnYW1lSWQgYWNyb3NzIHBhZ2UgcmVmcmVzaGVzIGluIGRldmVsb3BtZW50XG4gIGNvbnN0IGdldEluaXRpYWxHYW1lSWQgPSAoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCJcbiAgICApIHtcbiAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudF9nYW1lX2lkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCBbZ2FtZUlkLCBfc2V0R2FtZUlkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KGdldEluaXRpYWxHYW1lSWQoKSk7XG4gIGNvbnN0IFtnYW1lRGF0YSwgc2V0R2FtZURhdGFdID0gdXNlU3RhdGU8R2FtZURhdGEgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtnYW1lU3RhdGUsIHNldEdhbWVTdGF0ZV0gPSB1c2VTdGF0ZTxUcmVuZEd1ZXNzZXJHYW1lU3RhdGUgfCBudWxsPihcbiAgICBudWxsXG4gICk7XG4gIGNvbnN0IFtjdXJyZW50UGxheWVyLCBzZXRDdXJyZW50UGxheWVyXSA9IHVzZVN0YXRlPFRyZW5kR3Vlc3NlclBsYXllciB8IG51bGw+KFxuICAgIG51bGxcbiAgKTtcblxuICAvLyBDdXN0b20gc2V0dGVyIGZvciBnYW1lSWQgdGhhdCBhbHNvIHVwZGF0ZXMgc2Vzc2lvblN0b3JhZ2VcbiAgY29uc3Qgc2V0R2FtZUlkID0gKGlkOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJTZXR0aW5nIGdhbWUgSUQgdG86XCIsIGlkKTtcbiAgICBfc2V0R2FtZUlkKGlkKTtcblxuICAgIC8vIEFsc28gdXBkYXRlIHNlc3Npb25TdG9yYWdlXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCJcbiAgICApIHtcbiAgICAgIGlmIChpZCkge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudF9nYW1lX2lkXCIsIGlkKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGVkIGN1cnJlbnRfZ2FtZV9pZCBpbiBzZXNzaW9uIHN0b3JhZ2U6XCIsIGlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50X2dhbWVfaWRcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVtb3ZlZCBjdXJyZW50X2dhbWVfaWQgZnJvbSBzZXNzaW9uIHN0b3JhZ2VcIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIENoZWNrIGZvciBhIHN0b3JlZCBnYW1lIElEIG9uIGluaXRpYWwgbG9hZCAoZm9yIG1vY2sgbW9kZSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiYgIWdhbWVJZCkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVkR2FtZUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRfZ2FtZV9pZFwiKTtcbiAgICAgICAgaWYgKHN0b3JlZEdhbWVJZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgc3RvcmVkIGdhbWUgSUQgaW4gc2Vzc2lvbiBzdG9yYWdlOlwiLCBzdG9yZWRHYW1lSWQpO1xuICAgICAgICAgIHNldEdhbWVJZChzdG9yZWRHYW1lSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIGdhbWUgZGF0YVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdXNlclVpZCkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgZ2FtZSBJRCBpcyBub3Qgc2V0LCBidXQgd2UncmUgaW4gbW9jayBtb2RlLCB0cnkgdG8gZ2V0IGl0IGZyb20gc2Vzc2lvbiBzdG9yYWdlXG4gICAgaWYgKCFnYW1lSWQgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZEdhbWVJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50X2dhbWVfaWRcIik7XG4gICAgICAgIGlmIChzdG9yZWRHYW1lSWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIFwiVXNpbmcgc3RvcmVkIGdhbWUgSUQgZnJvbSBzZXNzaW9uIHN0b3JhZ2U6XCIsXG4gICAgICAgICAgICBzdG9yZWRHYW1lSWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldEdhbWVJZChzdG9yZWRHYW1lSWQpO1xuICAgICAgICAgIHJldHVybjsgLy8gVGhpcyB3aWxsIHRyaWdnZXIgdGhpcyB1c2VFZmZlY3QgYWdhaW4gd2l0aCB0aGUgZ2FtZUlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghZ2FtZUlkKSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBgU2V0dGluZyB1cCBnYW1lIGRhdGEgd2F0Y2hlciBmb3IgZ2FtZSBJRDogJHtnYW1lSWR9LCB1c2VyOiAke3VzZXJVaWR9YFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiB1c2luZyBtb2NrIGRhdGFcbiAgICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgbW9jayBkYXRhIGluIEdhbWVDb250ZXh0IGZvciBnYW1lOlwiLCBnYW1lSWQpO1xuXG4gICAgICAvLyBDcmVhdGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yIGdhbWUgZGF0YSBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAgY29uc3QgY2hlY2tNb2NrR2FtZURhdGEgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgY29uc3Qgc3RvcmVkR2FtZURhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWApO1xuICAgICAgICAgIGlmIChzdG9yZWRHYW1lRGF0YSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2Uoc3RvcmVkR2FtZURhdGEpIGFzIEdhbWVEYXRhO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICBgRm91bmQgbW9jayBnYW1lIGRhdGEgZm9yICR7Z2FtZUlkfTpgLFxuICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzLFxuICAgICAgICAgICAgICAgIGRhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXVxuICAgICAgICAgICAgICAgICAgPyBcImhhcyBnYW1lIHN0YXRlXCJcbiAgICAgICAgICAgICAgICAgIDogXCJubyBnYW1lIHN0YXRlXCJcbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAvLyBTZXQgZ2FtZSBkYXRhXG4gICAgICAgICAgICAgIHNldEdhbWVEYXRhKGRhdGEpO1xuXG4gICAgICAgICAgICAgIC8vIEV4dHJhY3QgZ2FtZSBzdGF0ZSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgaWYgKGRhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IGRhdGFbXG4gICAgICAgICAgICAgICAgICBcIl9fdHJlbmRndWVzc2VyLnN0YXRlXCJcbiAgICAgICAgICAgICAgICBdIGFzIFRyZW5kR3Vlc3NlckdhbWVTdGF0ZTtcbiAgICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUoZ2FtZVN0YXRlKTtcblxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGdhbWUgaGFzIHN0YXJ0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICBgR2FtZSAke2dhbWVJZH0gaXMgYWN0aXZlIHdpdGggY2F0ZWdvcnk6YCxcbiAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmNhdGVnb3J5XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIFVzZSB0aGUgdXNlclVpZCBvciBhIG1vY2sgSURcbiAgICAgICAgICAgICAgY29uc3QgbW9ja1VzZXJVaWQgPVxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJtb2NrX3VzZXJfdWlkXCIpIHx8XG4gICAgICAgICAgICAgICAgdXNlclVpZCB8fFxuICAgICAgICAgICAgICAgIFwibW9ja191c2VyXCI7XG5cbiAgICAgICAgICAgICAgLy8gRXh0cmFjdCBjdXJyZW50IHBsYXllciBkYXRhXG4gICAgICAgICAgICAgIGlmIChkYXRhW21vY2tVc2VyVWlkXSkge1xuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRQbGF5ZXIoZGF0YVttb2NrVXNlclVpZF0gYXMgVHJlbmRHdWVzc2VyUGxheWVyKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgIGBGb3VuZCBwbGF5ZXIgZGF0YSBmb3IgJHttb2NrVXNlclVpZH0sIHNjb3JlOmAsXG4gICAgICAgICAgICAgICAgICBkYXRhW21vY2tVc2VyVWlkXS5zY29yZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVtcIm1vY2tfdXNlclwiXSkge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2tfdXNlclxuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRQbGF5ZXIoZGF0YVtcIm1vY2tfdXNlclwiXSBhcyBUcmVuZEd1ZXNzZXJQbGF5ZXIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgZmFsbGJhY2sgbW9ja191c2VyIGRhdGFcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBtb2NrIGdhbWUgZGF0YTpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgc2V0RXJyb3IoXCJFcnJvciBsb2FkaW5nIGdhbWUgZGF0YVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBtb2NrIGdhbWUgZGF0YSBmb3VuZCBmb3I6XCIsIGdhbWVJZCk7XG4gICAgICAgICAgICBzZXRFcnJvcihcIkdhbWUgZGF0YSBub3QgZm91bmRcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIENoZWNrIGltbWVkaWF0ZWx5XG4gICAgICBjaGVja01vY2tHYW1lRGF0YSgpO1xuXG4gICAgICAvLyBTZXQgdXAgaW50ZXJ2YWwgdG8gY2hlY2sgZm9yIGNoYW5nZXMgKHNpbXVsYXRpbmcgRmlyZXN0b3JlJ3Mgb25TbmFwc2hvdClcbiAgICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChjaGVja01vY2tHYW1lRGF0YSwgNTAwKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYENsZWFuaW5nIHVwIGdhbWUgZGF0YSB3YXRjaGVyIGZvciBnYW1lIElEOiAke2dhbWVJZH1gKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlZ3VsYXIgRmlyZXN0b3JlIGltcGxlbWVudGF0aW9uXG4gICAgICBjb25zdCBnYW1lUmVmID0gZG9jKGRiLCBcImdhbWVzXCIsIGdhbWVJZC50b1VwcGVyQ2FzZSgpKTtcblxuICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvblNuYXBzaG90KFxuICAgICAgICBnYW1lUmVmLFxuICAgICAgICAoZG9jU25hcHNob3QpID0+IHtcbiAgICAgICAgICBpZiAoZG9jU25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2NTbmFwc2hvdC5kYXRhKCkgYXMgR2FtZURhdGE7XG4gICAgICAgICAgICBzZXRHYW1lRGF0YShkYXRhKTtcblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBnYW1lIHN0YXRlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgaWYgKGRhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXSkge1xuICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUoXG4gICAgICAgICAgICAgICAgZGF0YVtcIl9fdHJlbmRndWVzc2VyLnN0YXRlXCJdIGFzIFRyZW5kR3Vlc3NlckdhbWVTdGF0ZVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFeHRyYWN0IGN1cnJlbnQgcGxheWVyIGRhdGFcbiAgICAgICAgICAgIGlmIChkYXRhW3VzZXJVaWRdKSB7XG4gICAgICAgICAgICAgIHNldEN1cnJlbnRQbGF5ZXIoZGF0YVt1c2VyVWlkXSBhcyBUcmVuZEd1ZXNzZXJQbGF5ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0RXJyb3IoXCJHYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3YXRjaGluZyBnYW1lIGRhdGE6XCIsIGVycik7XG4gICAgICAgICAgc2V0RXJyb3IoXCJFcnJvciB3YXRjaGluZyBnYW1lIGRhdGFcIik7XG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfSwgW2dhbWVJZCwgdXNlclVpZF0pO1xuXG4gIC8vIFN0YXJ0IGEgbmV3IGdhbWVcbiAgY29uc3Qgc3RhcnRHYW1lID0gYXN5bmMgKGNhdGVnb3J5OiBTZWFyY2hDYXRlZ29yeSwgY3VzdG9tVGVybT86IHN0cmluZykgPT4ge1xuICAgIGlmICghZ2FtZUlkIHx8ICF1c2VyVWlkKSB7XG4gICAgICBzZXRFcnJvcihcIk5vIGdhbWUgSUQgb3IgdXNlciBJRFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgU3RhcnRpbmcgZ2FtZSB3aXRoIElEOiAke2dhbWVJZH0sIGNhdGVnb3J5OiAke2NhdGVnb3J5fSwgY3VzdG9tVGVybTogJHtcbiAgICAgICAgICBjdXN0b21UZXJtIHx8IFwibm9uZVwiXG4gICAgICAgIH1gXG4gICAgICApO1xuXG4gICAgICAvLyBXaGVuIHVzaW5nIG1vY2sgZGF0YSwgbWFrZSBzdXJlIHRoZSBjdXJyZW50X2dhbWVfaWQgaXMgc2V0IGNvcnJlY3RseSBiZWZvcmUgc3RhcnRpbmcgdGhlIGdhbWVcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgKSB7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50X2dhbWVfaWRcIiwgZ2FtZUlkKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJFbnN1cmVkIGN1cnJlbnRfZ2FtZV9pZCBpcyBzZXQgdG86XCIsIGdhbWVJZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0YXJ0IHRoZSBnYW1lIC0gdGhpcyBzaG91bGQgcmV0dXJuIHRoZSBpbml0aWFsIGdhbWUgc3RhdGVcbiAgICAgIGNvbnN0IGluaXRpYWxHYW1lU3RhdGUgPSBhd2FpdCBUcmVuZEd1ZXNzZXJTZXJ2aWNlLnN0YXJ0R2FtZShcbiAgICAgICAgZ2FtZUlkLFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgY3VzdG9tVGVybVxuICAgICAgKTtcblxuICAgICAgaWYgKGluaXRpYWxHYW1lU3RhdGUpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBnYW1lIHN0YXRlIGRpcmVjdGx5IGZyb20gdGhlIHJldHVybiB2YWx1ZSBmb3IgaW1tZWRpYXRlIHVzZVxuICAgICAgICBzZXRHYW1lU3RhdGUoaW5pdGlhbEdhbWVTdGF0ZSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHBsYXllciBkYXRhIGlmIG5lZWRlZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IG1vY2tVc2VyVWlkID1cbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJtb2NrX3VzZXJfdWlkXCIpIHx8IHVzZXJVaWQ7XG4gICAgICAgICAgY29uc3QgZ2FtZURhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWApO1xuXG4gICAgICAgICAgaWYgKGdhbWVEYXRhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShnYW1lRGF0YSk7XG4gICAgICAgICAgICAgIGlmIChwYXJzZWREYXRhW21vY2tVc2VyVWlkXSkge1xuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRQbGF5ZXIocGFyc2VkRGF0YVttb2NrVXNlclVpZF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHBsYXllciBkYXRhIGFmdGVyIGdhbWUgc3RhcnQ6XCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIk5vIGdhbWUgc3RhdGUgcmV0dXJuZWQgZnJvbSBUcmVuZEd1ZXNzZXJTZXJ2aWNlLnN0YXJ0R2FtZVwiXG4gICAgICAgICk7XG4gICAgICAgIHNldEVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZ2FtZSBzdGF0ZVwiKTtcbiAgICAgIH1cblxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzdGFydGluZyBnYW1lOlwiLCBlcnJvcik7XG4gICAgICBzZXRFcnJvcihcbiAgICAgICAgXCJGYWlsZWQgdG8gc3RhcnQgZ2FtZTogXCIgK1xuICAgICAgICAgIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiKVxuICAgICAgKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBNYWtlIGEgZ3Vlc3MgKGhpZ2hlciBvciBsb3dlcilcbiAgY29uc3QgbWFrZUd1ZXNzID0gYXN5bmMgKGlzSGlnaGVyOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgaWYgKCF1c2VyVWlkKSB7XG4gICAgICBzZXRFcnJvcihcIk5vIHVzZXIgSURcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGdhbWUgSUQgZnJvbSBzdGF0ZSBvciBzZXNzaW9uIHN0b3JhZ2VcbiAgICBsZXQgY3VycmVudEdhbWVJZCA9IGdhbWVJZDtcbiAgICBpZiAoXG4gICAgICAhY3VycmVudEdhbWVJZCAmJlxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIGN1cnJlbnRHYW1lSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudF9nYW1lX2lkXCIpO1xuICAgICAgaWYgKGN1cnJlbnRHYW1lSWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJVc2luZyBnYW1lIElEIGZyb20gc2Vzc2lvbiBzdG9yYWdlIGZvciBndWVzczpcIixcbiAgICAgICAgICBjdXJyZW50R2FtZUlkXG4gICAgICAgICk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgc3RhdGUgdG8gbWF0Y2hcbiAgICAgICAgc2V0R2FtZUlkKGN1cnJlbnRHYW1lSWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY3VycmVudEdhbWVJZCkge1xuICAgICAgc2V0RXJyb3IoXCJObyBnYW1lIElEIGF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gSW4gbW9jayBtb2RlLCBlbnN1cmUgdGhlIGN1cnJlbnQgZ2FtZSBzdGF0ZSBpcyBsb2FkZWQgcHJvcGVybHlcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAhZ2FtZVN0YXRlXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJMb2FkaW5nIGdhbWUgc3RhdGUgZnJvbSBzZXNzaW9uIHN0b3JhZ2UgYmVmb3JlIGd1ZXNzXCIpO1xuICAgICAgICBjb25zdCBzdG9yZWREYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgZ2FtZV8ke2N1cnJlbnRHYW1lSWR9YCk7XG4gICAgICAgIGlmIChzdG9yZWREYXRhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKHN0b3JlZERhdGEpO1xuICAgICAgICAgICAgaWYgKHBhcnNlZERhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXSkge1xuICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUocGFyc2VkRGF0YVtcIl9fdHJlbmRndWVzc2VyLnN0YXRlXCJdKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkZWQgZ2FtZSBzdGF0ZSBmcm9tIHNlc3Npb24gc3RvcmFnZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBzdG9yZWQgZ2FtZSBkYXRhOlwiLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBNYWtpbmcgZ3Vlc3MgKCR7aXNIaWdoZXIgPyBcIkhJR0hFUlwiIDogXCJMT1dFUlwifSkgZm9yIGdhbWU6YCxcbiAgICAgICAgY3VycmVudEdhbWVJZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFRyZW5kR3Vlc3NlclNlcnZpY2UubWFrZUd1ZXNzKFxuICAgICAgICBjdXJyZW50R2FtZUlkLFxuICAgICAgICB1c2VyVWlkLFxuICAgICAgICBpc0hpZ2hlclxuICAgICAgKTtcblxuICAgICAgLy8gSWYgaW4gbW9jayBtb2RlLCBpbW1lZGlhdGVseSB1cGRhdGUgdGhlIGdhbWUgc3RhdGUgdG8gcmVmbGVjdCB0aGUgZ3Vlc3MgcmVzdWx0XG4gICAgICBpZiAoXG4gICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRV9NT0NLX0RBVEEgPT09IFwidHJ1ZVwiICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICkge1xuICAgICAgICBjb25zdCB1cGRhdGVkR2FtZURhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBnYW1lXyR7Y3VycmVudEdhbWVJZH1gKTtcbiAgICAgICAgaWYgKHVwZGF0ZWRHYW1lRGF0YSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZSh1cGRhdGVkR2FtZURhdGEpO1xuICAgICAgICAgICAgaWYgKHBhcnNlZERhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXSkge1xuICAgICAgICAgICAgICAvLyBVcGRhdGUgZ2FtZSBzdGF0ZVxuICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUocGFyc2VkRGF0YVtcIl9fdHJlbmRndWVzc2VyLnN0YXRlXCJdKTtcblxuICAgICAgICAgICAgICAvLyBVcGRhdGUgcGxheWVyIGRhdGFcbiAgICAgICAgICAgICAgY29uc3QgbW9ja1VzZXJVaWQgPVxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJtb2NrX3VzZXJfdWlkXCIpIHx8IHVzZXJVaWQ7XG4gICAgICAgICAgICAgIGlmIChwYXJzZWREYXRhW21vY2tVc2VyVWlkXSkge1xuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRQbGF5ZXIocGFyc2VkRGF0YVttb2NrVXNlclVpZF0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGdhbWUgZGF0YVxuICAgICAgICAgICAgICBzZXRHYW1lRGF0YShwYXJzZWREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgc3RhdGUgYWZ0ZXIgZ3Vlc3M6XCIsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbWFraW5nIGd1ZXNzOlwiLCBlcnJvcik7XG4gICAgICBzZXRFcnJvcihcbiAgICAgICAgXCJGYWlsZWQgdG8gcHJvY2VzcyBndWVzczogXCIgK1xuICAgICAgICAgIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiKVxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRW5kIHRoZSBnYW1lXG4gIGNvbnN0IGVuZEdhbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VyVWlkIHx8ICFjdXJyZW50UGxheWVyKSB7XG4gICAgICBzZXRFcnJvcihcIk5vIHVzZXIgSUQgb3IgcGxheWVyIGRhdGFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGdhbWUgSUQgZnJvbSBzdGF0ZSBvciBzZXNzaW9uIHN0b3JhZ2VcbiAgICBsZXQgY3VycmVudEdhbWVJZCA9IGdhbWVJZDtcbiAgICBpZiAoXG4gICAgICAhY3VycmVudEdhbWVJZCAmJlxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIGN1cnJlbnRHYW1lSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudF9nYW1lX2lkXCIpO1xuICAgICAgaWYgKGN1cnJlbnRHYW1lSWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgXCJVc2luZyBnYW1lIElEIGZyb20gc2Vzc2lvbiBzdG9yYWdlIGZvciBlbmRpbmcgZ2FtZTpcIixcbiAgICAgICAgICBjdXJyZW50R2FtZUlkXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjdXJyZW50R2FtZUlkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiTm8gZ2FtZSBJRCBhdmFpbGFibGUgZm9yIGVuZGluZyBnYW1lLCB3aWxsIHN0aWxsIHByb2NlZWQgd2l0aCByZXNldFwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJFbmRpbmcgZ2FtZTpcIixcbiAgICAgICAgY3VycmVudEdhbWVJZCxcbiAgICAgICAgXCJ3aXRoIHNjb3JlOlwiLFxuICAgICAgICBjdXJyZW50UGxheWVyLnNjb3JlIHx8IDBcbiAgICAgICk7XG4gICAgICBhd2FpdCBUcmVuZEd1ZXNzZXJTZXJ2aWNlLmVuZEdhbWUoXG4gICAgICAgIGN1cnJlbnRHYW1lSWQsXG4gICAgICAgIHVzZXJVaWQsXG4gICAgICAgIGN1cnJlbnRQbGF5ZXIuc2NvcmUgfHwgMFxuICAgICAgKTtcblxuICAgICAgLy8gSW4gbW9jayBtb2RlLCB1cGRhdGUgdGhlIGdhbWUgc3RhdGUgdG8gcmVmbGVjdCB0aGUgZ2FtZSBlbmRpbmdcbiAgICAgIGlmIChcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGdhbWVEYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgZ2FtZV8ke2N1cnJlbnRHYW1lSWR9YCk7XG4gICAgICAgIGlmIChnYW1lRGF0YSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShnYW1lRGF0YSk7XG4gICAgICAgICAgICBpZiAocGFyc2VkRGF0YVtcIl9fdHJlbmRndWVzc2VyLnN0YXRlXCJdKSB7XG4gICAgICAgICAgICAgIHBhcnNlZERhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXS5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHBhcnNlZERhdGEuc3RhdHVzID0gXCJmaW5pc2hlZFwiO1xuICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgICAgIGBnYW1lXyR7Y3VycmVudEdhbWVJZH1gLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHBhcnNlZERhdGEpXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGdhbWUgc3RhdGVcbiAgICAgICAgICAgICAgc2V0R2FtZVN0YXRlKHBhcnNlZERhdGFbXCJfX3RyZW5kZ3Vlc3Nlci5zdGF0ZVwiXSk7XG5cbiAgICAgICAgICAgICAgLy8gVXBkYXRlIGdhbWUgZGF0YVxuICAgICAgICAgICAgICBzZXRHYW1lRGF0YShwYXJzZWREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgc3RhdGUgYWZ0ZXIgZW5kaW5nIGdhbWU6XCIsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW5kaW5nIGdhbWU6XCIsIGVycm9yKTtcbiAgICAgIHNldEVycm9yKFwiRmFpbGVkIHRvIGVuZCBnYW1lXCIpO1xuICAgICAgLy8gU3RpbGwgcHJvY2VlZCB3aXRoIHJlc2V0dGluZyBsb2NhbCBzdGF0ZSBldmVuIGlmIHRoZXJlIHdhcyBhbiBlcnJvclxuICAgIH1cbiAgfTtcblxuICAvLyBSZXNldCBnYW1lIHN0YXRlIGZvciBhIG5ldyBnYW1lXG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlJlc2V0dGluZyBnYW1lIHN0YXRlXCIpO1xuXG4gICAgLy8gU3RvcmUgZ2FtZSBJRCBiZWZvcmUgY2xlYXJpbmcgaXRcbiAgICBjb25zdCBjdXJyZW50R2FtZUlkID0gZ2FtZUlkO1xuXG4gICAgLy8gQ2xlYXIgc3RhdGVcbiAgICBzZXRHYW1lSWQobnVsbCk7XG4gICAgc2V0R2FtZURhdGEobnVsbCk7XG4gICAgc2V0R2FtZVN0YXRlKG51bGwpO1xuICAgIHNldEN1cnJlbnRQbGF5ZXIobnVsbCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAvLyBDbGVhciBhbnkgc3RvcmVkIGdhbWUgZGF0YSBmb3IgdGhpcyBnYW1lIGlmIGluIG1vY2sgbW9kZVxuICAgIGlmIChcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRV9NT0NLX0RBVEEgPT09IFwidHJ1ZVwiICYmXG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgKSB7XG4gICAgICAvLyBDbGVhciB0aGUgY3VycmVudF9nYW1lX2lkIGZyb20gc2Vzc2lvbiBzdG9yYWdlIHRvIGF2b2lkIHBlcnNpc3RlbmNlIGlzc3Vlc1xuICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRfZ2FtZV9pZFwiKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2xlYXJlZCBjdXJyZW50IGdhbWUgSUQgZnJvbSBzZXNzaW9uIHN0b3JhZ2VcIik7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBnYW1lIGRhdGEgaWYgd2UgaGFkIGEgZ2FtZUlkXG4gICAgICBpZiAoY3VycmVudEdhbWVJZCkge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGBnYW1lXyR7Y3VycmVudEdhbWVJZH1gKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkIHN0b3JlZCBnYW1lIGRhdGEgZm9yOlwiLCBjdXJyZW50R2FtZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdmFsdWU6IEdhbWVDb250ZXh0VHlwZSA9IHtcbiAgICBnYW1lSWQsXG4gICAgZ2FtZURhdGEsXG4gICAgbG9hZGluZyxcbiAgICBlcnJvcixcbiAgICBjdXJyZW50UGxheWVyLFxuICAgIGdhbWVTdGF0ZSxcbiAgICBzZXRHYW1lSWQsXG4gICAgc3RhcnRHYW1lLFxuICAgIG1ha2VHdWVzcyxcbiAgICBlbmRHYW1lLFxuICAgIHJlc2V0R2FtZSxcbiAgfTtcblxuICByZXR1cm4gPEdhbWVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+e2NoaWxkcmVufTwvR2FtZUNvbnRleHQuUHJvdmlkZXI+O1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUdhbWUgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEdhbWVDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlR2FtZSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgR2FtZVByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR2FtZUNvbnRleHQ7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUm91dGVyIiwiZG9jIiwib25TbmFwc2hvdCIsImRiIiwidXNlQXV0aCIsIlRyZW5kR3Vlc3NlclNlcnZpY2UiLCJHYW1lQ29udGV4dCIsInVuZGVmaW5lZCIsIkdhbWVQcm92aWRlciIsImNoaWxkcmVuIiwicm91dGVyIiwidXNlclVpZCIsImdldEluaXRpYWxHYW1lSWQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsImdhbWVJZCIsIl9zZXRHYW1lSWQiLCJnYW1lRGF0YSIsInNldEdhbWVEYXRhIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiZ2FtZVN0YXRlIiwic2V0R2FtZVN0YXRlIiwiY3VycmVudFBsYXllciIsInNldEN1cnJlbnRQbGF5ZXIiLCJzZXRHYW1lSWQiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsInN0b3JlZEdhbWVJZCIsImNoZWNrTW9ja0dhbWVEYXRhIiwic3RvcmVkR2FtZURhdGEiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzIiwic3RhcnRlZCIsImNhdGVnb3J5IiwibW9ja1VzZXJVaWQiLCJzY29yZSIsImVyciIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJnYW1lUmVmIiwidG9VcHBlckNhc2UiLCJ1bnN1YnNjcmliZSIsImRvY1NuYXBzaG90IiwiZXhpc3RzIiwic3RhcnRHYW1lIiwiY3VzdG9tVGVybSIsImluaXRpYWxHYW1lU3RhdGUiLCJwYXJzZWREYXRhIiwiZSIsIkVycm9yIiwibWVzc2FnZSIsIm1ha2VHdWVzcyIsImlzSGlnaGVyIiwiY3VycmVudEdhbWVJZCIsInN0b3JlZERhdGEiLCJyZXN1bHQiLCJ1cGRhdGVkR2FtZURhdGEiLCJlbmRHYW1lIiwid2FybiIsImZpbmlzaGVkIiwic3RyaW5naWZ5IiwicmVzZXRHYW1lIiwidmFsdWUiLCJQcm92aWRlciIsInVzZUdhbWUiLCJjb250ZXh0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/contexts/GameContext.tsx\n");

/***/ }),

/***/ "./src/lib/firebase/firebase.ts":
/*!**************************************!*\
  !*** ./src/lib/firebase/firebase.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analytics: () => (/* binding */ analytics),\n/* harmony export */   app: () => (/* binding */ app),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   initializeFirebase: () => (/* binding */ initializeFirebase),\n/* harmony export */   performance: () => (/* binding */ performance)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_analytics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/analytics */ \"firebase/analytics\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_analytics__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_analytics__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/lib/firebase.ts\n\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAbIQ8B30KkE3CiVZ-6nNGAwiAz2Q5url8\",\n    authDomain: \"trendguesser-332d4.firebaseapp.com\",\n    projectId: \"trendguesser-332d4\",\n    storageBucket: \"trendguesser-332d4.firebasestorage.app\",\n    messagingSenderId: \"748886157474\",\n    appId: \"1:748886157474:web:08ba697d25f6ec0b228ffb\",\n    measurementId: \"G-BEQ3HXTMS3\"\n};\n// Initialize Firebase based on consent\nlet app = null;\nlet auth = null;\nlet db = null;\nlet analytics = null;\nlet performance = null;\nlet isInitialized = false;\n// Lazy initialization function to be called after consent is given\nconst initializeFirebase = (firebaseConsent = false, analyticsConsent = false)=>{\n    // Return existing Firebase instance if already initialized\n    if (isInitialized && app) {\n        return {\n            app,\n            auth,\n            db,\n            analytics,\n            performance\n        };\n    }\n    // Initialize core Firebase\n    try {\n        if (!(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length) {\n            app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n        } else {\n            app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\n        }\n        // Get Auth and Firestore instances\n        if (app) {\n            auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\n            db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n            // Connect to emulators if in development mode\n            if (false) {} else if (true) {\n                console.log(\"Using mock data mode (Firebase emulators not enabled)\");\n            }\n        }\n        isInitialized = true;\n    } catch (error) {\n        console.error(\"Failed to initialize Firebase:\", error);\n    }\n    // Only initialize analytics if consent is given and we're in browser\n    if (analyticsConsent && \"undefined\" !== 'undefined' && 0) {}\n    return {\n        app,\n        auth,\n        db,\n        analytics,\n        performance\n    };\n};\n// Default export for backward compatibility\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2ZpcmViYXNlL2ZpcmViYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxzQkFBc0I7QUFDNkM7QUFDQTtBQUNvQjtBQUNiO0FBRzFFLE1BQU1RLGlCQUFpQjtJQUNyQkMsUUFBUTtJQUNSQyxZQUFZO0lBQ1pDLFdBQVc7SUFDWEMsZUFBZTtJQUNmQyxtQkFBbUI7SUFDbkJDLE9BQU87SUFDUEMsZUFBZTtBQUNqQjtBQUVBLHVDQUF1QztBQUN2QyxJQUFJQyxNQUEwQjtBQUM5QixJQUFJQyxPQUFvQjtBQUN4QixJQUFJQyxLQUF1QjtBQUMzQixJQUFJQyxZQUE4QjtBQUNsQyxJQUFJQyxjQUEwQztBQUM5QyxJQUFJQyxnQkFBZ0I7QUFFcEIsbUVBQW1FO0FBQzVELE1BQU1DLHFCQUFxQixDQUFDQyxrQkFBa0IsS0FBSyxFQUFFQyxtQkFBbUIsS0FBSztJQUNsRiwyREFBMkQ7SUFDM0QsSUFBSUgsaUJBQWlCTCxLQUFLO1FBQ3hCLE9BQU87WUFDTEE7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCLElBQUk7UUFDRixJQUFJLENBQUNuQixxREFBT0EsR0FBR3dCLE1BQU0sRUFBRTtZQUNyQlQsTUFBTWhCLDJEQUFhQSxDQUFDUTtRQUN0QixPQUFPO1lBQ0xRLE1BQU1mLHFEQUFPQSxFQUFFLENBQUMsRUFBRTtRQUNwQjtRQUVBLG1DQUFtQztRQUNuQyxJQUFJZSxLQUFLO1lBQ1BDLE9BQU9mLHNEQUFPQSxDQUFDYztZQUNmRSxLQUFLZCxnRUFBWUEsQ0FBQ1k7WUFFbEIsOENBQThDO1lBQzlDLElBQUksS0FFd0QsRUFBRSxFQXVCN0QsTUFBTSxJQUFJYSxJQUFnRCxFQUFFO2dCQUMzREksUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRjtRQUVBYixnQkFBZ0I7SUFDbEIsRUFBRSxPQUFPZ0IsT0FBTztRQUNkSixRQUFRSSxLQUFLLENBQUMsa0NBQWtDQTtJQUNsRDtJQUVBLHFFQUFxRTtJQUNyRSxJQUFJYixvQkFBb0IsZ0JBQWtCLGVBQWVSLENBQUdBLEVBQUUsRUFNN0Q7SUFFRCxPQUFPO1FBQ0xBO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7QUFDRixFQUFFO0FBRUYsNENBQTRDO0FBQ0siLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGV4L0RldmVsb3Blci90cmVuZGd1ZXNzZXIvc3JjL2xpYi9maXJlYmFzZS9maXJlYmFzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2ZpcmViYXNlLnRzXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwLCBnZXRBcHBzLCBGaXJlYmFzZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRBdXRoLCBBdXRoLCBjb25uZWN0QXV0aEVtdWxhdG9yIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUsIEZpcmVzdG9yZSwgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldEFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIEFuYWx5dGljcyB9IGZyb20gJ2ZpcmViYXNlL2FuYWx5dGljcyc7XG5pbXBvcnQgeyBnZXRQZXJmb3JtYW5jZSwgRmlyZWJhc2VQZXJmb3JtYW5jZSB9IGZyb20gJ2ZpcmViYXNlL3BlcmZvcm1hbmNlJztcblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogXCJBSXphU3lBYklROEIzMEtrRTNDaVZaLTZuTkdBd2lBejJRNXVybDhcIixcbiAgYXV0aERvbWFpbjogXCJ0cmVuZGd1ZXNzZXItMzMyZDQuZmlyZWJhc2VhcHAuY29tXCIsXG4gIHByb2plY3RJZDogXCJ0cmVuZGd1ZXNzZXItMzMyZDRcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJ0cmVuZGd1ZXNzZXItMzMyZDQuZmlyZWJhc2VzdG9yYWdlLmFwcFwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI3NDg4ODYxNTc0NzRcIixcbiAgYXBwSWQ6IFwiMTo3NDg4ODYxNTc0NzQ6d2ViOjA4YmE2OTdkMjVmNmVjMGIyMjhmZmJcIixcbiAgbWVhc3VyZW1lbnRJZDogXCJHLUJFUTNIWFRNUzNcIlxufTtcblxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZSBiYXNlZCBvbiBjb25zZW50XG5sZXQgYXBwOiBGaXJlYmFzZUFwcCB8IG51bGwgPSBudWxsO1xubGV0IGF1dGg6IEF1dGggfCBudWxsID0gbnVsbDtcbmxldCBkYjogRmlyZXN0b3JlIHwgbnVsbCA9IG51bGw7XG5sZXQgYW5hbHl0aWNzOiBBbmFseXRpY3MgfCBudWxsID0gbnVsbDtcbmxldCBwZXJmb3JtYW5jZTogRmlyZWJhc2VQZXJmb3JtYW5jZSB8IG51bGwgPSBudWxsO1xubGV0IGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuLy8gTGF6eSBpbml0aWFsaXphdGlvbiBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgY29uc2VudCBpcyBnaXZlblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVGaXJlYmFzZSA9IChmaXJlYmFzZUNvbnNlbnQgPSBmYWxzZSwgYW5hbHl0aWNzQ29uc2VudCA9IGZhbHNlKSA9PiB7XG4gIC8vIFJldHVybiBleGlzdGluZyBGaXJlYmFzZSBpbnN0YW5jZSBpZiBhbHJlYWR5IGluaXRpYWxpemVkXG4gIGlmIChpc0luaXRpYWxpemVkICYmIGFwcCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcHAsXG4gICAgICBhdXRoLFxuICAgICAgZGIsXG4gICAgICBhbmFseXRpY3MsXG4gICAgICBwZXJmb3JtYW5jZVxuICAgIH07XG4gIH1cbiAgXG4gIC8vIEluaXRpYWxpemUgY29yZSBGaXJlYmFzZVxuICB0cnkge1xuICAgIGlmICghZ2V0QXBwcygpLmxlbmd0aCkge1xuICAgICAgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcCA9IGdldEFwcHMoKVswXTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IEF1dGggYW5kIEZpcmVzdG9yZSBpbnN0YW5jZXNcbiAgICBpZiAoYXBwKSB7XG4gICAgICBhdXRoID0gZ2V0QXV0aChhcHApO1xuICAgICAgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcbiAgICAgIFxuICAgICAgLy8gQ29ubmVjdCB0byBlbXVsYXRvcnMgaWYgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIFxuICAgICAgICAgICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJzEyNy4wLjAuMScpICYmIFxuICAgICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRV9GSVJFQkFTRV9FTVVMQVRPUiA9PT0gJ3RydWUnKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgYSBnbG9iYWwgZmxhZyB0byBpbmRpY2F0ZSB3ZSdyZSB1c2luZyBlbXVsYXRvcnNcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgd2luZG93Ll9fVVNJTkdfRklSRUJBU0VfRU1VTEFUT1IgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChhdXRoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RpbmcgdG8gRmlyZWJhc2UgQXV0aCBlbXVsYXRvclwiKTtcbiAgICAgICAgICAgIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdGluZyB0byBGaXJlc3RvcmUgZW11bGF0b3JcIik7XG4gICAgICAgICAgICBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoZGIsICdsb2NhbGhvc3QnLCA4MDgwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coXCLinJMgU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBGaXJlYmFzZSBlbXVsYXRvcnNcIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY29ubmVjdCB0byBGaXJlYmFzZSBlbXVsYXRvcnM6XCIsIGVycik7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLimqDvuI8gRmFsbGJhY2sgdG8gbW9jayBkYXRhIG1vZGVcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgbW9jayBkYXRhIG1vZGUgKEZpcmViYXNlIGVtdWxhdG9ycyBub3QgZW5hYmxlZClcIik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBGaXJlYmFzZTpcIiwgZXJyb3IpO1xuICB9XG5cbiAgLy8gT25seSBpbml0aWFsaXplIGFuYWx5dGljcyBpZiBjb25zZW50IGlzIGdpdmVuIGFuZCB3ZSdyZSBpbiBicm93c2VyXG4gIGlmIChhbmFseXRpY3NDb25zZW50ICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGFwcCkge1xuICAgIGlzU3VwcG9ydGVkKCkudGhlbih5ZXMgPT4ge1xuICAgICAgaWYgKHllcykge1xuICAgICAgICBhbmFseXRpY3MgPSBnZXRBbmFseXRpY3MoYXBwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXBwLFxuICAgIGF1dGgsXG4gICAgZGIsXG4gICAgYW5hbHl0aWNzLFxuICAgIHBlcmZvcm1hbmNlXG4gIH07XG59O1xuXG4vLyBEZWZhdWx0IGV4cG9ydCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IHsgYXBwLCBhdXRoLCBkYiwgYW5hbHl0aWNzLCBwZXJmb3JtYW5jZSB9OyJdLCJuYW1lcyI6WyJpbml0aWFsaXplQXBwIiwiZ2V0QXBwcyIsImdldEF1dGgiLCJjb25uZWN0QXV0aEVtdWxhdG9yIiwiZ2V0RmlyZXN0b3JlIiwiY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yIiwiZ2V0QW5hbHl0aWNzIiwiaXNTdXBwb3J0ZWQiLCJmaXJlYmFzZUNvbmZpZyIsImFwaUtleSIsImF1dGhEb21haW4iLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJhcHBJZCIsIm1lYXN1cmVtZW50SWQiLCJhcHAiLCJhdXRoIiwiZGIiLCJhbmFseXRpY3MiLCJwZXJmb3JtYW5jZSIsImlzSW5pdGlhbGl6ZWQiLCJpbml0aWFsaXplRmlyZWJhc2UiLCJmaXJlYmFzZUNvbnNlbnQiLCJhbmFseXRpY3NDb25zZW50IiwibGVuZ3RoIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19VU0VfRklSRUJBU0VfRU1VTEFUT1IiLCJfX1VTSU5HX0ZJUkVCQVNFX0VNVUxBVE9SIiwiY29uc29sZSIsImxvZyIsImRpc2FibGVXYXJuaW5ncyIsImVyciIsImVycm9yIiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSIsInRoZW4iLCJ5ZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/firebase/firebase.ts\n");

/***/ }),

/***/ "./src/lib/firebase/mockData.ts":
/*!**************************************!*\
  !*** ./src/lib/firebase/mockData.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sampleLeaderboard: () => (/* binding */ sampleLeaderboard),\n/* harmony export */   sampleSearchTerms: () => (/* binding */ sampleSearchTerms)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__]);\nfirebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Function to generate a consistent image URL for a term\nconst getImageUrl = (term)=>{\n    return `https://source.unsplash.com/800x600/?${encodeURIComponent(term)}`;\n};\n// Sample search terms for development\nconst sampleSearchTerms = [\n    {\n        id: 'term1',\n        term: 'Artificial Intelligence',\n        volume: 850000,\n        category: 'technology',\n        imageUrl: getImageUrl('artificial intelligence technology'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term2',\n        term: 'Machine Learning',\n        volume: 650000,\n        category: 'technology',\n        imageUrl: getImageUrl('machine learning code'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term3',\n        term: 'Blockchain',\n        volume: 450000,\n        category: 'technology',\n        imageUrl: getImageUrl('blockchain digital'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term4',\n        term: 'PlayStation 5',\n        volume: 950000,\n        category: 'gaming',\n        imageUrl: getImageUrl('playstation 5 console'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term5',\n        term: 'Xbox Series X',\n        volume: 750000,\n        category: 'gaming',\n        imageUrl: getImageUrl('xbox series x console'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term6',\n        term: 'Elden Ring',\n        volume: 550000,\n        category: 'gaming',\n        imageUrl: getImageUrl('elden ring game'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term7',\n        term: 'Taylor Swift',\n        volume: 1000000,\n        category: 'entertainment',\n        imageUrl: getImageUrl('taylor swift concert'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term8',\n        term: 'Dune Part 2',\n        volume: 700000,\n        category: 'entertainment',\n        imageUrl: getImageUrl('dune movie desert'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term9',\n        term: 'Stranger Things',\n        volume: 500000,\n        category: 'entertainment',\n        imageUrl: getImageUrl('stranger things tv show'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term10',\n        term: 'Climate Change',\n        volume: 900000,\n        category: 'news',\n        imageUrl: getImageUrl('climate change earth'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term11',\n        term: 'COVID-19',\n        volume: 600000,\n        category: 'news',\n        imageUrl: getImageUrl('covid healthcare mask'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term12',\n        term: 'US Elections',\n        volume: 800000,\n        category: 'news',\n        imageUrl: getImageUrl('us election voting'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term13',\n        term: 'NBA Playoffs',\n        volume: 850000,\n        category: 'sports',\n        imageUrl: getImageUrl('nba basketball game'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term14',\n        term: 'World Cup',\n        volume: 950000,\n        category: 'sports',\n        imageUrl: getImageUrl('soccer world cup'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term15',\n        term: 'Formula 1',\n        volume: 750000,\n        category: 'sports',\n        imageUrl: getImageUrl('formula 1 racing'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    // Additional terms for better diversity in categories\n    {\n        id: 'term16',\n        term: 'Giraffes',\n        volume: 250000,\n        category: 'animals',\n        imageUrl: getImageUrl('giraffe wildlife'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term17',\n        term: 'Pandas',\n        volume: 420000,\n        category: 'animals',\n        imageUrl: getImageUrl('panda bear'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term18',\n        term: 'Dolphins',\n        volume: 380000,\n        category: 'animals',\n        imageUrl: getImageUrl('dolphin ocean'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term19',\n        term: 'Dogs',\n        volume: 890000,\n        category: 'animals',\n        imageUrl: getImageUrl('dog puppy cute'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    },\n    {\n        id: 'term20',\n        term: 'Cats',\n        volume: 920000,\n        category: 'animals',\n        imageUrl: getImageUrl('cat kitten'),\n        timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n    }\n];\n// Sample leaderboard data\nconst sampleLeaderboard = [\n    {\n        uid: 'player1',\n        name: 'ChampionGamer',\n        score: 24,\n        highScores: {\n            technology: 12,\n            gaming: 24,\n            sports: 8,\n            animals: 15,\n            everything: 18,\n            entertainment: 10\n        }\n    },\n    {\n        uid: 'player2',\n        name: 'TrendMaster',\n        score: 20,\n        highScores: {\n            entertainment: 20,\n            news: 15,\n            sports: 18,\n            technology: 14,\n            everything: 16,\n            animals: 12\n        }\n    },\n    {\n        uid: 'player3',\n        name: 'SearchWizard',\n        score: 18,\n        highScores: {\n            technology: 18,\n            gaming: 10,\n            entertainment: 12,\n            sports: 16,\n            everything: 14,\n            animals: 8\n        }\n    },\n    {\n        uid: 'player4',\n        name: 'DataNerd',\n        score: 16,\n        highScores: {\n            technology: 16,\n            news: 14,\n            sports: 8,\n            gaming: 12,\n            everything: 15,\n            questions: 18\n        }\n    },\n    {\n        uid: 'player5',\n        name: 'GuessingGuru',\n        score: 15,\n        highScores: {\n            gaming: 15,\n            entertainment: 9,\n            sports: 12,\n            animals: 18,\n            everything: 13,\n            technology: 10\n        }\n    }\n];\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUs7UUFDTEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFlBQVk7WUFDVkMsWUFBWTtZQUNaTSxNQUFNO1lBQ05KLFFBQVE7WUFDUkQsUUFBUTtZQUNSRyxZQUFZO1lBQ1pHLFdBQVc7UUFDYjtJQUNGO0lBQ0E7UUFDRVgsS0FBSztRQUNMQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsWUFBWTtZQUNWRSxRQUFRO1lBQ1JJLGVBQWU7WUFDZkgsUUFBUTtZQUNSQyxTQUFTO1lBQ1RDLFlBQVk7WUFDWkosWUFBWTtRQUNkO0lBQ0Y7Q0FDRCxDQUFDIiwic291cmNlcyI6WyIvVXNlcnMvYWxleC9EZXZlbG9wZXIvdHJlbmRndWVzc2VyL3NyYy9saWIvZmlyZWJhc2UvbW9ja0RhdGEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VhcmNoVGVybSwgVHJlbmRHdWVzc2VyUGxheWVyIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG4vLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhIGNvbnNpc3RlbnQgaW1hZ2UgVVJMIGZvciBhIHRlcm1cbmNvbnN0IGdldEltYWdlVXJsID0gKHRlcm06IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBgaHR0cHM6Ly9zb3VyY2UudW5zcGxhc2guY29tLzgwMHg2MDAvPyR7ZW5jb2RlVVJJQ29tcG9uZW50KHRlcm0pfWA7XG59O1xuXG4vLyBTYW1wbGUgc2VhcmNoIHRlcm1zIGZvciBkZXZlbG9wbWVudFxuZXhwb3J0IGNvbnN0IHNhbXBsZVNlYXJjaFRlcm1zOiBTZWFyY2hUZXJtW10gPSBbXG4gIHtcbiAgICBpZDogJ3Rlcm0xJyxcbiAgICB0ZXJtOiAnQXJ0aWZpY2lhbCBJbnRlbGxpZ2VuY2UnLFxuICAgIHZvbHVtZTogODUwMDAwLFxuICAgIGNhdGVnb3J5OiAndGVjaG5vbG9neScsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCdhcnRpZmljaWFsIGludGVsbGlnZW5jZSB0ZWNobm9sb2d5JyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTInLFxuICAgIHRlcm06ICdNYWNoaW5lIExlYXJuaW5nJyxcbiAgICB2b2x1bWU6IDY1MDAwMCxcbiAgICBjYXRlZ29yeTogJ3RlY2hub2xvZ3knLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnbWFjaGluZSBsZWFybmluZyBjb2RlJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTMnLFxuICAgIHRlcm06ICdCbG9ja2NoYWluJyxcbiAgICB2b2x1bWU6IDQ1MDAwMCxcbiAgICBjYXRlZ29yeTogJ3RlY2hub2xvZ3knLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnYmxvY2tjaGFpbiBkaWdpdGFsJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTQnLFxuICAgIHRlcm06ICdQbGF5U3RhdGlvbiA1JyxcbiAgICB2b2x1bWU6IDk1MDAwMCxcbiAgICBjYXRlZ29yeTogJ2dhbWluZycsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCdwbGF5c3RhdGlvbiA1IGNvbnNvbGUnKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtNScsXG4gICAgdGVybTogJ1hib3ggU2VyaWVzIFgnLFxuICAgIHZvbHVtZTogNzUwMDAwLFxuICAgIGNhdGVnb3J5OiAnZ2FtaW5nJyxcbiAgICBpbWFnZVVybDogZ2V0SW1hZ2VVcmwoJ3hib3ggc2VyaWVzIHggY29uc29sZScpLFxuICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rlcm02JyxcbiAgICB0ZXJtOiAnRWxkZW4gUmluZycsXG4gICAgdm9sdW1lOiA1NTAwMDAsXG4gICAgY2F0ZWdvcnk6ICdnYW1pbmcnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnZWxkZW4gcmluZyBnYW1lJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTcnLFxuICAgIHRlcm06ICdUYXlsb3IgU3dpZnQnLFxuICAgIHZvbHVtZTogMTAwMDAwMCxcbiAgICBjYXRlZ29yeTogJ2VudGVydGFpbm1lbnQnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgndGF5bG9yIHN3aWZ0IGNvbmNlcnQnKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtOCcsXG4gICAgdGVybTogJ0R1bmUgUGFydCAyJyxcbiAgICB2b2x1bWU6IDcwMDAwMCxcbiAgICBjYXRlZ29yeTogJ2VudGVydGFpbm1lbnQnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnZHVuZSBtb3ZpZSBkZXNlcnQnKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtOScsXG4gICAgdGVybTogJ1N0cmFuZ2VyIFRoaW5ncycsXG4gICAgdm9sdW1lOiA1MDAwMDAsXG4gICAgY2F0ZWdvcnk6ICdlbnRlcnRhaW5tZW50JyxcbiAgICBpbWFnZVVybDogZ2V0SW1hZ2VVcmwoJ3N0cmFuZ2VyIHRoaW5ncyB0diBzaG93JyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTEwJyxcbiAgICB0ZXJtOiAnQ2xpbWF0ZSBDaGFuZ2UnLFxuICAgIHZvbHVtZTogOTAwMDAwLFxuICAgIGNhdGVnb3J5OiAnbmV3cycsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCdjbGltYXRlIGNoYW5nZSBlYXJ0aCcpLFxuICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rlcm0xMScsXG4gICAgdGVybTogJ0NPVklELTE5JyxcbiAgICB2b2x1bWU6IDYwMDAwMCxcbiAgICBjYXRlZ29yeTogJ25ld3MnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnY292aWQgaGVhbHRoY2FyZSBtYXNrJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTEyJyxcbiAgICB0ZXJtOiAnVVMgRWxlY3Rpb25zJyxcbiAgICB2b2x1bWU6IDgwMDAwMCxcbiAgICBjYXRlZ29yeTogJ25ld3MnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgndXMgZWxlY3Rpb24gdm90aW5nJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTEzJyxcbiAgICB0ZXJtOiAnTkJBIFBsYXlvZmZzJyxcbiAgICB2b2x1bWU6IDg1MDAwMCxcbiAgICBjYXRlZ29yeTogJ3Nwb3J0cycsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCduYmEgYmFza2V0YmFsbCBnYW1lJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTE0JyxcbiAgICB0ZXJtOiAnV29ybGQgQ3VwJyxcbiAgICB2b2x1bWU6IDk1MDAwMCxcbiAgICBjYXRlZ29yeTogJ3Nwb3J0cycsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCdzb2NjZXIgd29ybGQgY3VwJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAge1xuICAgIGlkOiAndGVybTE1JyxcbiAgICB0ZXJtOiAnRm9ybXVsYSAxJyxcbiAgICB2b2x1bWU6IDc1MDAwMCxcbiAgICBjYXRlZ29yeTogJ3Nwb3J0cycsXG4gICAgaW1hZ2VVcmw6IGdldEltYWdlVXJsKCdmb3JtdWxhIDEgcmFjaW5nJyksXG4gICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgfSxcbiAgLy8gQWRkaXRpb25hbCB0ZXJtcyBmb3IgYmV0dGVyIGRpdmVyc2l0eSBpbiBjYXRlZ29yaWVzXG4gIHtcbiAgICBpZDogJ3Rlcm0xNicsXG4gICAgdGVybTogJ0dpcmFmZmVzJyxcbiAgICB2b2x1bWU6IDI1MDAwMCxcbiAgICBjYXRlZ29yeTogJ2FuaW1hbHMnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnZ2lyYWZmZSB3aWxkbGlmZScpLFxuICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rlcm0xNycsXG4gICAgdGVybTogJ1BhbmRhcycsXG4gICAgdm9sdW1lOiA0MjAwMDAsXG4gICAgY2F0ZWdvcnk6ICdhbmltYWxzJyxcbiAgICBpbWFnZVVybDogZ2V0SW1hZ2VVcmwoJ3BhbmRhIGJlYXInKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtMTgnLFxuICAgIHRlcm06ICdEb2xwaGlucycsXG4gICAgdm9sdW1lOiAzODAwMDAsXG4gICAgY2F0ZWdvcnk6ICdhbmltYWxzJyxcbiAgICBpbWFnZVVybDogZ2V0SW1hZ2VVcmwoJ2RvbHBoaW4gb2NlYW4nKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtMTknLFxuICAgIHRlcm06ICdEb2dzJyxcbiAgICB2b2x1bWU6IDg5MDAwMCxcbiAgICBjYXRlZ29yeTogJ2FuaW1hbHMnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnZG9nIHB1cHB5IGN1dGUnKSxcbiAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZXJtMjAnLFxuICAgIHRlcm06ICdDYXRzJyxcbiAgICB2b2x1bWU6IDkyMDAwMCxcbiAgICBjYXRlZ29yeTogJ2FuaW1hbHMnLFxuICAgIGltYWdlVXJsOiBnZXRJbWFnZVVybCgnY2F0IGtpdHRlbicpLFxuICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpXG4gIH1cbl07XG5cbi8vIFNhbXBsZSBsZWFkZXJib2FyZCBkYXRhXG5leHBvcnQgY29uc3Qgc2FtcGxlTGVhZGVyYm9hcmQ6IFRyZW5kR3Vlc3NlclBsYXllcltdID0gW1xuICB7XG4gICAgdWlkOiAncGxheWVyMScsXG4gICAgbmFtZTogJ0NoYW1waW9uR2FtZXInLFxuICAgIHNjb3JlOiAyNCxcbiAgICBoaWdoU2NvcmVzOiB7IFxuICAgICAgdGVjaG5vbG9neTogMTIsIFxuICAgICAgZ2FtaW5nOiAyNCwgXG4gICAgICBzcG9ydHM6IDgsXG4gICAgICBhbmltYWxzOiAxNSxcbiAgICAgIGV2ZXJ5dGhpbmc6IDE4LFxuICAgICAgZW50ZXJ0YWlubWVudDogMTBcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB1aWQ6ICdwbGF5ZXIyJyxcbiAgICBuYW1lOiAnVHJlbmRNYXN0ZXInLFxuICAgIHNjb3JlOiAyMCxcbiAgICBoaWdoU2NvcmVzOiB7IFxuICAgICAgZW50ZXJ0YWlubWVudDogMjAsIFxuICAgICAgbmV3czogMTUsIFxuICAgICAgc3BvcnRzOiAxOCxcbiAgICAgIHRlY2hub2xvZ3k6IDE0LFxuICAgICAgZXZlcnl0aGluZzogMTYsXG4gICAgICBhbmltYWxzOiAxMlxuICAgIH1cbiAgfSxcbiAge1xuICAgIHVpZDogJ3BsYXllcjMnLFxuICAgIG5hbWU6ICdTZWFyY2hXaXphcmQnLFxuICAgIHNjb3JlOiAxOCxcbiAgICBoaWdoU2NvcmVzOiB7IFxuICAgICAgdGVjaG5vbG9neTogMTgsIFxuICAgICAgZ2FtaW5nOiAxMCwgXG4gICAgICBlbnRlcnRhaW5tZW50OiAxMixcbiAgICAgIHNwb3J0czogMTYsXG4gICAgICBldmVyeXRoaW5nOiAxNCxcbiAgICAgIGFuaW1hbHM6IDhcbiAgICB9XG4gIH0sXG4gIHtcbiAgICB1aWQ6ICdwbGF5ZXI0JyxcbiAgICBuYW1lOiAnRGF0YU5lcmQnLFxuICAgIHNjb3JlOiAxNixcbiAgICBoaWdoU2NvcmVzOiB7IFxuICAgICAgdGVjaG5vbG9neTogMTYsIFxuICAgICAgbmV3czogMTQsIFxuICAgICAgc3BvcnRzOiA4LFxuICAgICAgZ2FtaW5nOiAxMixcbiAgICAgIGV2ZXJ5dGhpbmc6IDE1LFxuICAgICAgcXVlc3Rpb25zOiAxOFxuICAgIH1cbiAgfSxcbiAge1xuICAgIHVpZDogJ3BsYXllcjUnLFxuICAgIG5hbWU6ICdHdWVzc2luZ0d1cnUnLFxuICAgIHNjb3JlOiAxNSxcbiAgICBoaWdoU2NvcmVzOiB7IFxuICAgICAgZ2FtaW5nOiAxNSwgXG4gICAgICBlbnRlcnRhaW5tZW50OiA5LCBcbiAgICAgIHNwb3J0czogMTIsXG4gICAgICBhbmltYWxzOiAxOCxcbiAgICAgIGV2ZXJ5dGhpbmc6IDEzLFxuICAgICAgdGVjaG5vbG9neTogMTBcbiAgICB9XG4gIH1cbl07Il0sIm5hbWVzIjpbIlRpbWVzdGFtcCIsImdldEltYWdlVXJsIiwidGVybSIsImVuY29kZVVSSUNvbXBvbmVudCIsInNhbXBsZVNlYXJjaFRlcm1zIiwiaWQiLCJ2b2x1bWUiLCJjYXRlZ29yeSIsImltYWdlVXJsIiwidGltZXN0YW1wIiwibm93Iiwic2FtcGxlTGVhZGVyYm9hcmQiLCJ1aWQiLCJuYW1lIiwic2NvcmUiLCJoaWdoU2NvcmVzIiwidGVjaG5vbG9neSIsImdhbWluZyIsInNwb3J0cyIsImFuaW1hbHMiLCJldmVyeXRoaW5nIiwiZW50ZXJ0YWlubWVudCIsIm5ld3MiLCJxdWVzdGlvbnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/lib/firebase/mockData.ts\n");

/***/ }),

/***/ "./src/lib/firebase/trendGuesserService.ts":
/*!*************************************************!*\
  !*** ./src/lib/firebase/trendGuesserService.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TrendGuesserService: () => (/* binding */ TrendGuesserService)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebase */ \"./src/lib/firebase/firebase.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var _mockData__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mockData */ \"./src/lib/firebase/mockData.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, uuid__WEBPACK_IMPORTED_MODULE_2__, _mockData__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, uuid__WEBPACK_IMPORTED_MODULE_2__, _mockData__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/lib/firebase/trendGuesserService.ts\n\n\n\n\n// Development mode flag\nconst USE_MOCK_DATA =  true || 0;\nclass TrendGuesserService {\n    // Start a new game with selected category\n    static async startGame(gameId, category, customTerm) {\n        try {\n            console.log(`TrendGuesserService.startGame: Starting game ${gameId} with category ${category}`);\n            // In mock mode, we don't need to check if the game exists\n            if (!USE_MOCK_DATA) {\n                const gameRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'games', gameId.toUpperCase());\n                const gameDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(gameRef);\n                if (!gameDoc.exists()) {\n                    throw new Error('Game does not exist');\n                }\n            } else {\n                console.log('Using mock data for game start');\n            }\n            // Get terms for the selected category\n            let terms = [];\n            if (category === 'custom' && customTerm) {\n                // For custom games, fetch the custom term and related terms\n                terms = await this.fetchCustomTermWithRelated(customTerm);\n            } else {\n                // For predefined categories, fetch terms from the database\n                terms = await this.fetchTermsByCategory(category);\n            }\n            if (terms.length < 2) {\n                console.error('Not enough terms available for category:', category);\n                throw new Error('Not enough terms available');\n            }\n            // Shuffle the terms\n            const shuffledTerms = this.shuffleTerms(terms);\n            // Initialize game state with first two terms\n            const gameState = {\n                currentRound: 1,\n                knownTerm: shuffledTerms[0],\n                hiddenTerm: shuffledTerms[1],\n                category,\n                started: true,\n                finished: false,\n                usedTerms: [\n                    shuffledTerms[0].id,\n                    shuffledTerms[1].id\n                ],\n                terms: shuffledTerms.slice(2),\n                customTerm: category === 'custom' ? customTerm : undefined\n            };\n            if (!USE_MOCK_DATA) {\n                // Update the game document with new game state\n                const gameRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'games', gameId.toUpperCase());\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                    status: 'active',\n                    '__trendguesser.state': gameState\n                });\n                console.log(`Updated Firestore with game state for game ${gameId}`);\n            } else {\n                // In mock mode, we just log what would have happened\n                console.log('Mock: Game started with category:', category);\n                // Store the game state in sessionStorage for mock mode\n                if (false) {}\n            }\n            // Return the created game state for immediate use\n            return gameState;\n        } catch (error) {\n            console.error('Error starting game:', error);\n            if (USE_MOCK_DATA) {\n                console.log('Falling back to basic mock game state due to error');\n                // Create and return a basic mock game state\n                const fallbackState = {\n                    currentRound: 1,\n                    knownTerm: _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms[0],\n                    hiddenTerm: _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms[1],\n                    category: category || 'everything',\n                    started: true,\n                    finished: false,\n                    usedTerms: [\n                        _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms[0].id,\n                        _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms[1].id\n                    ],\n                    terms: _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms.slice(2),\n                    customTerm: category === 'custom' ? customTerm : undefined\n                };\n                // Store the fallback state in session storage\n                if (false) {}\n                return fallbackState;\n            }\n            throw error;\n        }\n    }\n    // Make a guess (higher or lower)\n    static async makeGuess(gameId, playerUid, isHigher) {\n        try {\n            // Handle mock mode\n            if (USE_MOCK_DATA) {\n                console.log('Using mock data for guess:', {\n                    gameId,\n                    playerUid,\n                    isHigher\n                });\n                // Get game data from session storage\n                if (false) {}\n                return Math.random() > 0.5; // Fallback if no session storage\n            }\n            // Regular Firestore implementation\n            const gameRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'games', gameId.toUpperCase());\n            const gameDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(gameRef);\n            if (!gameDoc.exists()) {\n                throw new Error('Game does not exist');\n            }\n            const gameData = gameDoc.data();\n            const gameState = gameData['__trendguesser.state'];\n            const player = gameData[playerUid];\n            if (!gameState || !gameState.started || gameState.finished) {\n                throw new Error('Game is not active');\n            }\n            // Check if the guess is correct\n            const isCorrect = isHigher ? gameState.hiddenTerm.volume > gameState.knownTerm.volume : gameState.hiddenTerm.volume < gameState.knownTerm.volume;\n            if (isCorrect) {\n                // Correct guess - prepare next round\n                const nextRound = gameState.currentRound + 1;\n                const newPlayerScore = (player.score || 0) + 1;\n                // Update player score\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                    [`${playerUid}.score`]: newPlayerScore\n                });\n                // If we have more terms, set up next round\n                if (gameState.terms.length > 0) {\n                    const nextTerm = gameState.terms[0];\n                    const remainingTerms = gameState.terms.slice(1);\n                    const updatedState = {\n                        ...gameState,\n                        currentRound: nextRound,\n                        knownTerm: gameState.hiddenTerm,\n                        hiddenTerm: nextTerm,\n                        usedTerms: [\n                            ...gameState.usedTerms,\n                            nextTerm.id\n                        ],\n                        terms: remainingTerms\n                    };\n                    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                        '__trendguesser.state': updatedState\n                    });\n                } else {\n                    // No more terms - player wins by completing all terms\n                    const updatedState = {\n                        ...gameState,\n                        finished: true,\n                        winner: playerUid\n                    };\n                    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                        '__trendguesser.state': updatedState,\n                        status: 'finished'\n                    });\n                    // Update high score if needed\n                    await this.updateHighScore(playerUid, gameState.category, newPlayerScore);\n                }\n                return true;\n            } else {\n                // Incorrect guess - game over\n                const updatedState = {\n                    ...gameState,\n                    finished: true\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                    '__trendguesser.state': updatedState,\n                    status: 'finished'\n                });\n                // Update high score if needed\n                await this.updateHighScore(playerUid, gameState.category, player.score || 0);\n                return false;\n            }\n        } catch (error) {\n            console.error('Error making guess:', error);\n            throw error;\n        }\n    }\n    // End the game and update high scores\n    static async endGame(gameId, playerUid, finalScore) {\n        try {\n            // Handle mock mode\n            if (USE_MOCK_DATA && \"undefined\" !== 'undefined') {}\n            const gameRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'games', gameId.toUpperCase());\n            const gameDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(gameRef);\n            if (!gameDoc.exists()) {\n                throw new Error('Game does not exist');\n            }\n            const gameData = gameDoc.data();\n            const gameState = gameData['__trendguesser.state'];\n            if (!gameState) {\n                throw new Error('No game state found');\n            }\n            // Only update if game was actually started\n            if (gameState.started) {\n                // Mark game as finished\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(gameRef, {\n                    status: 'finished',\n                    '__trendguesser.state': {\n                        ...gameState,\n                        finished: true\n                    }\n                });\n                // Update high score if needed\n                await this.updateHighScore(playerUid, gameState.category, finalScore);\n            }\n        } catch (error) {\n            console.error('Error ending game:', error);\n            throw error;\n        }\n    }\n    // Create a new game session\n    static async createGame(createdBy, playerName) {\n        try {\n            // Generate a short 6-character game ID (uppercase)\n            const gameId = this.generateGameId();\n            if (USE_MOCK_DATA) {\n                console.log('Using mock data for game creation');\n                // Create an empty initial game state in sessionStorage for immediate access\n                if (false) {}\n                // Artificial delay to simulate network request\n                return new Promise((resolve)=>{\n                    setTimeout(()=>{\n                        resolve(gameId);\n                    }, 300);\n                });\n            }\n            const gameRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'games', gameId);\n            // Initialize player data\n            const playerData = {\n                uid: createdBy,\n                name: playerName || 'Player',\n                score: 0\n            };\n            // Initial game data\n            const gameData = {\n                id: gameId,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                createdBy,\n                gameType: 'trendguesser',\n                status: 'waiting',\n                [createdBy]: playerData\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(gameRef, gameData);\n            return gameId;\n        } catch (error) {\n            console.error('Error creating game:', error);\n            if (USE_MOCK_DATA) {\n                console.log('Falling back to mock data due to error');\n                return this.generateGameId();\n            }\n            throw error;\n        }\n    }\n    // Fetch leaderboard for a category\n    static async getLeaderboard(category) {\n        try {\n            if (USE_MOCK_DATA) {\n                console.log('Using mock data for leaderboard');\n                // Sort and filter the mock leaderboard based on the requested category\n                return _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleLeaderboard.filter((player)=>player.highScores && player.highScores[category]).sort((a, b)=>{\n                    const scoreA = a.highScores?.[category] || 0;\n                    const scoreB = b.highScores?.[category] || 0;\n                    return scoreB - scoreA;\n                }).slice(0, 10);\n            }\n            const leaderboardRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'leaderboard');\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(leaderboardRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('category', '==', category), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)('score', 'desc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(10));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const leaderboard = [];\n            querySnapshot.forEach((doc)=>{\n                const data = doc.data();\n                leaderboard.push({\n                    uid: data.uid,\n                    name: data.name,\n                    score: data.score,\n                    highScores: data.highScores\n                });\n            });\n            return leaderboard;\n        } catch (error) {\n            console.error('Error fetching leaderboard:', error);\n            if (USE_MOCK_DATA) {\n                console.log('Falling back to mock data due to error');\n                return _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleLeaderboard.slice(0, 10);\n            }\n            throw error;\n        }\n    }\n    // Helper methods\n    static async updateHighScore(playerUid, category, score) {\n        try {\n            // In mock mode, store high score in sessionStorage\n            if (USE_MOCK_DATA && \"undefined\" !== 'undefined') {}\n            const playerRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'players', playerUid);\n            const playerDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(playerRef);\n            if (playerDoc.exists()) {\n                const playerData = playerDoc.data();\n                const currentHighScore = playerData.highScores?.[category] || 0;\n                if (score > currentHighScore) {\n                    // Update player's high score for this category\n                    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(playerRef, {\n                        [`highScores.${category}`]: score\n                    });\n                    // Also update leaderboard if score is significant\n                    if (score > 5) {\n                        const leaderboardRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'leaderboard', `${category}_${playerUid}`);\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(leaderboardRef, {\n                            uid: playerUid,\n                            name: playerData.name || 'Unknown Player',\n                            score,\n                            category,\n                            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n                        }, {\n                            merge: true\n                        });\n                    }\n                }\n            }\n        } catch (error) {\n            console.error('Error updating high score:', error);\n        // Don't throw, just log - this is a non-critical operation\n        }\n    }\n    static async fetchTermsByCategory(category) {\n        try {\n            if (USE_MOCK_DATA) {\n                console.log('Using mock data for search terms');\n                if (category === 'everything') {\n                    // Return all sample terms\n                    return _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms;\n                } else if (category === 'latest') {\n                    // Return terms sorted by timestamp\n                    return [\n                        ..._mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms\n                    ].sort(()=>Math.random() - 0.5);\n                } else {\n                    // Filter by category\n                    const filteredTerms = _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms.filter((term)=>term.category === category);\n                    return filteredTerms.length > 0 ? filteredTerms : _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms;\n                }\n            }\n            const termsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'searchTerms');\n            let q;\n            if (category === 'everything') {\n                // For \"everything\" category, get a mix of all categories\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(termsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(50));\n            } else if (category === 'latest') {\n                // For \"latest\", get the most recently added terms\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(termsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)('timestamp', 'desc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(50));\n            } else {\n                // For specific categories\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(termsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('category', '==', category), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(50));\n            }\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const terms = [];\n            querySnapshot.forEach((doc)=>{\n                const data = doc.data();\n                terms.push({\n                    ...data,\n                    id: doc.id\n                });\n            });\n            return terms;\n        } catch (error) {\n            console.error('Error fetching terms:', error);\n            if (USE_MOCK_DATA) {\n                console.log('Falling back to mock data due to error');\n                return _mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms;\n            }\n            throw error;\n        }\n    }\n    static async fetchCustomTermWithRelated(customTerm) {\n        try {\n            // This would typically call a Firebase Function to get the custom term data\n            // For now, we'll simulate it with a placeholder\n            // First term will be the custom one\n            const customSearchTerm = {\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),\n                term: customTerm,\n                volume: Math.floor(Math.random() * 100) + 1,\n                category: 'custom',\n                imageUrl: `https://source.unsplash.com/featured/?${encodeURIComponent(customTerm)}`,\n                timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n            };\n            // For mock mode, just get some random terms from the sample data\n            if (USE_MOCK_DATA) {\n                const randomTerms = [\n                    ..._mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms\n                ].sort(()=>Math.random() - 0.5).slice(0, 10);\n                return [\n                    customSearchTerm,\n                    ...randomTerms\n                ];\n            }\n            // Then get some related terms from the database (random for now)\n            const termsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'searchTerms');\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(termsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(20));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const terms = [\n                customSearchTerm\n            ];\n            querySnapshot.forEach((doc)=>{\n                const data = doc.data();\n                terms.push({\n                    ...data,\n                    id: doc.id\n                });\n            });\n            return terms;\n        } catch (error) {\n            console.error('Error fetching custom term:', error);\n            // Fallback to mock data for custom term\n            if (USE_MOCK_DATA) {\n                console.log('Falling back to mock data for custom term');\n                const customSearchTerm = {\n                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),\n                    term: customTerm,\n                    volume: Math.floor(Math.random() * 100) + 1,\n                    category: 'custom',\n                    imageUrl: `https://source.unsplash.com/featured/?${encodeURIComponent(customTerm)}`,\n                    timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n                };\n                return [\n                    customSearchTerm,\n                    ..._mockData__WEBPACK_IMPORTED_MODULE_3__.sampleSearchTerms.slice(0, 10)\n                ];\n            }\n            throw error;\n        }\n    }\n    static shuffleTerms(terms) {\n        const shuffled = [\n            ...terms\n        ];\n        for(let i = shuffled.length - 1; i > 0; i--){\n            const j = Math.floor(Math.random() * (i + 1));\n            [shuffled[i], shuffled[j]] = [\n                shuffled[j],\n                shuffled[i]\n            ];\n        }\n        return shuffled;\n    }\n    static generateGameId() {\n        // Generate a 6-character alphanumeric code (uppercase)\n        const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // Removed confusable characters\n        let result = '';\n        for(let i = 0; i < 6; i++){\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2ZpcmViYXNlL3RyZW5kR3Vlc3NlclNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSwwQ0FBMEM7QUFnQmQ7QUFDSTtBQUNJO0FBRThCO0FBRWxFLHdCQUF3QjtBQUN4QixNQUFNaUIsZ0JBQWdCQyxLQUFnRCxJQUMvQ0EsQ0FBc0M7QUFFdEQsTUFBTUc7SUFDWCwwQ0FBMEM7SUFDMUMsYUFBYUMsVUFBVUMsTUFBYyxFQUFFQyxRQUF3QixFQUFFQyxVQUFtQixFQUF5QztRQUMzSCxJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZDQUE2QyxFQUFFSixPQUFPLGVBQWUsRUFBRUMsVUFBVTtZQUU5RiwwREFBMEQ7WUFDMUQsSUFBSSxDQUFDUCxlQUFlO2dCQUNsQixNQUFNVyxVQUFVNUIsdURBQUdBLENBQUNZLHlDQUFFQSxFQUFFLFNBQVNXLE9BQU9NLFdBQVc7Z0JBQ25ELE1BQU1DLFVBQVUsTUFBTTNCLDBEQUFNQSxDQUFDeUI7Z0JBRTdCLElBQUksQ0FBQ0UsUUFBUUMsTUFBTSxJQUFJO29CQUNyQixNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO1lBQ0YsT0FBTztnQkFDTE4sUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7WUFFQSxzQ0FBc0M7WUFDdEMsSUFBSU0sUUFBc0IsRUFBRTtZQUU1QixJQUFJVCxhQUFhLFlBQVlDLFlBQVk7Z0JBQ3ZDLDREQUE0RDtnQkFDNURRLFFBQVEsTUFBTSxJQUFJLENBQUNDLDBCQUEwQixDQUFDVDtZQUNoRCxPQUFPO2dCQUNMLDJEQUEyRDtnQkFDM0RRLFFBQVEsTUFBTSxJQUFJLENBQUNFLG9CQUFvQixDQUFDWDtZQUMxQztZQUVBLElBQUlTLE1BQU1HLE1BQU0sR0FBRyxHQUFHO2dCQUNwQlYsUUFBUVcsS0FBSyxDQUFDLDRDQUE0Q2I7Z0JBQzFELE1BQU0sSUFBSVEsTUFBTTtZQUNsQjtZQUVBLG9CQUFvQjtZQUNwQixNQUFNTSxnQkFBZ0IsSUFBSSxDQUFDQyxZQUFZLENBQUNOO1lB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QVEsQ0FBQ0MsRUFBRTtnQkFBRUQsUUFBUSxDQUFDcEUsRUFBRTthQUFDO1FBQ3pEO1FBQ0EsT0FBT29FO0lBQ1Q7SUFFQSxPQUFlcEMsaUJBQXlCO1FBQ3RDLHVEQUF1RDtRQUN2RCxNQUFNc0MsUUFBUSxvQ0FBb0MsZ0NBQWdDO1FBQ2xGLElBQUlDLFNBQVM7UUFDYixJQUFLLElBQUl2RSxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztZQUMxQnVFLFVBQVVELE1BQU1FLE1BQU0sQ0FBQ2hELEtBQUtzQyxLQUFLLENBQUN0QyxLQUFLQyxNQUFNLEtBQUs2QyxNQUFNdEcsTUFBTTtRQUNoRTtRQUNBLE9BQU91RztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGV4L0RldmVsb3Blci90cmVuZGd1ZXNzZXIvc3JjL2xpYi9maXJlYmFzZS90cmVuZEd1ZXNzZXJTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvZmlyZWJhc2UvdHJlbmRHdWVzc2VyU2VydmljZS50c1xuaW1wb3J0IHsgXG4gIGRvYywgXG4gIHNldERvYywgXG4gIHVwZGF0ZURvYywgXG4gIGdldERvYywgXG4gIGNvbGxlY3Rpb24sIFxuICBxdWVyeSwgXG4gIHdoZXJlLCBcbiAgZ2V0RG9jcywgXG4gIGFycmF5VW5pb24sIFxuICBUaW1lc3RhbXAsIFxuICBzZXJ2ZXJUaW1lc3RhbXAsXG4gIGluY3JlbWVudCxcbiAgbGltaXQsXG4gIG9yZGVyQnlcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9maXJlYmFzZSc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IFNlYXJjaENhdGVnb3J5LCBTZWFyY2hUZXJtLCBUcmVuZEd1ZXNzZXJHYW1lU3RhdGUsIFRyZW5kR3Vlc3NlclBsYXllciB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgc2FtcGxlU2VhcmNoVGVybXMsIHNhbXBsZUxlYWRlcmJvYXJkIH0gZnJvbSAnLi9tb2NrRGF0YSc7XG5cbi8vIERldmVsb3BtZW50IG1vZGUgZmxhZ1xuY29uc3QgVVNFX01PQ0tfREFUQSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRV9NT0NLX0RBVEEgPT09ICd0cnVlJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbmV4cG9ydCBjbGFzcyBUcmVuZEd1ZXNzZXJTZXJ2aWNlIHtcbiAgLy8gU3RhcnQgYSBuZXcgZ2FtZSB3aXRoIHNlbGVjdGVkIGNhdGVnb3J5XG4gIHN0YXRpYyBhc3luYyBzdGFydEdhbWUoZ2FtZUlkOiBzdHJpbmcsIGNhdGVnb3J5OiBTZWFyY2hDYXRlZ29yeSwgY3VzdG9tVGVybT86IHN0cmluZyk6IFByb21pc2U8VHJlbmRHdWVzc2VyR2FtZVN0YXRlIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgVHJlbmRHdWVzc2VyU2VydmljZS5zdGFydEdhbWU6IFN0YXJ0aW5nIGdhbWUgJHtnYW1lSWR9IHdpdGggY2F0ZWdvcnkgJHtjYXRlZ29yeX1gKTtcbiAgICAgIFxuICAgICAgLy8gSW4gbW9jayBtb2RlLCB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIGlmIHRoZSBnYW1lIGV4aXN0c1xuICAgICAgaWYgKCFVU0VfTU9DS19EQVRBKSB7XG4gICAgICAgIGNvbnN0IGdhbWVSZWYgPSBkb2MoZGIsICdnYW1lcycsIGdhbWVJZC50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgY29uc3QgZ2FtZURvYyA9IGF3YWl0IGdldERvYyhnYW1lUmVmKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZ2FtZURvYy5leGlzdHMoKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgbW9jayBkYXRhIGZvciBnYW1lIHN0YXJ0Jyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0ZXJtcyBmb3IgdGhlIHNlbGVjdGVkIGNhdGVnb3J5XG4gICAgICBsZXQgdGVybXM6IFNlYXJjaFRlcm1bXSA9IFtdO1xuICAgICAgXG4gICAgICBpZiAoY2F0ZWdvcnkgPT09ICdjdXN0b20nICYmIGN1c3RvbVRlcm0pIHtcbiAgICAgICAgLy8gRm9yIGN1c3RvbSBnYW1lcywgZmV0Y2ggdGhlIGN1c3RvbSB0ZXJtIGFuZCByZWxhdGVkIHRlcm1zXG4gICAgICAgIHRlcm1zID0gYXdhaXQgdGhpcy5mZXRjaEN1c3RvbVRlcm1XaXRoUmVsYXRlZChjdXN0b21UZXJtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBwcmVkZWZpbmVkIGNhdGVnb3JpZXMsIGZldGNoIHRlcm1zIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICAgIHRlcm1zID0gYXdhaXQgdGhpcy5mZXRjaFRlcm1zQnlDYXRlZ29yeShjYXRlZ29yeSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0ZXJtcy5sZW5ndGggPCAyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBlbm91Z2ggdGVybXMgYXZhaWxhYmxlIGZvciBjYXRlZ29yeTonLCBjYXRlZ29yeSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGVub3VnaCB0ZXJtcyBhdmFpbGFibGUnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2h1ZmZsZSB0aGUgdGVybXNcbiAgICAgIGNvbnN0IHNodWZmbGVkVGVybXMgPSB0aGlzLnNodWZmbGVUZXJtcyh0ZXJtcyk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgZ2FtZSBzdGF0ZSB3aXRoIGZpcnN0IHR3byB0ZXJtc1xuICAgICAgY29uc3QgZ2FtZVN0YXRlOiBUcmVuZEd1ZXNzZXJHYW1lU3RhdGUgPSB7XG4gICAgICAgIGN1cnJlbnRSb3VuZDogMSxcbiAgICAgICAga25vd25UZXJtOiBzaHVmZmxlZFRlcm1zWzBdLFxuICAgICAgICBoaWRkZW5UZXJtOiBzaHVmZmxlZFRlcm1zWzFdLFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgc3RhcnRlZDogdHJ1ZSxcbiAgICAgICAgZmluaXNoZWQ6IGZhbHNlLFxuICAgICAgICB1c2VkVGVybXM6IFtzaHVmZmxlZFRlcm1zWzBdLmlkLCBzaHVmZmxlZFRlcm1zWzFdLmlkXSxcbiAgICAgICAgdGVybXM6IHNodWZmbGVkVGVybXMuc2xpY2UoMiksIC8vIFN0b3JlIHJlbWFpbmluZyB0ZXJtc1xuICAgICAgICBjdXN0b21UZXJtOiBjYXRlZ29yeSA9PT0gJ2N1c3RvbScgPyBjdXN0b21UZXJtIDogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgICAgXG4gICAgICBpZiAoIVVTRV9NT0NLX0RBVEEpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBnYW1lIGRvY3VtZW50IHdpdGggbmV3IGdhbWUgc3RhdGVcbiAgICAgICAgY29uc3QgZ2FtZVJlZiA9IGRvYyhkYiwgJ2dhbWVzJywgZ2FtZUlkLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZ2FtZVJlZiwge1xuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgICAgJ19fdHJlbmRndWVzc2VyLnN0YXRlJzogZ2FtZVN0YXRlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFVwZGF0ZWQgRmlyZXN0b3JlIHdpdGggZ2FtZSBzdGF0ZSBmb3IgZ2FtZSAke2dhbWVJZH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEluIG1vY2sgbW9kZSwgd2UganVzdCBsb2cgd2hhdCB3b3VsZCBoYXZlIGhhcHBlbmVkXG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2NrOiBHYW1lIHN0YXJ0ZWQgd2l0aCBjYXRlZ29yeTonLCBjYXRlZ29yeSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGUgZ2FtZSBzdGF0ZSBpbiBzZXNzaW9uU3RvcmFnZSBmb3IgbW9jayBtb2RlXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIEdldCB0aGUgdXNlciBJRCBmcm9tIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICAgIGNvbnN0IG1vY2tVc2VyVWlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbW9ja191c2VyX3VpZCcpIHx8ICdtb2NrX3VzZXInO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBtb2NrIHVzZXIgSUQgZm9yIGdhbWUgZGF0YTonLCBtb2NrVXNlclVpZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRG91YmxlLWNoZWNrIHRoYXQgdGhpcyBnYW1lIElEIG1hdGNoZXMgdGhlIGN1cnJlbnRfZ2FtZV9pZFxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRHYW1lSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X2dhbWVfaWQnKTtcbiAgICAgICAgICBpZiAoY3VycmVudEdhbWVJZCAhPT0gZ2FtZUlkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IGN1cnJlbnRfZ2FtZV9pZCBtaXNtYXRjaCBpbiB0cmVuZEd1ZXNzZXJTZXJ2aWNlLiBDdXJyZW50OicsIGN1cnJlbnRHYW1lSWQsICdVc2luZzonLCBnYW1lSWQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF9nYW1lX2lkJywgZ2FtZUlkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGV4aXN0aW5nIGRhdGEgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdEYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgZ2FtZV8ke2dhbWVJZH1gKTtcbiAgICAgICAgICBsZXQgbW9ja0dhbWVEYXRhO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChleGlzdGluZ0RhdGEpIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBnYW1lIGRhdGFcbiAgICAgICAgICAgIG1vY2tHYW1lRGF0YSA9IEpTT04ucGFyc2UoZXhpc3RpbmdEYXRhKTtcbiAgICAgICAgICAgIG1vY2tHYW1lRGF0YS5zdGF0dXMgPSAnYWN0aXZlJztcbiAgICAgICAgICAgIG1vY2tHYW1lRGF0YVsnX190cmVuZGd1ZXNzZXIuc3RhdGUnXSA9IGdhbWVTdGF0ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBnYW1lIGRhdGFcbiAgICAgICAgICAgIG1vY2tHYW1lRGF0YSA9IHtcbiAgICAgICAgICAgICAgaWQ6IGdhbWVJZCxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBtb2NrVXNlclVpZCxcbiAgICAgICAgICAgICAgZ2FtZVR5cGU6ICd0cmVuZGd1ZXNzZXInLFxuICAgICAgICAgICAgICAnX190cmVuZGd1ZXNzZXIuc3RhdGUnOiBnYW1lU3RhdGUsXG4gICAgICAgICAgICAgIFttb2NrVXNlclVpZF06IHtcbiAgICAgICAgICAgICAgICB1aWQ6IG1vY2tVc2VyVWlkLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdNb2NrIFBsYXllcicsXG4gICAgICAgICAgICAgICAgc2NvcmU6IDBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2F2ZSB0byBzZXNzaW9uIHN0b3JhZ2VcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWAsIEpTT04uc3RyaW5naWZ5KG1vY2tHYW1lRGF0YSkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdG9yZWQgbW9jayBnYW1lIGRhdGE6JywgbW9ja0dhbWVEYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJTVBPUlRBTlQgRklYOiBXZSBuZWVkIHRvIHN0b3JlIHRoZSBjdXJyZW50IGdhbWUgSUQgaW4gYSBzcGVjaWFsIGtleVxuICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBjYW4gYWNjZXNzIGl0IGFjcm9zcyBwYWdlIHJlZnJlc2hlc1xuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfZ2FtZV9pZCcsIGdhbWVJZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NldCBjdXJyZW50IGdhbWUgSUQgaW4gc2Vzc2lvbiBzdG9yYWdlOicsIGdhbWVJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRGVhY3RpdmF0ZSBhbnkgb3RoZXIgYWN0aXZlIGdhbWVzIHRvIGF2b2lkIGNvbmZsaWN0c1xuICAgICAgICAgIGNvbnN0IGdhbWVLZXlzID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXNzaW9uU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvblN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICAgICAgaWYgKGtleSAmJiBrZXkuc3RhcnRzV2l0aCgnZ2FtZV8nKSAmJiBrZXkgIT09IGBnYW1lXyR7Z2FtZUlkfWApIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGtleSkgfHwgJ3t9Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnaW5hY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWFjdGl2YXRlZCBvdGhlciBnYW1lIHRvIGF2b2lkIGNvbmZsaWN0czonLCBrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBwYXJzaW5nIGVycm9yc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGdhbWVLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIHRoZSBjcmVhdGVkIGdhbWUgc3RhdGUgZm9yIGltbWVkaWF0ZSB1c2VcbiAgICAgIHJldHVybiBnYW1lU3RhdGU7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhcnRpbmcgZ2FtZTonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChVU0VfTU9DS19EQVRBKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gYmFzaWMgbW9jayBnYW1lIHN0YXRlIGR1ZSB0byBlcnJvcicpO1xuICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiBhIGJhc2ljIG1vY2sgZ2FtZSBzdGF0ZVxuICAgICAgICBjb25zdCBmYWxsYmFja1N0YXRlOiBUcmVuZEd1ZXNzZXJHYW1lU3RhdGUgPSB7XG4gICAgICAgICAgY3VycmVudFJvdW5kOiAxLFxuICAgICAgICAgIGtub3duVGVybTogc2FtcGxlU2VhcmNoVGVybXNbMF0sXG4gICAgICAgICAgaGlkZGVuVGVybTogc2FtcGxlU2VhcmNoVGVybXNbMV0sXG4gICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5IHx8ICdldmVyeXRoaW5nJyxcbiAgICAgICAgICBzdGFydGVkOiB0cnVlLFxuICAgICAgICAgIGZpbmlzaGVkOiBmYWxzZSxcbiAgICAgICAgICB1c2VkVGVybXM6IFtzYW1wbGVTZWFyY2hUZXJtc1swXS5pZCwgc2FtcGxlU2VhcmNoVGVybXNbMV0uaWRdLFxuICAgICAgICAgIHRlcm1zOiBzYW1wbGVTZWFyY2hUZXJtcy5zbGljZSgyKSxcbiAgICAgICAgICBjdXN0b21UZXJtOiBjYXRlZ29yeSA9PT0gJ2N1c3RvbScgPyBjdXN0b21UZXJtIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGUgZmFsbGJhY2sgc3RhdGUgaW4gc2Vzc2lvbiBzdG9yYWdlXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IG1vY2tVc2VyVWlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbW9ja191c2VyX3VpZCcpIHx8ICdtb2NrX3VzZXInO1xuICAgICAgICAgIGNvbnN0IG1vY2tHYW1lRGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBnYW1lSWQsXG4gICAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiBtb2NrVXNlclVpZCxcbiAgICAgICAgICAgIGdhbWVUeXBlOiAndHJlbmRndWVzc2VyJyxcbiAgICAgICAgICAgICdfX3RyZW5kZ3Vlc3Nlci5zdGF0ZSc6IGZhbGxiYWNrU3RhdGUsXG4gICAgICAgICAgICBbbW9ja1VzZXJVaWRdOiB7XG4gICAgICAgICAgICAgIHVpZDogbW9ja1VzZXJVaWQsXG4gICAgICAgICAgICAgIG5hbWU6ICdNb2NrIFBsYXllcicsXG4gICAgICAgICAgICAgIHNjb3JlOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWAsIEpTT04uc3RyaW5naWZ5KG1vY2tHYW1lRGF0YSkpO1xuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfZ2FtZV9pZCcsIGdhbWVJZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0ZWQgZmFsbGJhY2sgZ2FtZSBzdGF0ZSBpbiBzZXNzaW9uIHN0b3JhZ2U6JywgZmFsbGJhY2tTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmYWxsYmFja1N0YXRlO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIE1ha2UgYSBndWVzcyAoaGlnaGVyIG9yIGxvd2VyKVxuICBzdGF0aWMgYXN5bmMgbWFrZUd1ZXNzKGdhbWVJZDogc3RyaW5nLCBwbGF5ZXJVaWQ6IHN0cmluZywgaXNIaWdoZXI6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gSGFuZGxlIG1vY2sgbW9kZVxuICAgICAgaWYgKFVTRV9NT0NLX0RBVEEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIG1vY2sgZGF0YSBmb3IgZ3Vlc3M6JywgeyBnYW1lSWQsIHBsYXllclVpZCwgaXNIaWdoZXIgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgZ2FtZSBkYXRhIGZyb20gc2Vzc2lvbiBzdG9yYWdlXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gdXNlIHRoZSBjdXJyZW50X2dhbWVfaWQgaW5zdGVhZFxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRHYW1lSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X2dhbWVfaWQnKTtcbiAgICAgICAgICBpZiAoY3VycmVudEdhbWVJZCAmJiBjdXJyZW50R2FtZUlkICE9PSBnYW1lSWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignV0FSTklORzogZ2FtZUlkIG1pc21hdGNoIGluIG1ha2VHdWVzcy4gVXNpbmcgY3VycmVudF9nYW1lX2lkOicsIGN1cnJlbnRHYW1lSWQsICdpbnN0ZWFkIG9mOicsIGdhbWVJZCk7XG4gICAgICAgICAgICBnYW1lSWQgPSBjdXJyZW50R2FtZUlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBzdG9yZWRHYW1lRGF0YSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oYGdhbWVfJHtnYW1lSWR9YCk7XG4gICAgICAgICAgaWYgKCFzdG9yZWRHYW1lRGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTW9jayBnYW1lIG5vdCBmb3VuZDonLCBnYW1lSWQpO1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYW55IGdhbWUgaW4gc2Vzc2lvbiBzdG9yYWdlIGFzIGEgZmFsbGJhY2tcbiAgICAgICAgICAgIGNvbnN0IGFsbEtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vzc2lvblN0b3JhZ2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvblN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICAgICAgICBpZiAoa2V5ICYmIGtleS5zdGFydHNXaXRoKCdnYW1lXycpKSB7XG4gICAgICAgICAgICAgICAgYWxsS2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KSB8fCAne30nKTtcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhWydfX3RyZW5kZ3Vlc3Nlci5zdGF0ZSddPy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBhbHRlcm5hdGl2ZSBhY3RpdmUgZ2FtZTonLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudF9nYW1lX2lkIGFuZCB1c2UgdGhpcyBnYW1lIGluc3RlYWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWx0ZXJuYXRpdmVHYW1lSWQgPSBrZXkucmVwbGFjZSgnZ2FtZV8nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRfZ2FtZV9pZCcsIGFsdGVybmF0aXZlR2FtZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUlkID0gYWx0ZXJuYXRpdmVHYW1lSWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdERhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHREYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGFsdGVybmF0aXZlIGdhbWUgZGF0YScpO1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1ha2VHdWVzcyhhbHRlcm5hdGl2ZUdhbWVJZCwgcGxheWVyVWlkLCBpc0hpZ2hlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgcGFyc2luZyBlcnJvcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHdlIGNvdWxkbid0IGZpbmQgYW55IGFjdGl2ZSBnYW1lc1xuICAgICAgICAgICAgaWYgKGFsbEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgZ2FtZSBrZXlzIGJ1dCBub25lIGFyZSBhY3RpdmU6JywgYWxsS2V5cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2ZSBnYW1lIGZvdW5kJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGdhbWVEYXRhID0gSlNPTi5wYXJzZShzdG9yZWRHYW1lRGF0YSk7XG4gICAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gZ2FtZURhdGFbJ19fdHJlbmRndWVzc2VyLnN0YXRlJ10gYXMgVHJlbmRHdWVzc2VyR2FtZVN0YXRlO1xuICAgICAgICAgIGNvbnN0IG1vY2tVc2VyVWlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbW9ja191c2VyX3VpZCcpIHx8IHBsYXllclVpZCB8fCAnbW9ja191c2VyJztcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgcGxheWVyIGRhdGEgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgIGxldCBwbGF5ZXIgPSBnYW1lRGF0YVttb2NrVXNlclVpZF0gYXMgVHJlbmRHdWVzc2VyUGxheWVyO1xuICAgICAgICAgIGlmICghcGxheWVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUGxheWVyIGRhdGEgbm90IGZvdW5kLCBjcmVhdGluZyBuZXcgcGxheWVyIGRhdGEnKTtcbiAgICAgICAgICAgIHBsYXllciA9IHtcbiAgICAgICAgICAgICAgdWlkOiBtb2NrVXNlclVpZCxcbiAgICAgICAgICAgICAgbmFtZTogJ1BsYXllcicsXG4gICAgICAgICAgICAgIHNjb3JlOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2FtZURhdGFbbW9ja1VzZXJVaWRdID0gcGxheWVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWdhbWVTdGF0ZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gZ2FtZSBzdGF0ZSBmb3VuZCBpbiBnYW1lIGRhdGE6JywgZ2FtZURhdGEpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHYW1lIHN0YXRlIG5vdCBmb3VuZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWdhbWVTdGF0ZS5zdGFydGVkIHx8IGdhbWVTdGF0ZS5maW5pc2hlZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2FtZSBpcyBub3QgaW4gYWN0aXZlIHN0YXRlOicsIFxuICAgICAgICAgICAgICBnYW1lU3RhdGUuc3RhcnRlZCA/ICdzdGFydGVkJyA6ICdub3Qgc3RhcnRlZCcsIFxuICAgICAgICAgICAgICBnYW1lU3RhdGUuZmluaXNoZWQgPyAnZmluaXNoZWQnIDogJ25vdCBmaW5pc2hlZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhbWUgaXMgbm90IGFjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZ3Vlc3MgaXMgY29ycmVjdFxuICAgICAgICAgIGNvbnN0IGlzQ29ycmVjdCA9IGlzSGlnaGVyIFxuICAgICAgICAgICAgPyBnYW1lU3RhdGUuaGlkZGVuVGVybS52b2x1bWUgPiBnYW1lU3RhdGUua25vd25UZXJtLnZvbHVtZVxuICAgICAgICAgICAgOiBnYW1lU3RhdGUuaGlkZGVuVGVybS52b2x1bWUgPCBnYW1lU3RhdGUua25vd25UZXJtLnZvbHVtZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgICAgICAvLyBDb3JyZWN0IGd1ZXNzIC0gcHJlcGFyZSBuZXh0IHJvdW5kXG4gICAgICAgICAgICBjb25zdCBuZXh0Um91bmQgPSBnYW1lU3RhdGUuY3VycmVudFJvdW5kICsgMTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllclNjb3JlID0gKHBsYXllci5zY29yZSB8fCAwKSArIDE7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5ZXIgc2NvcmVcbiAgICAgICAgICAgIHBsYXllci5zY29yZSA9IG5ld1BsYXllclNjb3JlO1xuICAgICAgICAgICAgZ2FtZURhdGFbbW9ja1VzZXJVaWRdID0gcGxheWVyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLnRlcm1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBtb3JlIHRlcm1zLCBzZXQgdXAgbmV4dCByb3VuZFxuICAgICAgICAgICAgICBjb25zdCBuZXh0VGVybSA9IGdhbWVTdGF0ZS50ZXJtc1swXTtcbiAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGVybXMgPSBnYW1lU3RhdGUudGVybXMuc2xpY2UoMSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBVcGRhdGUgZ2FtZSBzdGF0ZVxuICAgICAgICAgICAgICBnYW1lU3RhdGUuY3VycmVudFJvdW5kID0gbmV4dFJvdW5kO1xuICAgICAgICAgICAgICBnYW1lU3RhdGUua25vd25UZXJtID0gZ2FtZVN0YXRlLmhpZGRlblRlcm07XG4gICAgICAgICAgICAgIGdhbWVTdGF0ZS5oaWRkZW5UZXJtID0gbmV4dFRlcm07XG4gICAgICAgICAgICAgIGdhbWVTdGF0ZS51c2VkVGVybXMgPSBbLi4uZ2FtZVN0YXRlLnVzZWRUZXJtcywgbmV4dFRlcm0uaWRdO1xuICAgICAgICAgICAgICBnYW1lU3RhdGUudGVybXMgPSByZW1haW5pbmdUZXJtcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIE5vIG1vcmUgdGVybXMgLSBwbGF5ZXIgd2luc1xuICAgICAgICAgICAgICBnYW1lU3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBnYW1lU3RhdGUud2lubmVyID0gbW9ja1VzZXJVaWQ7XG4gICAgICAgICAgICAgIGdhbWVEYXRhLnN0YXR1cyA9ICdmaW5pc2hlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNhdmUgdXBkYXRlZCBnYW1lIGRhdGFcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYGdhbWVfJHtnYW1lSWR9YCwgSlNPTi5zdHJpbmdpZnkoZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIG1vY2sgZ2FtZSBkYXRhIGFmdGVyIGNvcnJlY3QgZ3Vlc3M6JywgZ2FtZURhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gV3JvbmcgZ3Vlc3MgLSBnYW1lIG92ZXJcbiAgICAgICAgICAgIGdhbWVTdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICBnYW1lRGF0YS5zdGF0dXMgPSAnZmluaXNoZWQnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTYXZlIHVwZGF0ZWQgZ2FtZSBkYXRhXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWAsIEpTT04uc3RyaW5naWZ5KGdhbWVEYXRhKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCBtb2NrIGdhbWUgZGF0YSBhZnRlciB3cm9uZyBndWVzczonLCBnYW1lRGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpID4gMC41OyAvLyBGYWxsYmFjayBpZiBubyBzZXNzaW9uIHN0b3JhZ2VcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVndWxhciBGaXJlc3RvcmUgaW1wbGVtZW50YXRpb25cbiAgICAgIGNvbnN0IGdhbWVSZWYgPSBkb2MoZGIsICdnYW1lcycsIGdhbWVJZC50b1VwcGVyQ2FzZSgpKTtcbiAgICAgIGNvbnN0IGdhbWVEb2MgPSBhd2FpdCBnZXREb2MoZ2FtZVJlZik7XG4gICAgICBcbiAgICAgIGlmICghZ2FtZURvYy5leGlzdHMoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhbWUgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZ2FtZURhdGEgPSBnYW1lRG9jLmRhdGEoKTtcbiAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IGdhbWVEYXRhWydfX3RyZW5kZ3Vlc3Nlci5zdGF0ZSddIGFzIFRyZW5kR3Vlc3NlckdhbWVTdGF0ZTtcbiAgICAgIGNvbnN0IHBsYXllciA9IGdhbWVEYXRhW3BsYXllclVpZF0gYXMgVHJlbmRHdWVzc2VyUGxheWVyO1xuICAgICAgXG4gICAgICBpZiAoIWdhbWVTdGF0ZSB8fCAhZ2FtZVN0YXRlLnN0YXJ0ZWQgfHwgZ2FtZVN0YXRlLmZpbmlzaGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZSBpcyBub3QgYWN0aXZlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBndWVzcyBpcyBjb3JyZWN0XG4gICAgICBjb25zdCBpc0NvcnJlY3QgPSBpc0hpZ2hlciBcbiAgICAgICAgPyBnYW1lU3RhdGUuaGlkZGVuVGVybS52b2x1bWUgPiBnYW1lU3RhdGUua25vd25UZXJtLnZvbHVtZVxuICAgICAgICA6IGdhbWVTdGF0ZS5oaWRkZW5UZXJtLnZvbHVtZSA8IGdhbWVTdGF0ZS5rbm93blRlcm0udm9sdW1lO1xuICAgICAgXG4gICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgIC8vIENvcnJlY3QgZ3Vlc3MgLSBwcmVwYXJlIG5leHQgcm91bmRcbiAgICAgICAgY29uc3QgbmV4dFJvdW5kID0gZ2FtZVN0YXRlLmN1cnJlbnRSb3VuZCArIDE7XG4gICAgICAgIGNvbnN0IG5ld1BsYXllclNjb3JlID0gKHBsYXllci5zY29yZSB8fCAwKSArIDE7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcGxheWVyIHNjb3JlXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhnYW1lUmVmLCB7XG4gICAgICAgICAgW2Ake3BsYXllclVpZH0uc2NvcmVgXTogbmV3UGxheWVyU2NvcmVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vcmUgdGVybXMsIHNldCB1cCBuZXh0IHJvdW5kXG4gICAgICAgIGlmIChnYW1lU3RhdGUudGVybXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IG5leHRUZXJtID0gZ2FtZVN0YXRlLnRlcm1zWzBdO1xuICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1Rlcm1zID0gZ2FtZVN0YXRlLnRlcm1zLnNsaWNlKDEpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTdGF0ZTogVHJlbmRHdWVzc2VyR2FtZVN0YXRlID0ge1xuICAgICAgICAgICAgLi4uZ2FtZVN0YXRlLFxuICAgICAgICAgICAgY3VycmVudFJvdW5kOiBuZXh0Um91bmQsXG4gICAgICAgICAgICBrbm93blRlcm06IGdhbWVTdGF0ZS5oaWRkZW5UZXJtLFxuICAgICAgICAgICAgaGlkZGVuVGVybTogbmV4dFRlcm0sXG4gICAgICAgICAgICB1c2VkVGVybXM6IFsuLi5nYW1lU3RhdGUudXNlZFRlcm1zLCBuZXh0VGVybS5pZF0sXG4gICAgICAgICAgICB0ZXJtczogcmVtYWluaW5nVGVybXNcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhnYW1lUmVmLCB7XG4gICAgICAgICAgICAnX190cmVuZGd1ZXNzZXIuc3RhdGUnOiB1cGRhdGVkU3RhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyBtb3JlIHRlcm1zIC0gcGxheWVyIHdpbnMgYnkgY29tcGxldGluZyBhbGwgdGVybXNcbiAgICAgICAgICBjb25zdCB1cGRhdGVkU3RhdGU6IFRyZW5kR3Vlc3NlckdhbWVTdGF0ZSA9IHtcbiAgICAgICAgICAgIC4uLmdhbWVTdGF0ZSxcbiAgICAgICAgICAgIGZpbmlzaGVkOiB0cnVlLFxuICAgICAgICAgICAgd2lubmVyOiBwbGF5ZXJVaWRcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhnYW1lUmVmLCB7XG4gICAgICAgICAgICAnX190cmVuZGd1ZXNzZXIuc3RhdGUnOiB1cGRhdGVkU3RhdGUsXG4gICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgaGlnaCBzY29yZSBpZiBuZWVkZWRcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUhpZ2hTY29yZShwbGF5ZXJVaWQsIGdhbWVTdGF0ZS5jYXRlZ29yeSwgbmV3UGxheWVyU2NvcmUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEluY29ycmVjdCBndWVzcyAtIGdhbWUgb3ZlclxuICAgICAgICBjb25zdCB1cGRhdGVkU3RhdGU6IFRyZW5kR3Vlc3NlckdhbWVTdGF0ZSA9IHtcbiAgICAgICAgICAuLi5nYW1lU3RhdGUsXG4gICAgICAgICAgZmluaXNoZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhnYW1lUmVmLCB7XG4gICAgICAgICAgJ19fdHJlbmRndWVzc2VyLnN0YXRlJzogdXBkYXRlZFN0YXRlLFxuICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBoaWdoIHNjb3JlIGlmIG5lZWRlZFxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUhpZ2hTY29yZShwbGF5ZXJVaWQsIGdhbWVTdGF0ZS5jYXRlZ29yeSwgcGxheWVyLnNjb3JlIHx8IDApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1ha2luZyBndWVzczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEVuZCB0aGUgZ2FtZSBhbmQgdXBkYXRlIGhpZ2ggc2NvcmVzXG4gIHN0YXRpYyBhc3luYyBlbmRHYW1lKGdhbWVJZDogc3RyaW5nLCBwbGF5ZXJVaWQ6IHN0cmluZywgZmluYWxTY29yZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEhhbmRsZSBtb2NrIG1vZGVcbiAgICAgIGlmIChVU0VfTU9DS19EQVRBICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBtb2NrIGRhdGEgZm9yIGVuZGluZyBnYW1lOicsIGdhbWVJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgY3VycmVudCBnYW1lIElEIGZyb20gc2Vzc2lvbiBzdG9yYWdlIGlmIG5lZWRlZFxuICAgICAgICBjb25zdCBjdXJyZW50R2FtZUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF9nYW1lX2lkJyk7XG4gICAgICAgIGlmIChjdXJyZW50R2FtZUlkICYmIGN1cnJlbnRHYW1lSWQgIT09IGdhbWVJZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignV0FSTklORzogZ2FtZUlkIG1pc21hdGNoIGluIGVuZEdhbWUuIFVzaW5nIGN1cnJlbnRfZ2FtZV9pZDonLCBjdXJyZW50R2FtZUlkKTtcbiAgICAgICAgICBnYW1lSWQgPSBjdXJyZW50R2FtZUlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgZ2FtZSBkYXRhIGZyb20gc2Vzc2lvbiBzdG9yYWdlXG4gICAgICAgIGNvbnN0IHN0b3JlZEdhbWVEYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgZ2FtZV8ke2dhbWVJZH1gKTtcbiAgICAgICAgaWYgKHN0b3JlZEdhbWVEYXRhKSB7XG4gICAgICAgICAgY29uc3QgZ2FtZURhdGEgPSBKU09OLnBhcnNlKHN0b3JlZEdhbWVEYXRhKTtcbiAgICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSBnYW1lRGF0YVsnX190cmVuZGd1ZXNzZXIuc3RhdGUnXSBhcyBUcmVuZEd1ZXNzZXJHYW1lU3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGdhbWVTdGF0ZSAmJiBnYW1lU3RhdGUuc3RhcnRlZCkge1xuICAgICAgICAgICAgLy8gTWFyayBnYW1lIGFzIGZpbmlzaGVkXG4gICAgICAgICAgICBnYW1lU3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgZ2FtZURhdGEuc3RhdHVzID0gJ2ZpbmlzaGVkJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2F2ZSB1cGRhdGVkIGdhbWUgZGF0YVxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgZ2FtZV8ke2dhbWVJZH1gLCBKU09OLnN0cmluZ2lmeShnYW1lRGF0YSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgbW9jayBnYW1lIGRhdGEgYXMgZmluaXNoZWQ6JywgZ2FtZURhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgZ2FtZVJlZiA9IGRvYyhkYiwgJ2dhbWVzJywgZ2FtZUlkLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgY29uc3QgZ2FtZURvYyA9IGF3YWl0IGdldERvYyhnYW1lUmVmKTtcbiAgICAgIFxuICAgICAgaWYgKCFnYW1lRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBnYW1lRGF0YSA9IGdhbWVEb2MuZGF0YSgpO1xuICAgICAgY29uc3QgZ2FtZVN0YXRlID0gZ2FtZURhdGFbJ19fdHJlbmRndWVzc2VyLnN0YXRlJ10gYXMgVHJlbmRHdWVzc2VyR2FtZVN0YXRlO1xuICAgICAgXG4gICAgICBpZiAoIWdhbWVTdGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGdhbWUgc3RhdGUgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gT25seSB1cGRhdGUgaWYgZ2FtZSB3YXMgYWN0dWFsbHkgc3RhcnRlZFxuICAgICAgaWYgKGdhbWVTdGF0ZS5zdGFydGVkKSB7XG4gICAgICAgIC8vIE1hcmsgZ2FtZSBhcyBmaW5pc2hlZFxuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZ2FtZVJlZiwge1xuICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcbiAgICAgICAgICAnX190cmVuZGd1ZXNzZXIuc3RhdGUnOiB7XG4gICAgICAgICAgICAuLi5nYW1lU3RhdGUsXG4gICAgICAgICAgICBmaW5pc2hlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgaGlnaCBzY29yZSBpZiBuZWVkZWRcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVIaWdoU2NvcmUocGxheWVyVWlkLCBnYW1lU3RhdGUuY2F0ZWdvcnksIGZpbmFsU2NvcmUpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuZGluZyBnYW1lOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gQ3JlYXRlIGEgbmV3IGdhbWUgc2Vzc2lvblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlR2FtZShjcmVhdGVkQnk6IHN0cmluZywgcGxheWVyTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2VuZXJhdGUgYSBzaG9ydCA2LWNoYXJhY3RlciBnYW1lIElEICh1cHBlcmNhc2UpXG4gICAgICBjb25zdCBnYW1lSWQgPSB0aGlzLmdlbmVyYXRlR2FtZUlkKCk7XG4gICAgICBcbiAgICAgIGlmIChVU0VfTU9DS19EQVRBKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBtb2NrIGRhdGEgZm9yIGdhbWUgY3JlYXRpb24nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBpbml0aWFsIGdhbWUgc3RhdGUgaW4gc2Vzc2lvblN0b3JhZ2UgZm9yIGltbWVkaWF0ZSBhY2Nlc3NcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgbW9ja1VzZXJVaWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdtb2NrX3VzZXJfdWlkJykgfHwgY3JlYXRlZEJ5IHx8ICdtb2NrX3VzZXInO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxHYW1lRGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBnYW1lSWQsXG4gICAgICAgICAgICBzdGF0dXM6ICd3YWl0aW5nJyxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogbW9ja1VzZXJVaWQsXG4gICAgICAgICAgICBnYW1lVHlwZTogJ3RyZW5kZ3Vlc3NlcicsXG4gICAgICAgICAgICBbbW9ja1VzZXJVaWRdOiB7XG4gICAgICAgICAgICAgIHVpZDogbW9ja1VzZXJVaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHBsYXllck5hbWUgfHwgJ1BsYXllcicsXG4gICAgICAgICAgICAgIHNjb3JlOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfWAsIEpTT04uc3RyaW5naWZ5KGluaXRpYWxHYW1lRGF0YSkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGVkIGluaXRpYWwgbW9jayBnYW1lIGRhdGE6JywgaW5pdGlhbEdhbWVEYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgY3VycmVudF9nYW1lX2lkIGlzIHNldCB0byB0aGlzIG5ldyBnYW1lXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudF9nYW1lX2lkJywgZ2FtZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQXJ0aWZpY2lhbCBkZWxheSB0byBzaW11bGF0ZSBuZXR3b3JrIHJlcXVlc3RcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGdhbWVJZCk7XG4gICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGdhbWVSZWYgPSBkb2MoZGIsICdnYW1lcycsIGdhbWVJZCk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgcGxheWVyIGRhdGFcbiAgICAgIGNvbnN0IHBsYXllckRhdGE6IFRyZW5kR3Vlc3NlclBsYXllciA9IHtcbiAgICAgICAgdWlkOiBjcmVhdGVkQnksXG4gICAgICAgIG5hbWU6IHBsYXllck5hbWUgfHwgJ1BsYXllcicsXG4gICAgICAgIHNjb3JlOiAwXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsIGdhbWUgZGF0YVxuICAgICAgY29uc3QgZ2FtZURhdGEgPSB7XG4gICAgICAgIGlkOiBnYW1lSWQsXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIGNyZWF0ZWRCeSxcbiAgICAgICAgZ2FtZVR5cGU6ICd0cmVuZGd1ZXNzZXInLFxuICAgICAgICBzdGF0dXM6ICd3YWl0aW5nJyxcbiAgICAgICAgW2NyZWF0ZWRCeV06IHBsYXllckRhdGFcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGF3YWl0IHNldERvYyhnYW1lUmVmLCBnYW1lRGF0YSk7XG4gICAgICByZXR1cm4gZ2FtZUlkO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGdhbWU6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICBpZiAoVVNFX01PQ0tfREFUQSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFsbGluZyBiYWNrIHRvIG1vY2sgZGF0YSBkdWUgdG8gZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVHYW1lSWQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICAvLyBGZXRjaCBsZWFkZXJib2FyZCBmb3IgYSBjYXRlZ29yeVxuICBzdGF0aWMgYXN5bmMgZ2V0TGVhZGVyYm9hcmQoY2F0ZWdvcnk6IFNlYXJjaENhdGVnb3J5KTogUHJvbWlzZTxUcmVuZEd1ZXNzZXJQbGF5ZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoVVNFX01PQ0tfREFUQSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgbW9jayBkYXRhIGZvciBsZWFkZXJib2FyZCcpO1xuICAgICAgICAvLyBTb3J0IGFuZCBmaWx0ZXIgdGhlIG1vY2sgbGVhZGVyYm9hcmQgYmFzZWQgb24gdGhlIHJlcXVlc3RlZCBjYXRlZ29yeVxuICAgICAgICByZXR1cm4gc2FtcGxlTGVhZGVyYm9hcmRcbiAgICAgICAgICAuZmlsdGVyKHBsYXllciA9PiBwbGF5ZXIuaGlnaFNjb3JlcyAmJiBwbGF5ZXIuaGlnaFNjb3Jlc1tjYXRlZ29yeV0pXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlQSA9IGEuaGlnaFNjb3Jlcz8uW2NhdGVnb3J5XSB8fCAwO1xuICAgICAgICAgICAgY29uc3Qgc2NvcmVCID0gYi5oaWdoU2NvcmVzPy5bY2F0ZWdvcnldIHx8IDA7XG4gICAgICAgICAgICByZXR1cm4gc2NvcmVCIC0gc2NvcmVBO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNsaWNlKDAsIDEwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbGVhZGVyYm9hcmRSZWYgPSBjb2xsZWN0aW9uKGRiLCAnbGVhZGVyYm9hcmQnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgbGVhZGVyYm9hcmRSZWYsXG4gICAgICAgIHdoZXJlKCdjYXRlZ29yeScsICc9PScsIGNhdGVnb3J5KSxcbiAgICAgICAgb3JkZXJCeSgnc2NvcmUnLCAnZGVzYycpLFxuICAgICAgICBsaW1pdCgxMClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgY29uc3QgbGVhZGVyYm9hcmQ6IFRyZW5kR3Vlc3NlclBsYXllcltdID0gW107XG4gICAgICBcbiAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICBsZWFkZXJib2FyZC5wdXNoKHtcbiAgICAgICAgICB1aWQ6IGRhdGEudWlkLFxuICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICBzY29yZTogZGF0YS5zY29yZSxcbiAgICAgICAgICBoaWdoU2NvcmVzOiBkYXRhLmhpZ2hTY29yZXNcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGxlYWRlcmJvYXJkO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxlYWRlcmJvYXJkOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgaWYgKFVTRV9NT0NLX0RBVEEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhbGxpbmcgYmFjayB0byBtb2NrIGRhdGEgZHVlIHRvIGVycm9yJyk7XG4gICAgICAgIHJldHVybiBzYW1wbGVMZWFkZXJib2FyZC5zbGljZSgwLCAxMCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gSGVscGVyIG1ldGhvZHNcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgdXBkYXRlSGlnaFNjb3JlKFxuICAgIHBsYXllclVpZDogc3RyaW5nLCBcbiAgICBjYXRlZ29yeTogU2VhcmNoQ2F0ZWdvcnksIFxuICAgIHNjb3JlOiBudW1iZXJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEluIG1vY2sgbW9kZSwgc3RvcmUgaGlnaCBzY29yZSBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAgaWYgKFVTRV9NT0NLX0RBVEEgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgaGlnaFNjb3Jlc0RhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdoaWdoU2NvcmVzJyk7XG4gICAgICAgIGxldCBoaWdoU2NvcmVzID0gaGlnaFNjb3Jlc0RhdGEgPyBKU09OLnBhcnNlKGhpZ2hTY29yZXNEYXRhKSA6IHt9O1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB1c2VyJ3MgaGlnaCBzY29yZXMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgICAgICBpZiAoIWhpZ2hTY29yZXNbcGxheWVyVWlkXSkge1xuICAgICAgICAgIGhpZ2hTY29yZXNbcGxheWVyVWlkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgaGlnaCBzY29yZSBpZiB0aGUgbmV3IHNjb3JlIGlzIGhpZ2hlclxuICAgICAgICBjb25zdCBjdXJyZW50SGlnaFNjb3JlID0gaGlnaFNjb3Jlc1twbGF5ZXJVaWRdW2NhdGVnb3J5XSB8fCAwO1xuICAgICAgICBpZiAoc2NvcmUgPiBjdXJyZW50SGlnaFNjb3JlKSB7XG4gICAgICAgICAgaGlnaFNjb3Jlc1twbGF5ZXJVaWRdW2NhdGVnb3J5XSA9IHNjb3JlO1xuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2hpZ2hTY29yZXMnLCBKU09OLnN0cmluZ2lmeShoaWdoU2NvcmVzKSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFVwZGF0ZWQgaGlnaCBzY29yZSBmb3IgJHtwbGF5ZXJVaWR9IGluIGNhdGVnb3J5ICR7Y2F0ZWdvcnl9OiAke3Njb3JlfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgXG4gICAgICBjb25zdCBwbGF5ZXJSZWYgPSBkb2MoZGIsICdwbGF5ZXJzJywgcGxheWVyVWlkKTtcbiAgICAgIGNvbnN0IHBsYXllckRvYyA9IGF3YWl0IGdldERvYyhwbGF5ZXJSZWYpO1xuICAgICAgXG4gICAgICBpZiAocGxheWVyRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnN0IHBsYXllckRhdGEgPSBwbGF5ZXJEb2MuZGF0YSgpO1xuICAgICAgICBjb25zdCBjdXJyZW50SGlnaFNjb3JlID0gcGxheWVyRGF0YS5oaWdoU2NvcmVzPy5bY2F0ZWdvcnldIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2NvcmUgPiBjdXJyZW50SGlnaFNjb3JlKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHBsYXllcidzIGhpZ2ggc2NvcmUgZm9yIHRoaXMgY2F0ZWdvcnlcbiAgICAgICAgICBhd2FpdCB1cGRhdGVEb2MocGxheWVyUmVmLCB7XG4gICAgICAgICAgICBbYGhpZ2hTY29yZXMuJHtjYXRlZ29yeX1gXTogc2NvcmVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHNvIHVwZGF0ZSBsZWFkZXJib2FyZCBpZiBzY29yZSBpcyBzaWduaWZpY2FudFxuICAgICAgICAgIGlmIChzY29yZSA+IDUpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlYWRlcmJvYXJkUmVmID0gZG9jKGRiLCAnbGVhZGVyYm9hcmQnLCBgJHtjYXRlZ29yeX1fJHtwbGF5ZXJVaWR9YCk7XG4gICAgICAgICAgICBhd2FpdCBzZXREb2MobGVhZGVyYm9hcmRSZWYsIHtcbiAgICAgICAgICAgICAgdWlkOiBwbGF5ZXJVaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHBsYXllckRhdGEubmFtZSB8fCAnVW5rbm93biBQbGF5ZXInLFxuICAgICAgICAgICAgICBzY29yZSxcbiAgICAgICAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKClcbiAgICAgICAgICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgaGlnaCBzY29yZTonLCBlcnJvcik7XG4gICAgICAvLyBEb24ndCB0aHJvdywganVzdCBsb2cgLSB0aGlzIGlzIGEgbm9uLWNyaXRpY2FsIG9wZXJhdGlvblxuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZmV0Y2hUZXJtc0J5Q2F0ZWdvcnkoY2F0ZWdvcnk6IFNlYXJjaENhdGVnb3J5KTogUHJvbWlzZTxTZWFyY2hUZXJtW10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKFVTRV9NT0NLX0RBVEEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIG1vY2sgZGF0YSBmb3Igc2VhcmNoIHRlcm1zJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2F0ZWdvcnkgPT09ICdldmVyeXRoaW5nJykge1xuICAgICAgICAgIC8vIFJldHVybiBhbGwgc2FtcGxlIHRlcm1zXG4gICAgICAgICAgcmV0dXJuIHNhbXBsZVNlYXJjaFRlcm1zO1xuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSAnbGF0ZXN0Jykge1xuICAgICAgICAgIC8vIFJldHVybiB0ZXJtcyBzb3J0ZWQgYnkgdGltZXN0YW1wXG4gICAgICAgICAgcmV0dXJuIFsuLi5zYW1wbGVTZWFyY2hUZXJtc10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgYnkgY2F0ZWdvcnlcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZFRlcm1zID0gc2FtcGxlU2VhcmNoVGVybXMuZmlsdGVyKHRlcm0gPT4gdGVybS5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpO1xuICAgICAgICAgIHJldHVybiBmaWx0ZXJlZFRlcm1zLmxlbmd0aCA+IDAgPyBmaWx0ZXJlZFRlcm1zIDogc2FtcGxlU2VhcmNoVGVybXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdGVybXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAnc2VhcmNoVGVybXMnKTtcbiAgICAgIGxldCBxO1xuICAgICAgXG4gICAgICBpZiAoY2F0ZWdvcnkgPT09ICdldmVyeXRoaW5nJykge1xuICAgICAgICAvLyBGb3IgXCJldmVyeXRoaW5nXCIgY2F0ZWdvcnksIGdldCBhIG1peCBvZiBhbGwgY2F0ZWdvcmllc1xuICAgICAgICBxID0gcXVlcnkodGVybXNSZWYsIGxpbWl0KDUwKSk7XG4gICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSAnbGF0ZXN0Jykge1xuICAgICAgICAvLyBGb3IgXCJsYXRlc3RcIiwgZ2V0IHRoZSBtb3N0IHJlY2VudGx5IGFkZGVkIHRlcm1zXG4gICAgICAgIHEgPSBxdWVyeSh0ZXJtc1JlZiwgb3JkZXJCeSgndGltZXN0YW1wJywgJ2Rlc2MnKSwgbGltaXQoNTApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBzcGVjaWZpYyBjYXRlZ29yaWVzXG4gICAgICAgIHEgPSBxdWVyeSh0ZXJtc1JlZiwgd2hlcmUoJ2NhdGVnb3J5JywgJz09JywgY2F0ZWdvcnkpLCBsaW1pdCg1MCkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIGNvbnN0IHRlcm1zOiBTZWFyY2hUZXJtW10gPSBbXTtcbiAgICAgIFxuICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCkgYXMgU2VhcmNoVGVybTtcbiAgICAgICAgdGVybXMucHVzaCh7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBpZDogZG9jLmlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB0ZXJtcztcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0ZXJtczonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChVU0VfTU9DS19EQVRBKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gbW9jayBkYXRhIGR1ZSB0byBlcnJvcicpO1xuICAgICAgICByZXR1cm4gc2FtcGxlU2VhcmNoVGVybXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZmV0Y2hDdXN0b21UZXJtV2l0aFJlbGF0ZWQoY3VzdG9tVGVybTogc3RyaW5nKTogUHJvbWlzZTxTZWFyY2hUZXJtW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyB3b3VsZCB0eXBpY2FsbHkgY2FsbCBhIEZpcmViYXNlIEZ1bmN0aW9uIHRvIGdldCB0aGUgY3VzdG9tIHRlcm0gZGF0YVxuICAgICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgaXQgd2l0aCBhIHBsYWNlaG9sZGVyXG4gICAgICBcbiAgICAgIC8vIEZpcnN0IHRlcm0gd2lsbCBiZSB0aGUgY3VzdG9tIG9uZVxuICAgICAgY29uc3QgY3VzdG9tU2VhcmNoVGVybTogU2VhcmNoVGVybSA9IHtcbiAgICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgICB0ZXJtOiBjdXN0b21UZXJtLFxuICAgICAgICB2b2x1bWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAxLCAvLyBQbGFjZWhvbGRlciB2b2x1bWVcbiAgICAgICAgY2F0ZWdvcnk6ICdjdXN0b20nLFxuICAgICAgICBpbWFnZVVybDogYGh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS9mZWF0dXJlZC8/JHtlbmNvZGVVUklDb21wb25lbnQoY3VzdG9tVGVybSl9YCxcbiAgICAgICAgdGltZXN0YW1wOiBUaW1lc3RhbXAubm93KClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEZvciBtb2NrIG1vZGUsIGp1c3QgZ2V0IHNvbWUgcmFuZG9tIHRlcm1zIGZyb20gdGhlIHNhbXBsZSBkYXRhXG4gICAgICBpZiAoVVNFX01PQ0tfREFUQSkge1xuICAgICAgICBjb25zdCByYW5kb21UZXJtcyA9IFsuLi5zYW1wbGVTZWFyY2hUZXJtc11cbiAgICAgICAgICAuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxuICAgICAgICAgIC5zbGljZSgwLCAxMCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gW2N1c3RvbVNlYXJjaFRlcm0sIC4uLnJhbmRvbVRlcm1zXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVGhlbiBnZXQgc29tZSByZWxhdGVkIHRlcm1zIGZyb20gdGhlIGRhdGFiYXNlIChyYW5kb20gZm9yIG5vdylcbiAgICAgIGNvbnN0IHRlcm1zUmVmID0gY29sbGVjdGlvbihkYiwgJ3NlYXJjaFRlcm1zJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkodGVybXNSZWYsIGxpbWl0KDIwKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgY29uc3QgdGVybXM6IFNlYXJjaFRlcm1bXSA9IFtjdXN0b21TZWFyY2hUZXJtXTtcbiAgICAgIFxuICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCkgYXMgU2VhcmNoVGVybTtcbiAgICAgICAgdGVybXMucHVzaCh7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBpZDogZG9jLmlkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB0ZXJtcztcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjdXN0b20gdGVybTonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgZGF0YSBmb3IgY3VzdG9tIHRlcm1cbiAgICAgIGlmIChVU0VfTU9DS19EQVRBKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gbW9jayBkYXRhIGZvciBjdXN0b20gdGVybScpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY3VzdG9tU2VhcmNoVGVybTogU2VhcmNoVGVybSA9IHtcbiAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgdGVybTogY3VzdG9tVGVybSxcbiAgICAgICAgICB2b2x1bWU6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAxLFxuICAgICAgICAgIGNhdGVnb3J5OiAnY3VzdG9tJyxcbiAgICAgICAgICBpbWFnZVVybDogYGh0dHBzOi8vc291cmNlLnVuc3BsYXNoLmNvbS9mZWF0dXJlZC8/JHtlbmNvZGVVUklDb21wb25lbnQoY3VzdG9tVGVybSl9YCxcbiAgICAgICAgICB0aW1lc3RhbXA6IFRpbWVzdGFtcC5ub3coKVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBjdXN0b21TZWFyY2hUZXJtLFxuICAgICAgICAgIC4uLnNhbXBsZVNlYXJjaFRlcm1zLnNsaWNlKDAsIDEwKVxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgc3RhdGljIHNodWZmbGVUZXJtcyh0ZXJtczogU2VhcmNoVGVybVtdKTogU2VhcmNoVGVybVtdIHtcbiAgICBjb25zdCBzaHVmZmxlZCA9IFsuLi50ZXJtc107XG4gICAgZm9yIChsZXQgaSA9IHNodWZmbGVkLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgIFtzaHVmZmxlZFtpXSwgc2h1ZmZsZWRbal1dID0gW3NodWZmbGVkW2pdLCBzaHVmZmxlZFtpXV07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVHYW1lSWQoKTogc3RyaW5nIHtcbiAgICAvLyBHZW5lcmF0ZSBhIDYtY2hhcmFjdGVyIGFscGhhbnVtZXJpYyBjb2RlICh1cHBlcmNhc2UpXG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hKS0xNTlBRUlNUVVZXWFlaMjM0NTY3ODknOyAvLyBSZW1vdmVkIGNvbmZ1c2FibGUgY2hhcmFjdGVyc1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgcmVzdWx0ICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufSJdLCJuYW1lcyI6WyJkb2MiLCJzZXREb2MiLCJ1cGRhdGVEb2MiLCJnZXREb2MiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJ3aGVyZSIsImdldERvY3MiLCJUaW1lc3RhbXAiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJsaW1pdCIsIm9yZGVyQnkiLCJkYiIsInY0IiwidXVpZHY0Iiwic2FtcGxlU2VhcmNoVGVybXMiLCJzYW1wbGVMZWFkZXJib2FyZCIsIlVTRV9NT0NLX0RBVEEiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfREFUQSIsIlRyZW5kR3Vlc3NlclNlcnZpY2UiLCJzdGFydEdhbWUiLCJnYW1lSWQiLCJjYXRlZ29yeSIsImN1c3RvbVRlcm0iLCJjb25zb2xlIiwibG9nIiwiZ2FtZVJlZiIsInRvVXBwZXJDYXNlIiwiZ2FtZURvYyIsImV4aXN0cyIsIkVycm9yIiwidGVybXMiLCJmZXRjaEN1c3RvbVRlcm1XaXRoUmVsYXRlZCIsImZldGNoVGVybXNCeUNhdGVnb3J5IiwibGVuZ3RoIiwiZXJyb3IiLCJzaHVmZmxlZFRlcm1zIiwic2h1ZmZsZVRlcm1zIiwiZ2FtZVN0YXRlIiwiY3VycmVudFJvdW5kIiwia25vd25UZXJtIiwiaGlkZGVuVGVybSIsInN0YXJ0ZWQiLCJmaW5pc2hlZCIsInVzZWRUZXJtcyIsImlkIiwic2xpY2UiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJtb2NrVXNlclVpZCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsImN1cnJlbnRHYW1lSWQiLCJ3YXJuIiwic2V0SXRlbSIsImV4aXN0aW5nRGF0YSIsIm1vY2tHYW1lRGF0YSIsIkpTT04iLCJwYXJzZSIsImNyZWF0ZWRCeSIsImdhbWVUeXBlIiwidWlkIiwibmFtZSIsInNjb3JlIiwic3RyaW5naWZ5IiwiZ2FtZUtleXMiLCJpIiwia2V5Iiwic3RhcnRzV2l0aCIsImRhdGEiLCJlIiwicHVzaCIsImZhbGxiYWNrU3RhdGUiLCJtYWtlR3Vlc3MiLCJwbGF5ZXJVaWQiLCJpc0hpZ2hlciIsInN0b3JlZEdhbWVEYXRhIiwiYWxsS2V5cyIsImFsdGVybmF0aXZlR2FtZUlkIiwicmVwbGFjZSIsImFsdERhdGEiLCJnYW1lRGF0YSIsInBsYXllciIsImlzQ29ycmVjdCIsInZvbHVtZSIsIm5leHRSb3VuZCIsIm5ld1BsYXllclNjb3JlIiwibmV4dFRlcm0iLCJyZW1haW5pbmdUZXJtcyIsIndpbm5lciIsIk1hdGgiLCJyYW5kb20iLCJ1cGRhdGVkU3RhdGUiLCJ1cGRhdGVIaWdoU2NvcmUiLCJlbmRHYW1lIiwiZmluYWxTY29yZSIsImNyZWF0ZUdhbWUiLCJwbGF5ZXJOYW1lIiwiZ2VuZXJhdGVHYW1lSWQiLCJpbml0aWFsR2FtZURhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJwbGF5ZXJEYXRhIiwiY3JlYXRlZEF0IiwiZ2V0TGVhZGVyYm9hcmQiLCJmaWx0ZXIiLCJoaWdoU2NvcmVzIiwic29ydCIsImEiLCJiIiwic2NvcmVBIiwic2NvcmVCIiwibGVhZGVyYm9hcmRSZWYiLCJxIiwicXVlcnlTbmFwc2hvdCIsImxlYWRlcmJvYXJkIiwiZm9yRWFjaCIsImhpZ2hTY29yZXNEYXRhIiwiY3VycmVudEhpZ2hTY29yZSIsInBsYXllclJlZiIsInBsYXllckRvYyIsInVwZGF0ZWRBdCIsIm1lcmdlIiwiZmlsdGVyZWRUZXJtcyIsInRlcm0iLCJ0ZXJtc1JlZiIsImN1c3RvbVNlYXJjaFRlcm0iLCJmbG9vciIsImltYWdlVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGltZXN0YW1wIiwibm93IiwicmFuZG9tVGVybXMiLCJzaHVmZmxlZCIsImoiLCJjaGFycyIsInJlc3VsdCIsImNoYXJBdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lib/firebase/trendGuesserService.ts\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/head */ \"next/head\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _contexts_ConsentContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../contexts/ConsentContext */ \"./src/contexts/ConsentContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_GameContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../contexts/GameContext */ \"./src/contexts/GameContext.tsx\");\n/* harmony import */ var _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/firebase/firebase */ \"./src/lib/firebase/firebase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__, _contexts_GameContext__WEBPACK_IMPORTED_MODULE_7__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_8__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__, _contexts_GameContext__WEBPACK_IMPORTED_MODULE_7__, _lib_firebase_firebase__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)();\n    const canonicalUrl = `https://trendguesser.com${router.asPath === \"/\" ? \"\" : router.asPath}`;\n    // Initialize Firebase immediately, not in useEffect\n    // This ensures Firebase is available before any components mount\n    if (false) {}\n    // Load fonts\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"MyApp.useEffect\": ()=>{\n            // Load Oswald font for game-style text\n            const linkOswald = document.createElement('link');\n            linkOswald.rel = 'stylesheet';\n            linkOswald.href = 'https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap';\n            document.head.appendChild(linkOswald);\n            // Load Press Start 2P for title/display text\n            const linkPressStart = document.createElement('link');\n            linkPressStart.rel = 'stylesheet';\n            linkPressStart.href = 'https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap';\n            document.head.appendChild(linkPressStart);\n            return ({\n                \"MyApp.useEffect\": ()=>{\n                    document.head.removeChild(linkOswald);\n                    document.head.removeChild(linkPressStart);\n                }\n            })[\"MyApp.useEffect\"];\n        }\n    }[\"MyApp.useEffect\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_ConsentContext__WEBPACK_IMPORTED_MODULE_5__.ConsentProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_GameContext__WEBPACK_IMPORTED_MODULE_7__.GameProvider, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_2___default()), {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                                children: \"TrendGuesser - the higher or lower game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 48,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                name: \"description\",\n                                content: \"TrendGuesser - the higher or lower game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                name: \"keywords\",\n                                content: \"trendguesser, higher or lower, game, single player, trending, search, game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 53,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                name: \"viewport\",\n                                content: \"width=device-width, initial-scale=1, maximum-scale=5\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 57,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                                rel: \"canonical\",\n                                href: canonicalUrl\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 63,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:type\",\n                                content: \"website\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 66,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:url\",\n                                content: canonicalUrl\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 67,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:title\",\n                                content: \"TrendGuesser - the higher or lower game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 68,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:description\",\n                                content: \"TrendGuesser - the higher or lower game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 72,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:image\",\n                                content: \"https://trendguesser.com/images/social-cover.png\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 76,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:image:width\",\n                                content: \"1200\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 80,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:image:height\",\n                                content: \"630\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 81,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:site_name\",\n                                content: \"Pyramid.Ninja\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 82,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"og:locale\",\n                                content: \"en_US\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 83,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"twitter:card\",\n                                content: \"summary_large_image\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 86,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"twitter:url\",\n                                content: canonicalUrl\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 87,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"twitter:title\",\n                                content: \"Pyramid.Ninja - The Digital Card Drinking Game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 88,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"twitter:description\",\n                                content: \"TrendGuesser - the higher or lower game\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 92,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                                property: \"twitter:image\",\n                                content: \"https://trendguesser.com/images/social-cover.png\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                                rel: \"icon\",\n                                href: \"/favicon.ico\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 102,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                                rel: \"preload\",\n                                href: \"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap\",\n                                as: \"style\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 105,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                                rel: \"preload\",\n                                href: \"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap\",\n                                as: \"style\"\n                            }, void 0, false, {\n                                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                                lineNumber: 110,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                        lineNumber: 46,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                        ...pageProps\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                        lineNumber: 116,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n                lineNumber: 45,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n            lineNumber: 44,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_app.tsx\",\n        lineNumber: 43,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7Ozs7Ozs7OztBQUtoQztBQUVBLGlFQUFlRixLQUFLQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvYWxleC9EZXZlbG9wZXIvdHJlbmRndWVzc2VyL3NyYy9wYWdlcy9fYXBwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuLi9zdHlsZXMvZ2xvYmFscy5jc3NcIjtcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tIFwibmV4dC9hcHBcIjtcbmltcG9ydCBIZWFkIGZyb20gXCJuZXh0L2hlYWRcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSBcIm5leHQvcm91dGVyXCI7XG5pbXBvcnQgeyBDb25zZW50UHJvdmlkZXIgfSBmcm9tIFwiLi4vY29udGV4dHMvQ29uc2VudENvbnRleHRcIjtcbmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gXCIuLi9jb250ZXh0cy9BdXRoQ29udGV4dFwiO1xuaW1wb3J0IHsgR2FtZVByb3ZpZGVyIH0gZnJvbSBcIi4uL2NvbnRleHRzL0dhbWVDb250ZXh0XCI7XG5pbXBvcnQgeyBpbml0aWFsaXplRmlyZWJhc2UgfSBmcm9tIFwiLi4vbGliL2ZpcmViYXNlL2ZpcmViYXNlXCI7XG5cbmZ1bmN0aW9uIE15QXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfTogQXBwUHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IGNhbm9uaWNhbFVybCA9IGBodHRwczovL3RyZW5kZ3Vlc3Nlci5jb20ke3JvdXRlci5hc1BhdGggPT09IFwiL1wiID8gXCJcIiA6IHJvdXRlci5hc1BhdGh9YDtcbiAgXG4gIC8vIEluaXRpYWxpemUgRmlyZWJhc2UgaW1tZWRpYXRlbHksIG5vdCBpbiB1c2VFZmZlY3RcbiAgLy8gVGhpcyBlbnN1cmVzIEZpcmViYXNlIGlzIGF2YWlsYWJsZSBiZWZvcmUgYW55IGNvbXBvbmVudHMgbW91bnRcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgeyBhcHAsIGF1dGgsIGRiIH0gPSBpbml0aWFsaXplRmlyZWJhc2UodHJ1ZSwgZmFsc2UpO1xuICAgIGNvbnNvbGUubG9nKFwiRmlyZWJhc2UgaW5pdGlhbGl6ZWQgaW4gX2FwcC50c3hcIik7XG4gIH1cbiAgXG4gIC8vIExvYWQgZm9udHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBMb2FkIE9zd2FsZCBmb250IGZvciBnYW1lLXN0eWxlIHRleHRcbiAgICBjb25zdCBsaW5rT3N3YWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgIGxpbmtPc3dhbGQucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgIGxpbmtPc3dhbGQuaHJlZiA9ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU9zd2FsZDp3Z2h0QDQwMDs1MDA7NzAwJmRpc3BsYXk9c3dhcCc7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rT3N3YWxkKTtcbiAgICBcbiAgICAvLyBMb2FkIFByZXNzIFN0YXJ0IDJQIGZvciB0aXRsZS9kaXNwbGF5IHRleHRcbiAgICBjb25zdCBsaW5rUHJlc3NTdGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBsaW5rUHJlc3NTdGFydC5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgbGlua1ByZXNzU3RhcnQuaHJlZiA9ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVByZXNzK1N0YXJ0KzJQJmRpc3BsYXk9c3dhcCc7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rUHJlc3NTdGFydCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQobGlua09zd2FsZCk7XG4gICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGxpbmtQcmVzc1N0YXJ0KTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIFxuICByZXR1cm4gKFxuICAgIDxDb25zZW50UHJvdmlkZXI+XG4gICAgICA8QXV0aFByb3ZpZGVyPlxuICAgICAgICA8R2FtZVByb3ZpZGVyPlxuICAgICAgICAgIDxIZWFkPlxuICAgICAgICAgICAgey8qIFByaW1hcnkgTWV0YSBUYWdzICovfVxuICAgICAgICAgICAgPHRpdGxlPlRyZW5kR3Vlc3NlciAtIHRoZSBoaWdoZXIgb3IgbG93ZXIgZ2FtZTwvdGl0bGU+XG4gICAgICAgICAgICA8bWV0YVxuICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBjb250ZW50PVwiVHJlbmRHdWVzc2VyIC0gdGhlIGhpZ2hlciBvciBsb3dlciBnYW1lXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8bWV0YVxuICAgICAgICAgICAgICBuYW1lPVwia2V5d29yZHNcIlxuICAgICAgICAgICAgICBjb250ZW50PVwidHJlbmRndWVzc2VyLCBoaWdoZXIgb3IgbG93ZXIsIGdhbWUsIHNpbmdsZSBwbGF5ZXIsIHRyZW5kaW5nLCBzZWFyY2gsIGdhbWVcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxtZXRhXG4gICAgICAgICAgICAgIG5hbWU9XCJ2aWV3cG9ydFwiXG4gICAgICAgICAgICAgIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT01XCJcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7LyogQ2Fub25pY2FsIFVSTCAqL31cbiAgICAgICAgICA8bGluayByZWw9XCJjYW5vbmljYWxcIiBocmVmPXtjYW5vbmljYWxVcmx9IC8+XG5cbiAgICAgICAgICB7LyogT3BlbiBHcmFwaCAvIEZhY2Vib29rICovfVxuICAgICAgICAgIDxtZXRhIHByb3BlcnR5PVwib2c6dHlwZVwiIGNvbnRlbnQ9XCJ3ZWJzaXRlXCIgLz5cbiAgICAgICAgICA8bWV0YSBwcm9wZXJ0eT1cIm9nOnVybFwiIGNvbnRlbnQ9e2Nhbm9uaWNhbFVybH0gLz5cbiAgICAgICAgICA8bWV0YVxuICAgICAgICAgICAgcHJvcGVydHk9XCJvZzp0aXRsZVwiXG4gICAgICAgICAgICBjb250ZW50PVwiVHJlbmRHdWVzc2VyIC0gdGhlIGhpZ2hlciBvciBsb3dlciBnYW1lXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxtZXRhXG4gICAgICAgICAgICBwcm9wZXJ0eT1cIm9nOmRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIGNvbnRlbnQ9XCJUcmVuZEd1ZXNzZXIgLSB0aGUgaGlnaGVyIG9yIGxvd2VyIGdhbWVcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPG1ldGFcbiAgICAgICAgICAgIHByb3BlcnR5PVwib2c6aW1hZ2VcIlxuICAgICAgICAgICAgY29udGVudD1cImh0dHBzOi8vdHJlbmRndWVzc2VyLmNvbS9pbWFnZXMvc29jaWFsLWNvdmVyLnBuZ1wiXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8bWV0YSBwcm9wZXJ0eT1cIm9nOmltYWdlOndpZHRoXCIgY29udGVudD1cIjEyMDBcIiAvPlxuICAgICAgICAgIDxtZXRhIHByb3BlcnR5PVwib2c6aW1hZ2U6aGVpZ2h0XCIgY29udGVudD1cIjYzMFwiIC8+XG4gICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJvZzpzaXRlX25hbWVcIiBjb250ZW50PVwiUHlyYW1pZC5OaW5qYVwiIC8+XG4gICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJvZzpsb2NhbGVcIiBjb250ZW50PVwiZW5fVVNcIiAvPlxuXG4gICAgICAgICAgey8qIFR3aXR0ZXIgKi99XG4gICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJ0d2l0dGVyOmNhcmRcIiBjb250ZW50PVwic3VtbWFyeV9sYXJnZV9pbWFnZVwiIC8+XG4gICAgICAgICAgPG1ldGEgcHJvcGVydHk9XCJ0d2l0dGVyOnVybFwiIGNvbnRlbnQ9e2Nhbm9uaWNhbFVybH0gLz5cbiAgICAgICAgICA8bWV0YVxuICAgICAgICAgICAgcHJvcGVydHk9XCJ0d2l0dGVyOnRpdGxlXCJcbiAgICAgICAgICAgIGNvbnRlbnQ9XCJQeXJhbWlkLk5pbmphIC0gVGhlIERpZ2l0YWwgQ2FyZCBEcmlua2luZyBHYW1lXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxtZXRhXG4gICAgICAgICAgICBwcm9wZXJ0eT1cInR3aXR0ZXI6ZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgY29udGVudD1cIlRyZW5kR3Vlc3NlciAtIHRoZSBoaWdoZXIgb3IgbG93ZXIgZ2FtZVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8bWV0YVxuICAgICAgICAgICAgcHJvcGVydHk9XCJ0d2l0dGVyOmltYWdlXCJcbiAgICAgICAgICAgIGNvbnRlbnQ9XCJodHRwczovL3RyZW5kZ3Vlc3Nlci5jb20vaW1hZ2VzL3NvY2lhbC1jb3Zlci5wbmdcIlxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7LyogRmF2aWNvbiBhbmQgaWNvbnMgKi99XG4gICAgICAgICAgPGxpbmsgcmVsPVwiaWNvblwiIGhyZWY9XCIvZmF2aWNvbi5pY29cIiAvPlxuXG4gICAgICAgICAgey8qIFByZWxvYWQgZm9udHMgKi99XG4gICAgICAgICAgPGxpbmtcbiAgICAgICAgICAgIHJlbD1cInByZWxvYWRcIlxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9T3N3YWxkOndnaHRANDAwOzUwMDs3MDAmZGlzcGxheT1zd2FwXCJcbiAgICAgICAgICAgIGFzPVwic3R5bGVcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGxpbmtcbiAgICAgICAgICAgIHJlbD1cInByZWxvYWRcIlxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9UHJlc3MrU3RhcnQrMlAmZGlzcGxheT1zd2FwXCJcbiAgICAgICAgICAgIGFzPVwic3R5bGVcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvSGVhZD5cbiAgICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxuICAgICAgICA8L0dhbWVQcm92aWRlcj5cbiAgICAgIDwvQXV0aFByb3ZpZGVyPlxuICAgIDwvQ29uc2VudFByb3ZpZGVyPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBNeUFwcDtcbiJdLCJuYW1lcyI6WyJIZWFkIiwidXNlRWZmZWN0IiwidXNlUm91dGVyIiwiQ29uc2VudFByb3ZpZGVyIiwiQXV0aFByb3ZpZGVyIiwiR2FtZVByb3ZpZGVyIiwiaW5pdGlhbGl6ZUZpcmViYXNlIiwiTXlBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiLCJyb3V0ZXIiLCJjYW5vbmljYWxVcmwiLCJhc1BhdGgiLCJhcHAiLCJhdXRoIiwiZGIiLCJjb25zb2xlIiwibG9nIiwibGlua09zd2FsZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInJlbCIsImhyZWYiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJsaW5rUHJlc3NTdGFydCIsInJlbW92ZUNoaWxkIiwidGl0bGUiLCJtZXRhIiwibmFtZSIsImNvbnRlbnQiLCJsaW5rIiwicHJvcGVydHkiLCJhcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/pages/_document.tsx":
/*!*********************************!*\
  !*** ./src/pages/_document.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"./node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Document() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n        lang: \"en\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        href: \"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap\",\n                        rel: \"stylesheet\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 8,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        href: \"https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap\",\n                        rel: \"stylesheet\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 12,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"apple-touch-icon\",\n                        sizes: \"180x180\",\n                        href: \"/favicons/apple-touch-icon.png\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 18,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        type: \"image/png\",\n                        sizes: \"32x32\",\n                        href: \"/favicons/favicon-32x32.png\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 19,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        type: \"image/png\",\n                        sizes: \"16x16\",\n                        href: \"/favicons/favicon-16x16.png\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 20,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 21,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"manifest\",\n                        href: \"/site.webmanifest\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 22,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"theme-color\",\n                        content: \"#1b084e\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 25,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"robots\",\n                        content: \"index, follow\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 26,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"googlebot\",\n                        content: \"index, follow\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 27,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"format-detection\",\n                        content: \"telephone=no\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 28,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"application-name\",\n                        content: \"Pyramid.Ninja\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 31,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"apple-mobile-web-app-capable\",\n                        content: \"yes\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 32,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"apple-mobile-web-app-status-bar-style\",\n                        content: \"black-translucent\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 33,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"apple-mobile-web-app-title\",\n                        content: \"Pyramid.Ninja\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 34,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"mobile-web-app-capable\",\n                        content: \"yes\"\n                    }, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 35,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                className: \"antialiased\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 38,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                        lineNumber: 39,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n                lineNumber: 37,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/alex/Developer/trendguesser/src/pages/_document.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFFOUMsU0FBU0k7SUFDdEIscUJBQ0UsOERBQUNKLCtDQUFJQTtRQUFDSyxNQUFLOzswQkFDVCw4REFBQ0osK0NBQUlBOztrQ0FFSCw4REFBQ0s7d0JBQ0NDLE1BQUs7d0JBQ0xDLEtBQUk7Ozs7OztrQ0FFTiw4REFBQ0Y7d0JBQ0NDLE1BQUs7d0JBQ0xDLEtBQUk7Ozs7OztrQ0FJTiw4REFBQ0Y7d0JBQUtFLEtBQUk7d0JBQW1CQyxPQUFNO3dCQUFVRixNQUFLOzs7Ozs7a0NBQ2xELDhEQUFDRDt3QkFBS0UsS0FBSTt3QkFBT0UsTUFBSzt3QkFBWUQsT0FBTTt3QkFBUUYsTUFBSzs7Ozs7O2tDQUNyRCw4REFBQ0Q7d0JBQUtFLEtBQUk7d0JBQU9FLE1BQUs7d0JBQVlELE9BQU07d0JBQVFGLE1BQUs7Ozs7OztrQ0FDckQsOERBQUNEO3dCQUFLRSxLQUFJO3dCQUFPRCxNQUFLOzs7Ozs7a0NBQ3RCLDhEQUFDRDt3QkFBS0UsS0FBSTt3QkFBV0QsTUFBSzs7Ozs7O2tDQUcxQiw4REFBQ0k7d0JBQUtDLE1BQUs7d0JBQWNDLFNBQVE7Ozs7OztrQ0FDakMsOERBQUNGO3dCQUFLQyxNQUFLO3dCQUFTQyxTQUFROzs7Ozs7a0NBQzVCLDhEQUFDRjt3QkFBS0MsTUFBSzt3QkFBWUMsU0FBUTs7Ozs7O2tDQUMvQiw4REFBQ0Y7d0JBQUtDLE1BQUs7d0JBQW1CQyxTQUFROzs7Ozs7a0NBR3RDLDhEQUFDRjt3QkFBS0MsTUFBSzt3QkFBbUJDLFNBQVE7Ozs7OztrQ0FDdEMsOERBQUNGO3dCQUFLQyxNQUFLO3dCQUErQkMsU0FBUTs7Ozs7O2tDQUNsRCw4REFBQ0Y7d0JBQUtDLE1BQUs7d0JBQXdDQyxTQUFROzs7Ozs7a0NBQzNELDhEQUFDRjt3QkFBS0MsTUFBSzt3QkFBNkJDLFNBQVE7Ozs7OztrQ0FDaEQsOERBQUNGO3dCQUFLQyxNQUFLO3dCQUF5QkMsU0FBUTs7Ozs7Ozs7Ozs7OzBCQUU5Qyw4REFBQ0M7Z0JBQUtDLFdBQVU7O2tDQUNkLDhEQUFDYiwrQ0FBSUE7Ozs7O2tDQUNMLDhEQUFDQyxxREFBVUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSW5CIiwic291cmNlcyI6WyIvVXNlcnMvYWxleC9EZXZlbG9wZXIvdHJlbmRndWVzc2VyL3NyYy9wYWdlcy9fZG9jdW1lbnQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0bWwsIEhlYWQsIE1haW4sIE5leHRTY3JpcHQgfSBmcm9tIFwibmV4dC9kb2N1bWVudFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEb2N1bWVudCgpIHtcbiAgcmV0dXJuIChcbiAgICA8SHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgIDxIZWFkPlxuICAgICAgICB7LyogTG9hZCBmb250cyBkaXJlY3RseSAqL31cbiAgICAgICAgPGxpbmtcbiAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1QcmVzcytTdGFydCsyUCZkaXNwbGF5PXN3YXBcIlxuICAgICAgICAgIHJlbD1cInN0eWxlc2hlZXRcIlxuICAgICAgICAvPlxuICAgICAgICA8bGluayBcbiAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Pc3dhbGQ6d2dodEA0MDA7NTAwOzcwMCZkaXNwbGF5PXN3YXBcIiBcbiAgICAgICAgICByZWw9XCJzdHlsZXNoZWV0XCJcbiAgICAgICAgLz5cbiAgICAgICAgXG4gICAgICAgIHsvKiBGYXZpY29uIGFuZCBhcHAgaWNvbnMgKi99XG4gICAgICAgIDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjE4MHgxODBcIiBocmVmPVwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24ucG5nXCIgLz5cbiAgICAgICAgPGxpbmsgcmVsPVwiaWNvblwiIHR5cGU9XCJpbWFnZS9wbmdcIiBzaXplcz1cIjMyeDMyXCIgaHJlZj1cIi9mYXZpY29ucy9mYXZpY29uLTMyeDMyLnBuZ1wiIC8+XG4gICAgICAgIDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgc2l6ZXM9XCIxNngxNlwiIGhyZWY9XCIvZmF2aWNvbnMvZmF2aWNvbi0xNngxNi5wbmdcIiAvPlxuICAgICAgICA8bGluayByZWw9XCJpY29uXCIgaHJlZj1cIi9mYXZpY29uLmljb1wiIC8+XG4gICAgICAgIDxsaW5rIHJlbD1cIm1hbmlmZXN0XCIgaHJlZj1cIi9zaXRlLndlYm1hbmlmZXN0XCIgLz5cbiAgICAgICAgXG4gICAgICAgIHsvKiBTRU8gbWV0YSB0YWdzICovfVxuICAgICAgICA8bWV0YSBuYW1lPVwidGhlbWUtY29sb3JcIiBjb250ZW50PVwiIzFiMDg0ZVwiIC8+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJyb2JvdHNcIiBjb250ZW50PVwiaW5kZXgsIGZvbGxvd1wiIC8+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJnb29nbGVib3RcIiBjb250ZW50PVwiaW5kZXgsIGZvbGxvd1wiIC8+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJmb3JtYXQtZGV0ZWN0aW9uXCIgY29udGVudD1cInRlbGVwaG9uZT1ub1wiIC8+XG4gICAgICAgIFxuICAgICAgICB7LyogTW9iaWxlL3Jlc3BvbnNpdmUgbWV0YSB0YWdzICovfVxuICAgICAgICA8bWV0YSBuYW1lPVwiYXBwbGljYXRpb24tbmFtZVwiIGNvbnRlbnQ9XCJQeXJhbWlkLk5pbmphXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLXN0YXR1cy1iYXItc3R5bGVcIiBjb250ZW50PVwiYmxhY2stdHJhbnNsdWNlbnRcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwiYXBwbGUtbW9iaWxlLXdlYi1hcHAtdGl0bGVcIiBjb250ZW50PVwiUHlyYW1pZC5OaW5qYVwiIC8+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJtb2JpbGUtd2ViLWFwcC1jYXBhYmxlXCIgY29udGVudD1cInllc1wiIC8+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8Ym9keSBjbGFzc05hbWU9XCJhbnRpYWxpYXNlZFwiPlxuICAgICAgICA8TWFpbiAvPlxuICAgICAgICA8TmV4dFNjcmlwdCAvPlxuICAgICAgPC9ib2R5PlxuICAgIDwvSHRtbD5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJIdG1sIiwiSGVhZCIsIk1haW4iLCJOZXh0U2NyaXB0IiwiRG9jdW1lbnQiLCJsYW5nIiwibGluayIsImhyZWYiLCJyZWwiLCJzaXplcyIsInR5cGUiLCJtZXRhIiwibmFtZSIsImNvbnRlbnQiLCJib2R5IiwiY2xhc3NOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_document.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "firebase/analytics":
/*!*************************************!*\
  !*** external "firebase/analytics" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/analytics");;

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/firestore");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "next/head":
/*!****************************!*\
  !*** external "next/head" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/head");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = import("uuid");;

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("./webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();